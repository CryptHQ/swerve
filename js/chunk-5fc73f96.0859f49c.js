(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fc73f96","chunk-361221f9"],{"0342":function(e,t,n){"use strict";var a=n("7a50"),r=n.n(a);r.a},"0481":function(e,t,n){"use strict";var a=n("23e7"),r=n("a2bf"),s=n("7b0b"),c=n("50c4"),o=n("a691"),u=n("65f0");a({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=s(this),n=c(t.length),a=u(t,0);return a.length=r(a,t,t,n,0,void 0===e?1:o(e)),a}})},"2bd5":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));n("caad"),n("4fad"),n("2ca0");var a,r=n("3835"),s=n("ade3"),c=n("2b0e"),o=c["a"].observable((a={address:null,sdk:null,transactions:[]},Object(s["a"])(a,"address",null),Object(s["a"])(a,"default_account",null),Object(s["a"])(a,"minersFee",17e3),Object(s["a"])(a,"minersLockFee",0),Object(s["a"])(a,"minersReleaseFee",0),Object(s["a"])(a,"mintFee",0),Object(s["a"])(a,"burnFee",0),Object(s["a"])(a,"confirmations",6),Object(s["a"])(a,"space",null),Object(s["a"])(a,"box",null),Object(s["a"])(a,"showModal",!1),Object(s["a"])(a,"showModal1",!1),Object(s["a"])(a,"showModalRecover",!1),Object(s["a"])(a,"msg_signature",null),Object(s["a"])(a,"password",null),Object(s["a"])(a,"aes_key",null),Object(s["a"])(a,"fireUser",null),Object(s["a"])(a,"loaded",!1),Object(s["a"])(a,"adapterContract",null),Object(s["a"])(a,"recover",!1),a));function u(){for(var e=0,t=0,n=Object.entries(localStorage);t<n.length;t++){var a=Object(r["a"])(n[t],2),s=a[0],c=a[1];s.startsWith("swervebtc_")&&(c=JSON.parse(c),c.removed||([0,3].includes(c.type)&&![14,15,17].includes(c.state)&&e++,1==c.type&&65!=c.state&&e++))}return e}},"2ca0":function(e,t,n){"use strict";var a=n("23e7"),r=n("06cf").f,s=n("50c4"),c=n("5a34"),o=n("1d80"),u=n("ab13"),i=n("c430"),l="".startsWith,d=Math.min,p=u("startsWith"),f=!i&&!p&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();a({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=String(o(this));c(e);var n=s(d(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return l?l.call(t,a,n):t.slice(n,n+a.length)===a}})},4069:function(e,t,n){var a=n("44d2");a("flat")},"5db7":function(e,t,n){"use strict";var a=n("23e7"),r=n("a2bf"),s=n("7b0b"),c=n("50c4"),o=n("1c0b"),u=n("65f0");a({target:"Array",proto:!0},{flatMap:function(e){var t,n=s(this),a=c(n.length);return o(e),t=u(n,0),t.length=r(t,n,n,a,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"5e35":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));n("d3b7"),n("96cf");var a=n("1da1"),r=n("2fa3"),s={btcPrice:null};function c(){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["o"](fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd"),300);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,s.btcPrice=n.bitcoin.usd,e.abrupt("return",n.bitcoin.usd);case 8:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},"6eaa":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"window white"},[n("fieldset",[n("legend",{staticStyle:{color:"#86fce7","font-weight":"600","margin-bottom":"1rem","padding-top":".5rem","text-align":"center"}},[e._v("Pool deposits & daily volume")]),n("div",{class:{"loading line":!e.yPoolTvlUsd,"text-center-stats":!0},attrs:{id:"total-balances"}},[e._v(" TVL: "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.yPoolTvlUsd,expression:"yPoolTvlUsd"}]},[e._v("$"+e._s(e.formatNumber(e.yPoolTvlUsd)))])]),n("div",{class:{"loading line":e.volume<0,"text-center-stats":!0}},[e._v(" Daily volume: "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.volume>=0,expression:"volume >= 0"}]},[e._v("$"+e._s(e._f("formatNumber")(0|e.volume,0)))])])])])},r=[],s=(n("caad"),n("d81d"),n("b680"),n("4fad"),n("3835")),c=(n("96cf"),n("1da1")),o=n("99e5"),u=n.n(o),i=n("5245"),l=n("2fa3"),d=n("901e"),p=n.n(d),f=n("a4e2"),b=n("51bf"),m=n("5e35"),v=n("cf45"),h={props:{totalVolume:{default:void 0}},data:function(){return{total:"",yPoolTvl:null,boost:null}},computed:{volume:function(){return void 0!==this.totalVolume?this.totalVolume:f["g"]()},yPoolTvlUsd:function(){return this.yPoolTvl}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["e"]();case 2:(void 0===e.totalVolume||e.totalVolume<0)&&e.dailyVolume(),null===e.yPoolTvl&&e.getYPoolNumbers();case 4:case"end":return t.stop()}}),t)})))()},methods:{formatNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l["e"](e,t)},getYPoolNumbers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["getYPoolTVL"])(i["g"].swusd);case 2:e.yPoolTvl=t.sent,console.log("yPoolTvl",e.yPoolTvl);case 4:case"end":return t.stop()}}),t)})))()},totalBalances:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r,c,o,d,f,v,h,w,g,_,x,y,j,B;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.total=0,m["b"].btcPrice){t.next=5;break}return t.next=5,m["a"]();case 5:for(n=p()(0),a={},r={},[],c=b["e"].web3||new u.a(i["k"]),o=new c.eth.Contract(i["l"],i["m"]),d=[],f=Object.assign({},i["g"]),delete f.susd,delete f.tbtc,delete f.swusd,v=0,h=Object.entries(f);v<h.length;v++)w=Object(s["a"])(h[v],2),g=w[0],_=w[1],console.log(g,"THE KEY"),a[g]=new c.eth.Contract(i["c"],_.token_address),r[g]=new c.eth.Contract(_.swap_abi,_.swap_address),d.push([a[g]._address,a[g].methods.totalSupply().encodeABI()]),d.push([r[g]._address,r[g].methods.get_virtual_price().encodeABI()]);return new c.eth.Contract(i["c"],i["g"].susd.token_address),x=new c.eth.Contract(i["g"].susd.swap_abi,i["g"].susd.swap_address),y=new c.eth.Contract(i["s"],i["g"].susd.coins[0]),d.push([y._address,y.methods.getPricePerFullShare().encodeABI()],[x._address,x.methods.balances(0).encodeABI()]),t.next=23,o.methods.aggregate(d).call();case 23:j=t.sent,B=j[1].map((function(e){return c.eth.abi.decodeParameter("uint256",e)})),Object(l["b"])(B,2).map((function(e,t,a){var r=p()(e[0]).times(p()(e[1])).div(1e36);[6,7].includes(t)&&(r=r.times(p()(m["b"].btcPrice))),n=n.plus(r)})),e.total=n.toFixed(0),t.next=33;break;case 29:throw t.prev=29,t.t0=t["catch"](0),console.log("total balances issue"),t.t0;case 33:case"end":return t.stop()}}),t,null,[[0,29]])})))()},dailyVolume:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=["compound","usdt","swusd","busd","susd","pax","tbtc","ren","sbtc"],e.next=3,f["e"](t);case 3:case"end":return e.stop()}}),e)})))()}}},w=h,g=(n("cc4c"),n("2877")),_=Object(g["a"])(w,a,r,!1,null,"0a8cd102",null);t["a"]=_.exports},"73d9":function(e,t,n){var a=n("44d2");a("flatMap")},"7a50":function(e,t,n){},"820e":function(e,t,n){"use strict";var a=n("23e7"),r=n("1c0b"),s=n("f069"),c=n("e667"),o=n("2266");a({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=s.f(t),a=n.resolve,u=n.reject,i=c((function(){var n=r(t.resolve),s=[],c=0,u=1;o(e,(function(e){var r=c++,o=!1;s.push(void 0),u++,n.call(t,e).then((function(e){o||(o=!0,s[r]={status:"fulfilled",value:e},--u||a(s))}),(function(e){o||(o=!0,s[r]={status:"rejected",reason:e},--u||a(s))}))})),--u||a(s)}));return i.error&&u(i.value),n.promise}})},a2bf:function(e,t,n){"use strict";var a=n("e8b5"),r=n("50c4"),s=n("0366"),c=function(e,t,n,o,u,i,l,d){var p,f=u,b=0,m=!!l&&s(l,d,3);while(b<o){if(b in n){if(p=m?m(n[b],b,t):n[b],i>0&&a(p))f=c(e,t,p,r(p.length),f,i-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}b++}return f};e.exports=c},a468:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tradeview window white"},[n("fieldset",{attrs:{id:"onesplit"}},[n("legend",{staticClass:"text-center"},[e._v("SWAP USING ALL SWERVE POOLS")]),n("div",{staticClass:"aligncontainer"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.contactUs,expression:"contactUs"}],staticClass:"info-message gentle-message pulseinfo"},[e._v(" We believe there was an issue with your swap. ")])]),n("swap",{attrs:{"hide-wrapped-token":!0}})],1)])},r=[],s=(n("caad"),n("d81d"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),c=n("cc22"),o=n("51bf"),u=n("2bd5"),i=function(){return{component:Promise.all([n.e("chunk-b788ec38"),n.e("chunk-26440418"),n.e("chunk-7024f338"),n.e("chunk-964e3332"),n.e("chunk-6ff1e926")]).then(n.bind(null,"44bd")),loading:c["default"],delay:0}},l={data:function(){return{unwatch:null,loading:!1}},computed:{currentPool:function(){return o["g"].currentPool()},hasIncomplete:function(){return u["a"]()},publicPath:function(){return"/"},default_account:function(){return o["g"].default_account()},contactUs:function(){return["0x0f87dd03a74e6a48d56661d96f44880c79b9d795"].map((function(e){return e.toLowerCase()})).includes(this.default_account.toLowerCase())}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.unwatch=e.$watch((function(){return o["e"].initializedContracts}),function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Promise.all(["swusd"].map((function(e){return Object(o["i"])(o["e"].contracts[e])}))),e.unwatch();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},methods:{loaded:function(){"SwapNative"==this.swapComponent&&(this.loading=!1)}},components:{Swap:c["default"],SwapNative:i}},d=l,p=(n("0342"),n("2877")),f=Object(p["a"])(d,a,r,!1,null,"b84d1122",null);t["default"]=f.exports},a4e2:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return w})),n.d(t,"g",(function(){return _}));n("99af"),n("4de4"),n("7db0"),n("caad"),n("277d"),n("d81d"),n("13d5"),n("fb6a"),n("6eba"),n("0d03"),n("4fad"),n("c1f9"),n("d3b7"),n("07ac"),n("ac1f"),n("2532"),n("3ca3"),n("1276"),n("ddb0");var a=n("b85c"),r=(n("96cf"),n("1da1")),s=n("3835"),c=n("5530"),o=n("2b0e"),u=n("5245"),i=function(){return{compound:[],usdt:[],y:[],busd:[],susd:[],pax:[],tbtc:[],ren:[],sbtc:[]}},l=o["a"].observable({volumes:Object(c["a"])({},Object.fromEntries(Object.entries(i()).map((function(e){var t=Object(s["a"])(e,2),n=t[0];t[1];return[n,[-1,-1]]})))),volumeData:{5:Object(c["a"])({},i()),30:Object(c["a"])({},i()),1440:Object(c["a"])({},i())},allVolume:Object(c["a"])({},i())});function d(e,t){var n=t.find((function(t){return Date.parse(t[0])/1e3-e>0}));return void 0===n?t[t.length-1][1]:n.price}function p(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,c,o,u,i,p,f,b,m,v,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]&&h[1],r=h.length>2&&void 0!==h[2]?h[2]:5,Array.isArray(t)||(t=[t]),t=t.map((function(e){return"swusd"==e?"y":"susdv2"==e?"susd":"ren2"==e?"ren":"rens"==e?"sbtc":e})),n||(t=t.filter((function(e){return!l.volumeData[r][e].length}))),c=t.map((function(e){return"ren"==e&&(e="ren2"),"sbtc"==e&&(e="rens"),fetch("".concat(window.domain,"/raw-stats/").concat(e,"-").concat(r,"m.json"))})),(t.includes("tbtc")||t.includes("ren")||t.includes("sbtc"))&&c.push(fetch("\n\t\t\thttps://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&from=1589587198&to=".concat(Date.now()/1e3|0))),e.next=9,Promise.all(c);case 9:return c=e.sent,e.next=12,Promise.all(c.map((function(e){return e.json()})));case 12:o=e.sent,u=o[o.length-1],(t.includes("tbtc")||t.includes("ren"))&&(o=o.slice(0,-1)),i=Object(a["a"])(o.entries());try{for(i.s();!(p=i.n()).done;)f=Object(s["a"])(p.value,2),b=f[0],m=f[1],v=t[b],["tbtc","ren","sbtc"].includes(v)&&(m=m.map((function(e){return e.volume=Object.fromEntries(Object.entries(e.volume).map((function(t){var n=Object(s["a"])(t,2),a=n[0],r=n[1];return[a,r.map((function(t){return t*d(e.timestamp,u.prices)}))]}))),e}))),l.volumeData[r][v]=m}catch(w){i.e(w)}finally{i.f()}case 17:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s,c,u,i,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p.length>1&&void 0!==p[1]&&p[1],e.next=3,web3.eth.getBlockNumber();case 3:return n=e.sent,a=n-5760,e.next=7,fetch("https://api.thegraph.com/subgraphs/name/chaddeere/ypool24hvolume",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{totalVolumes(block: { number: ".concat(a," }) { volume }}"),variables:null})});case 7:return r=e.sent,e.next=10,r.json();case 10:return s=e.sent,c=0,s["data"]["totalVolumes"].length>0&&(c=s["data"]["totalVolumes"][0]["volume"]),e.next=15,fetch("https://api.thegraph.com/subgraphs/name/chaddeere/ypool24hvolume",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{totalVolumes { volume }}",variables:null})});case 15:return u=e.sent,e.next=18,u.json();case 18:i=e.sent["data"]["totalVolumes"][0]["volume"],d=i-c,console.log("fetching volume",d),o["a"].set(l.volumes["y"],0,d);case 22:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,c,o,i,d,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]&&f[1],r=f.length>2&&void 0!==f[2]?f[2]:30,t="swusd"==t?"y":"susdv2"==t?"susd":t,!l.allVolume[t].length||n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p(t,n,r);case 7:c=l.volumeData[r][t],l.volumeData[t]=c,o=Object(a["a"])(c);try{for(o.s();!(i=o.n()).done;)d=i.value,l.allVolume[t].push([1e3*d.timestamp,Object.entries(d.volume).map((function(e){var n=Object(s["a"])(e,2),a=n[0],r=n[1],c=u["g"]["susd"==t?"susdv2":t].coin_precisions[a.split("-")[0]];return r[0]/c})).reduce((function(e,t){return e+t}),0)])}catch(b){o.e(b)}finally{o.f()}case 11:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function w(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,s,c,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],a=o.length>2&&void 0!==o[2]?o[2]:30,t="swusd"==t?"y":"susdv2"==t?"susd":t,l.volumeData[a][t].length){e.next=6;break}return e.next=6,p(t,n,a);case 6:for(r=[],s=function(e){var n=l.volumeData[a][t],s=n[e],c=n[e-1],o=s.balances.map((function(e,n){return e/u["g"]["susd"==t?"susdv2":t].coin_precisions[n]})),i=s.rates.map((function(e,t){return e/c.rates[t]-1})),d=o.map((function(e,t){return e*i[t]})),p=d.reduce((function(e,t){return e+t}),0),f=o.reduce((function(e,t){return e+t}),0),b=p/f,m=s.timestamp-c.timestamp,v=Math.pow(1+b,31536e3/m);r.push([1e3*s.timestamp,100*(v-1)])},c=1;c<l.volumeData[a][t].length;c++)s(c);return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(){return Object.values(l.volumes).reduce((function(e,t){return t[0]>0?e+t[0]:e}),0)}},cc4c:function(e,t,n){"use strict";var a=n("efb8"),r=n.n(a);r.a},cf6b:function(e,t,n){},e48a:function(e,t,n){"use strict";var a=n("cf6b"),r=n.n(a);r.a},e89f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-trade"),n("div",{staticClass:"window white"},[n("fieldset",{staticClass:"poolsdialog"},[n("legend",{attrs:{STYLE:"color: #86fce7;font-weight:600;margin-bottom: .5rem; padding-top: .5rem;"}},[n("span",{staticClass:"tooltip"},[e._v(" $ "),n("span",{staticClass:"tooltiptext"},[e._v(" Your total balances: $"+e._s(+e.sumBalances.toFixed(2))+" ")])]),e._v(" SWERVE POOLS "),n("span",{staticClass:"tooltip"},[e._v(" $ "),n("span",{staticClass:"tooltiptext"},[e._v(" Your total balances: $"+e._s(+e.sumBalances.toFixed(2))+" ")])])]),n("div",{class:{selected:2==e.activePoolLink}},[n("router-link",{attrs:{to:"/swusd"}},[n("span",{staticClass:"pools",staticStyle:{"font-size":"1rem"}},[e._v(" [DAI, USDC, USDT, TUSD]")]),n("span",{staticClass:"apr"},[n("span",[e._v("Pool APY: +")]),n("span",{class:{"loading line":!e.daily_apy[0]}},[e._v(e._s(e.daily_apy[0]))]),e._v("% ")]),n("span",[e._v("SWRV APY: "+e._s(e._f("formatNumber")(.4*e.swerveApy))+"% to "+e._s(e._f("formatNumber")(2.5*e.swerveApy))+"%")]),n("span",[n("span",{directives:[{name:"show",rawName:"v-show",value:e.balances.y>2,expression:"balances.y > 2"}]},[e._v("My Balance: $"+e._s(e.balances.y&&e.formatNumber(e.balances.y))+" ")])]),n("span",{directives:[{name:"show",rawName:"v-show",value:null!==e.realBoostRate&&!isNaN(e.realBoostRate),expression:"realBoostRate !== null && !isNaN(realBoostRate)"}],staticClass:"apr"},[e._v(" My APY: "+e._s(e._f("formatNumber")(e.realBoostRate*e.swerveApy,2))+"% ")])])],1)])]),n("total-balances",{attrs:{"total-volume":e.totalVolume}})],1)},r=[],s=(n("4de4"),n("7db0"),n("0481"),n("5db7"),n("caad"),n("d81d"),n("13d5"),n("fb6a"),n("4069"),n("73d9"),n("6eba"),n("0d03"),n("b0c0"),n("b680"),n("4fad"),n("d3b7"),n("07ac"),n("820e"),n("2532"),n("3ca3"),n("ddb0"),n("b85c")),c=n("3835"),o=(n("96cf"),n("1da1")),u=n("2b0e"),i=n("6eaa"),l=n("a468"),d=n("5245"),p=n("a4e2"),f=n("2fa3"),b=n("51bf"),m=n("cf45"),v={components:{TotalBalances:i["a"],BasicTrade:l["default"]},data:function(){return{activePoolLink:-1,pools:["compound","usdt","y","busd","susdv2","pax","ren","sbtc"],daily_apy:[],weekly_apy:[],monthly_apy:[],apy:[],start:0,end:0,volumes:{compound:[-1,-1],usdt:[-1,-1],y:[-1,-1],busd:[-1,-1],susd:[-1,-1],pax:[-1,-1],tbtc:[-1,-1],ren:[-1,-1],sbtc:[-1,-1]},balances:{compound:-1,usdt:-1,y:-1,busd:-1,susdv2:-1,pax:-1,tbtc:-1,ren:-1,sbtc:-1},snxRewards:null,sbtcRewards:null,yfiRewards:null,balRewards:null,btcPrice:null,swrvApy:"∞",myYbalance:null,CRVAPYs:{},swerveApyTopRange:null,swrvRealBoostRate:null}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=new Date,n.setHours(0,0,0,0),e.start=n.getTime()/1e3,a=new Date,a.setHours(23,59,59,999),e.end=a.getTime()/1e3,e.$watch((function(){return b["e"].web3&&b["e"].multicall}),(function(t){t&&e.getBalances()}));case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.keydownListener=document.addEventListener("keydown",e.handle_pool_change),e.getAPY(),b["e"].web3&&b["e"].multicall&&e.getBalances(),t.next=5,Object(m["calculateSwrvApy"])();case 5:return e.swrvApy=t.sent,t.next=8,Object(m["getUserBoostValue"])();case 8:n=t.sent,e.swrvDisplayBoostRate=n[0],e.swrvRealBoostRate=n[1],console.log("this.boost",e.swrvRealBoostRate),console.log("this.displayBoostRate",e.swrvDisplayBoostRate),console.log("this.realBoostRate",e.swrvRealBoostRate),console.log("this.swrvApy",e.swrvApy);case 15:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){document.removeEventListener("keydown",this.handle_pool_change)},computed:{totalVolume:function(){return p["g"]()},publicPath:function(){return"/"},sumBalances:function(){return Object.values(this.balances).filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)},swerveApy:function(){return this.swrvApy},realBoostRate:function(){return this.swrvRealBoostRate},myYBalanceValue:function(){return this.myYbalance}},methods:{formatNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return f["e"](e,t)},getCurveRewards:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,o,u,i,l,p,f,v,h,w,g,_,x,y,j,B,C,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getCRVAPY(),n=new b["e"].web3.eth.Contract(d["g"].susdv2.sCurveRewards_abi,d["g"].susdv2.sCurveRewards_address),a=new b["e"].web3.eth.Contract(d["g"].sbtc.sCurveRewards_abi,d["g"].sbtc.sCurveRewards_address),r=new b["e"].web3.eth.Contract(d["g"].swusd.sCurveRewards_abi,d["g"].swusd.sCurveRewards_address),s=new b["e"].web3.eth.Contract(d["g"].susdv2.swap_abi,d["g"].susdv2.swap_address),o=new b["e"].web3.eth.Contract(d["g"].sbtc.swap_abi,d["g"].sbtc.swap_address),u=new b["e"].web3.eth.Contract(d["g"].swusd.swap_abi,d["g"].swusd.swap_address),i=new b["e"].web3.eth.Contract(d["d"],d["e"]),l=[[n._address,n.methods.totalSupply().encodeABI()],[s._address,s.methods.get_virtual_price().encodeABI()],[n._address,n.methods.DURATION().encodeABI()],[n._address,n.methods.rewardRate().encodeABI()],[a._address,a.methods.totalSupply().encodeABI()],[o._address,o.methods.get_virtual_price().encodeABI()],[i._address,i.methods.getBalance("0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f").encodeABI()],[i._address,i.methods.getBalance("0x408e41876cccdc0f92210600ef50372656052a38").encodeABI()],[r._address,r.methods.totalSupply().encodeABI()],[u._address,u.methods.get_virtual_price().encodeABI()],[r._address,r.methods.DURATION().encodeABI()],[r._address,r.methods.rewardRate().encodeABI()],[n._address,n.methods.periodFinish().encodeABI()],[a._address,a.methods.periodFinish().encodeABI()],[r._address,r.methods.periodFinish().encodeABI()],[o._address,o.methods.balances(0).encodeABI()],[o._address,o.methods.balances(1).encodeABI()]],t.next=11,Object(m["clean_and_multi_call"])(l);case 11:return p=t.sent,f=p[1].map((function(e){return b["e"].web3.eth.abi.decodeParameter("uint256",e)})),t.next=15,e.fetchPrices();case 15:v=t.sent,h=Object(c["a"])(v,5),w=h[0],g=h[1],_=h[2],x=h[3],y=h[4],j=1,f[15]&&f[16]&&(B=f[15]/1e8,C=f[16]/1e8,j=B*_+C*_),e.balRewards=.64*(f[6]/1e18*w+f[7]/1e18*g)/j*x*100,e.snxRewards=f[2]*f[3]/1e18*365/7*w/(+f[0]*+f[1]/1e36)*100,O=Date.now()/1e3,+f[12]+1800<O&&(e.snxRewards=0),e.sbtcRewards=(1e4*w+25e3*g)/7*365/(_*f[4]*f[5]/1e36)*100,+f[13]+1800<O&&(e.sbtcRewards=0),e.yfiRewards=f[10]*f[11]/1e18*365/7*y/(+f[8]*+f[9]/1e36)*100,+f[14]+1800<O&&(e.yfiRewards=0),console.log(e.sbtcRewards,"SBTC REWARDS");case 28:case"end":return t.stop()}}),t)})))()},fetchPrices:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,c,o,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([fetch("https://api.coingecko.com/api/v3/simple/price?ids=havven,republic-protocol,bitcoin,balancer,yearn-finance&vs_currencies=usd")]);case 2:return t=e.sent,e.next=5,Promise.all(t.map((function(e,t){return"fulfilled"==e.status&&e.value.json()})));case 5:if(n=e.sent,a=n[0]&&n[0].havven.usd,r=n[0]&&n[0]["republic-protocol"].usd,s=n[0]&&n[0]["bitcoin"].usd,c=n[0]&&n[0].balancer.usd,o=n[0]&&n[0]["yearn-finance"].usd,"rejected"!=t[0].status){e.next=23;break}return e.next=14,Promise.allSettled([fetch("https://api.coinpaprika.com/v1/tickers/hav-havven"),fetch("https://api.coinpaprika.com/v1/tickers/ren-republic-protocol"),fetch("https://api.coinpaprika.com/v1/tickers/btc-bitcoin"),fetch("https://poloniex.com/public?command=returnTicker")]);case 14:return u=e.sent,e.next=17,Promise.all(u.map((function(e){return"fulfilled"==e.status&&e.value.json()})));case 17:i=e.sent,a=i[0]&&i[0].quotes.USD.price,r=i[1]&&i[1].quotes.USD.price,s=i[2]&&i[2].quotes.USD.price,c=i[3]&&i[3]["USDT_BAL"].last,o=i[4]&&i[4]["USDT_YFI"].last;case 23:return e.abrupt("return",[a,r,s,c,o]);case 24:case"end":return e.stop()}}),e)})))()},getBalances:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,b["e"].default_account){t.next=3;break}return t.abrupt("return");case 3:return b["e"].contracts.compound=b["e"],n=e.pools.flatMap((function(e){return[[d["g"][e].token_address,"0x70a08231000000000000000000000000"+b["e"].default_account.slice(2)],[d["g"][e].swap_address,"0xbb7b8b80"]]})),n.push([d["g"].susdv2.sCurveRewards_address,"0x70a08231000000000000000000000000"+b["e"].default_account.slice(2)]),n.push([d["g"].sbtc.sCurveRewards_address,"0x70a08231000000000000000000000000"+b["e"].default_account.slice(2)]),n.push([d["g"].swusd.sCurveRewards_address,"0x70a08231000000000000000000000000"+b["e"].default_account.slice(2)]),t.next=10,Object(m["clean_and_multi_call"])(n);case 10:a=t.sent,r=a[1].map((function(e){return web3.eth.abi.decodeParameter("uint256",e)})),console.log(r,"THE DECODED"),f["b"](r,2).slice(0,e.pools.length).map((function(t,n){var a=e.pools[n];u["a"].set(e.balances,a,+t[0]*+t[1]/1e36),["tbtc","ren","sbtc"].includes(a)&&u["a"].set(e.balances,a,e.balances[a]*e.btcPrice)})),s=r.length,u["a"].set(e.balances,"susdv2",e.balances.susdv2+ +r[s-3]*r[9]/1e36),u["a"].set(e.balances,"sbtc",e.balances.sbtc+ +r[s-2]*r[15]/1e36*e.btcPrice),u["a"].set(e.balances,"y",e.balances.y+ +r[s-1]*r[5]/1e36),t.next=24;break;case 20:throw t.prev=20,t.t0=t["catch"](0),console.log("issue in get balances"),t.t0;case 24:case"end":return t.stop()}}),t,null,[[0,20]])})))()},handle_pool_change:function(e){if(document.querySelector("#from_currency")!=document.activeElement&&document.querySelector("#custom_slippage_input")!=document.activeElement&&document.querySelector("#custom_gas_input")!=document.activeElement){if(-1==this.activePoolLink)return this.activePoolLink=2;if("ArrowUp"==e.code&&0!=this.activePoolLink&&(e.preventDefault(),this.activePoolLink--),"ArrowDown"==e.code&&this.activePoolLink<6&&(e.preventDefault(),this.activePoolLink++),e.code.includes("Digit")){e.preventDefault();var t=e.code.slice(-1);if(t>6)return;this.activePoolLink=t}"Enter"==e.code&&(e.preventDefault(),this.$router.push("/"+pools[this.activePoolLink]))}},getAPY:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new b["e"].web3.eth.Contract(d["a"],d["j"]),t.next=3,n.methods.getAPY().call();case 3:return t.t0=t.sent,t.t1=Math.pow(10,16),e.daily_apy[0]=(t.t0/t.t1).toFixed(2),e.weekly_apy[0]=-1,e.monthly_apy[0]=-1,e.apy[0]=-1,t.abrupt("return");case 14:return r=t.sent,t.next=17,Promise.all(r.map((function(e){return e.json()}))).then((function(t){var n=t[0];e.btcPrice=t[1],e.btcPrice=e.btcPrice.bitcoin.usd;for(var r=0,o=Object.entries(p["f"].volumes);r<o.length;r++){var i=Object(c["a"])(o[r],2),l=i[0];i[1];if(p["f"].volumes[l]&&-1==p["f"].volumes[l][0]){var d="ren"==l?n.volume.ren2:"sbtc"==l?n.volume.rens:n.volume[l];u["a"].set(p["f"].volumes[l],0,d||0),["tbtc","ren","sbtc"].includes(l)&&(u["a"].set(p["f"].volumes[l],0,d*e.btcPrice||0),u["a"].set(p["f"].volumes[l],1,d||0))}}e.volumes=p["f"].volumes;var f,b=Object(s["a"])(a.entries());try{for(b.s();!(f=b.n()).done;){var m=Object(c["a"])(f.value,2),v=(m[0],m[1]),h=n.apy.day[v],w=n.apy.week[v],g=n.apy.month[v],_=n.apy.total[v];e.daily_apy.push((100*h).toFixed(2)),e.weekly_apy.push((100*w).toFixed(2)),e.monthly_apy.push((100*g).toFixed(2)),e.apy.push((100*_).toFixed(2))}}catch(x){b.e(x)}finally{b.f()}}))["catch"]((function(e){console.log("could not get apy values")}));case 17:t.sent,t.next=24;break;case 20:throw t.prev=20,t.t2=t["catch"](10),console.log("apy error"),t.t2;case 24:case"end":return t.stop()}}),t,null,[[10,20]])})))()},getCRVAPY:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,c,o,i,l,d,p,f,b,v,h,w,g,_,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("GET SWRV APY"),n={compound:{swap:"0xA2B47E3D5c44877cca798226B7B8118F9BFb7A56",swap_token:"0x845838DF265Dcd2c412A1Dc9e959c7d08537f8a2",name:"compound",gauge:"0x7ca5b0a2910B33e9759DC7dDB0413949071D7575"},usdt:{swap:"0x52EA46506B9CC5Ef470C5bf89f17Dc28bB35D85C",swap_token:"0x9fC689CCaDa600B6DF723D9E47D84d76664a1F23",name:"usdt",gauge:"0xBC89cd85491d81C6AD2954E6d0362Ee29fCa8F53"},y:{swap:"0x329239599afB305DA0A2eC69c58F8a6697F9F88d",swap_token:"0xdF5e0e81Dff6FAF3A7e52BA697820c5e32D806A8",name:"y",gauge:"0xFA712EE4788C042e2B7BB55E6cb8ec569C4530c1"},busd:{swap:"0x79a8C46DeA5aDa233ABaFFD40F3A0A2B1e5A4F27",swap_token:"0x3B3Ac5386837Dc563660FB6a0937DFAa5924333B",name:"busd",gauge:"0x69Fb7c45726cfE2baDeE8317005d3F94bE838840"},susdv2:{swap:"0x329239599afB305DA0A2eC69c58F8a6697F9F88d",swap_token:"0x77C6E4a580c0dCE4E5c7a17d0bc077188a83A059",name:"susdv2",gauge:"0xA90996896660DEcC6E997655E065b23788857849"},pax:{swap:"0x06364f10B501e868329afBc005b3492902d6C763",swap_token:"0xD905e2eaeBe188fc92179b6350807D8bd91Db0D8",name:"pax",gauge:"0x64E3C23bfc40722d3B649844055F1D51c1ac041d"},ren:{swap:"0x93054188d876f558f4a66B2EF1d97d16eDf0895B",swap_token:"0x49849C98ae39Fff122806C06791Fa73784FB3675",name:"ren",gauge:"0xB1F2cdeC61db658F091671F5f199635aEF202CAC"},sbtc:{swap:"0x7fC77b5c7614E1533320Ea6DDc2Eb61fa00A9714",swap_token:"0x075b1bb99792c9E1041bA13afEf80C91a1e70fB3",name:"sbtc",gauge:"0x705350c4BcD35c9441419DdD5d2f097d7a55410F"}},a=["0x7ca5b0a2910B33e9759DC7dDB0413949071D7575","0xBC89cd85491d81C6AD2954E6d0362Ee29fCa8F53","0xFA712EE4788C042e2B7BB55E6cb8ec569C4530c1","0x69Fb7c45726cfE2baDeE8317005d3F94bE838840","0x64E3C23bfc40722d3B649844055F1D51c1ac041d","0xB1F2cdeC61db658F091671F5f199635aEF202CAC","0xA90996896660DEcC6E997655E065b23788857849","0x705350c4BcD35c9441419DdD5d2f097d7a55410F"],r="0x2F50D538606Fa9EDD2B11E2446BEb18C9D5846bB",s="0x6207d866000000000000000000000000",["compound","usdt","swusd","busd","susdv2","pax","ren","sbtc"],t.next=8,fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,curve-dao-token&vs_currencies=usd");case 8:return c=t.sent,t.next=11,c.json();case 11:return c=t.sent,o=c.bitcoin.usd,i=c["curve-dao-token"].usd,l=a.map((function(e){return[r,s+e.slice(2)]})),t.next=17,Object(m["clean_and_multi_call"])(l);case 17:return d=t.sent,p=d[1].map((function(e,t){return[l[t][0],web3.eth.abi.decodeParameter("uint256",e)/1e18]})),f=a.map((function(e){return[[e,"0x180692d0"],[e,"0x17e28089"]]})),t.next=22,Object(m["clean_and_multi_call"])(f.flat());case 22:return b=t.sent,v=b[1].map((function(e){return web3.eth.abi.decodeParameter("uint256",e)})),h=v.filter((function(e,t){return t%2==0})).map((function(e){return e/1e18})),w=v.filter((function(e,t){return t%2==1})).map((function(e){return e/1e18})),g=Object.values(n).map((function(e){return[e.swap,"0xbb7b8b80"]})),t.next=29,Object(m["clean_and_multi_call"])(g);case 29:_=t.sent,x=_[1].map((function(e,t){return[g[t][0],web3.eth.abi.decodeParameter("uint256",e)/1e18]})),p.map((function(t,a){var r=Object.values(n).find((function(e){return e.gauge.toLowerCase()=="0x"+l[a][1].slice(34).toLowerCase()})).name,s=n[r].swap,c=x.find((function(e){return e[0].toLowerCase()==s.toLowerCase()}))[1],d=w[a];["ren","sbtc"].includes(r)&&(d*=o);var p=h[a]*t[1]*31536e3/d*.4/c,f=p*i*100;isNaN(f)&&(f=0),Object.values(n).find((function(e){return e.name==r})).gauge_relative_weight=t[1],console.log(r,f,"POOL SWRV APY"),u["a"].set(e.CRVAPYs,r,f)}));case 32:case"end":return t.stop()}}),t)})))()}}},h=v,w=(n("e48a"),n("2877")),g=Object(w["a"])(h,a,r,!1,null,"59ec4ccc",null);t["default"]=g.exports},efb8:function(e,t,n){}}]);
//# sourceMappingURL=chunk-5fc73f96.0859f49c.js.map
{"version":3,"sources":["webpack:///./src/components/graphs/BasicTrade.vue?4302","webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./src/components/ren/shiftState.js","webpack:///./node_modules/core-js/modules/es.string.starts-with.js","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./node_modules/core-js/modules/es.array.flat-map.js","webpack:///./src/components/common/priceStore.js","webpack:///./src/components/root/TotalBalances.vue?b3d4","webpack:///src/components/root/TotalBalances.vue","webpack:///./src/components/root/TotalBalances.vue?930d","webpack:///./src/components/root/TotalBalances.vue","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack:///./node_modules/core-js/modules/es.promise.all-settled.js","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./src/components/graphs/BasicTrade.vue?e003","webpack:///src/components/graphs/BasicTrade.vue","webpack:///./src/components/graphs/BasicTrade.vue?3b2a","webpack:///./src/components/graphs/BasicTrade.vue","webpack:///./src/components/common/volumeStore.js","webpack:///./src/components/root/TotalBalances.vue?eabb","webpack:///./src/components/root/Root.vue?028d","webpack:///./src/components/root/Root.vue?2849","webpack:///src/components/root/Root.vue","webpack:///./src/components/root/Root.vue?ba78","webpack:///./src/components/root/Root.vue"],"names":["$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","state","Vue","observable","address","sdk","transactions","hasIncomplete","len","Object","entries","localStorage","key","value","startsWith","JSON","parse","removed","includes","type","getOwnPropertyDescriptor","f","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","nativeStartsWith","min","Math","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","forced","searchString","that","index","search","call","slice","addToUnscopables","aFunction","flatMap","callbackfn","btcPrice","getBTCPrice","helpers","fetch","req","json","res","bitcoin","usd","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","_v","class","yPoolTvlUsd","attrs","directives","name","rawName","expression","_s","formatNumber","volume","_f","staticRenderFns","component","newPromiseCapabilityModule","perform","iterate","stat","allSettled","iterable","C","capability","resolve","reject","result","promiseResolve","values","counter","remaining","promise","alreadyCalled","push","then","status","e","reason","error","isArray","bind","original","source","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","TypeError","module","exports","initState","compound","usdt","y","busd","susd","pax","tbtc","ren","sbtc","volumes","fromEntries","map","volumeData","5","30","1440","allVolume","findClosestPrice","timestamp","data","find","d","Date","price","fetchVolumeData","pools","refresh","period","Array","p","filter","pool","requests","window","domain","now","Promise","all","r","jsons","btcPrices","i","k","v","vol","prices","getVolumes","web3","eth","getBlockNumber","currentBlock","blockOneDayAgo","method","headers","body","stringify","query","variables","pastTotalVolumeRequest","oneDayAgoResponse","volumeOneDayAgo","currentTotalVolumeRequest","totalCurrentVolume","lastDaysVolume","console","log","set","getDailyVolume","interval","precisions","abis","coin_precisions","split","reduce","a","b","getLendingAPY","lendingrates","j","prevdata","balances","bi","apdrate","rates","rate","balancesp","sump","sumbalances","apd","daylen","apdy","totalVolume","sumBalances","toFixed","selected","activePoolLink","daily_apy","swerveApy","realBoostRate","isNaN"],"mappings":"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","file":"js/chunk-5fc73f96.0859f49c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicTrade.vue?vue&type=style&index=0&id=b84d1122&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicTrade.vue?vue&type=style&index=0&id=b84d1122&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","import Vue from 'vue'\n\nexport const state = Vue.observable({\n\n\taddress: null,\n\tsdk: null,\n\n\ttransactions: [],\n\n\taddress: null,\n\tdefault_account: null,\n\n\tminersFee: 17000,\n\tminersLockFee: 0,\n\tminersReleaseFee: 0,\n\tmintFee: 0,\n\tburnFee: 0,\n\n\tconfirmations: 6,\n\n\tspace: null,\n\tbox: null,\n\n\tshowModal: false,\n\tshowModal1: false,\n\tshowModalRecover: false,\n\n\tmsg_signature: null,\n\tpassword: null,\n\taes_key: null,\n\tfireUser: null,\n\n\tloaded: false,\n\tadapterContract: null,\n\n\trecover: false,\n})\n\nexport function hasIncomplete() {\n\tlet len = 0\n\tfor(let [key, value] of Object.entries(localStorage)) {\n\t\tif(!key.startsWith('swervebtc_')) continue;\n\t\tvalue = JSON.parse(value)\n\t\tif(value.removed) continue;\n\t\tif([0,3].includes(value.type) && ![14,15,17].includes(value.state)) len++\n\t\tif(value.type == 1 && value.state != 65) len++\n\t}\n\treturn len\n}","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeStartsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","import * as helpers from '../../utils/helpers'\n\nexport let state = {\n\tbtcPrice: null,\n}\n\nexport async function getBTCPrice() {\n\tlet req = await helpers.retry(fetch(`https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd`), 300);\n    let res = await req.json();\n    state.btcPrice = res.bitcoin.usd;\n    return res.bitcoin.usd\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"window white\"},[_c('fieldset',[_c('legend',{staticStyle:{\"color\":\"#86fce7\",\"font-weight\":\"600\",\"margin-bottom\":\"1rem\",\"padding-top\":\".5rem\",\"text-align\":\"center\"}},[_vm._v(\"Pool deposits & daily volume\")]),_c('div',{class:{'loading line': !_vm.yPoolTvlUsd, 'text-center-stats': true},attrs:{\"id\":\"total-balances\"}},[_vm._v(\" TVL: \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.yPoolTvlUsd),expression:\"yPoolTvlUsd\"}]},[_vm._v(\"$\"+_vm._s(_vm.formatNumber(_vm.yPoolTvlUsd)))])]),_c('div',{class:{'loading line': _vm.volume < 0, 'text-center-stats': true}},[_vm._v(\" Daily volume: \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.volume >= 0),expression:\"volume >= 0\"}]},[_vm._v(\"$\"+_vm._s(_vm._f(\"formatNumber\")((_vm.volume | 0),0)))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"window white\">\n        <fieldset>\n\t\t\t<legend style=\"color: #86fce7;font-weight:600;margin-bottom: 1rem; padding-top: .5rem;text-align:center;\">Pool deposits & daily volume</legend>\n\t\t\t\t<div :class=\"{'loading line': !yPoolTvlUsd, 'text-center-stats': true}\" id='total-balances'>\n\t\t\t\t\tTVL: <span v-show='yPoolTvlUsd'>${{formatNumber(yPoolTvlUsd)}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"{'loading line': volume < 0, 'text-center-stats': true}\" >\n\t\t\t\t\tDaily volume: <span v-show='volume >= 0'>${{(volume | 0) | formatNumber(0)}}</span>\n\t\t\t\t</div>\n        </fieldset>\n    </div>\n</template>\n\n<script>\n\timport Web3 from 'web3'\n\timport allabis, { infura_url, multicall_address, multicall_abi, ERC20_abi, yERC20_abi } from '../../allabis'\n\timport { chunkArr } from '../../utils/helpers'\n\timport BN from 'bignumber.js'\n\timport * as volumeStore from '@/components/common/volumeStore'\n    import { contract } from '../../contract'\n    import * as priceStore from '../common/priceStore'\n\timport { getYPoolTVL, getUserBoostValue } from '../../utils/common'\n\timport * as helpers from '../../utils/helpers'\n\t  \n\texport default {\n\t\tprops: {\n\t\t\ttotalVolume: {\n\t\t\t\tdefault: undefined,\n\t\t\t}\n\t\t},\n\t\tdata: () => ({\n\t\t\ttotal: '',\n\t\t\tyPoolTvl: null,\n\t\t\tboost: null,\n\t\t}),\n\t\tcomputed: {\n\t\t\tvolume() {\n\t\t\t\treturn this.totalVolume !== undefined ? this.totalVolume : volumeStore.totalVolume() \n\t\t\t},\n\t\t\tyPoolTvlUsd() {\n\t\t\t\treturn this.yPoolTvl;\n\t\t\t}\n\t\t},\n\t\tasync created() {\n\t\t\tawait volumeStore.getVolumes();\n\t\t\t// TOOD: issue with getting balances, need to make a different call\n\t\t\t// this.totalBalances()\n\t\t\tif(this.totalVolume === undefined || this.totalVolume < 0)\n\t\t\t\tthis.dailyVolume();\n\t\t\tif(this.yPoolTvl === null)\n\t\t\t\tthis.getYPoolNumbers();\n\n\t\t},\n\t\tmethods: {\n\t\t\tformatNumber(number, dec = 2) {\n        \t\treturn helpers.formatNumber(number, dec)\n      \t\t},\n\t\t\tasync getYPoolNumbers() {\n\t\t\t\tthis.yPoolTvl = await getYPoolTVL(allabis.swusd);\n\t\t\t\tconsole.log('yPoolTvl', this.yPoolTvl);\n\t\t\t},\n\t\t\tasync totalBalances() {\n\t\t\t\ttry {\n\t\t\t\t\tthis.total = 0;\n\t\t\t\t\tif(!priceStore.state.btcPrice) await priceStore.getBTCPrice()\n\t\t\t\t\tlet total = BN(0);\n\t\t\t\t\tlet tokenContracts = {}\n\t\t\t\t\tlet swapContracts = {}\n\t\t\t\t\tlet promises = []\n\t\t\t\t\tlet web3 = contract.web3 || new Web3(infura_url)\n\t\t\t\t\tlet multicall = new web3.eth.Contract(multicall_abi, multicall_address)\n\t\t\t\t\tlet calls = []\n\t\t\t\t\tlet pools = Object.assign({},allabis)\n\t\t\t\t\tdelete pools.susd\n\t\t\t\t\tdelete pools.tbtc\n\t\t\t\t\tdelete pools.swusd\n\t\t\t\t\tfor(let [key, contract] of Object.entries(pools)) {\n\t\t\t\t\t\tconsole.log(key, \"THE KEY\")\n\t\t\t\t\t\ttokenContracts[key] = new web3.eth.Contract(ERC20_abi, contract.token_address);\n\t\t\t\t\t\tswapContracts[key] = new web3.eth.Contract(contract.swap_abi, contract.swap_address);\n\t\t\t\t\t\tcalls.push([tokenContracts[key]._address, tokenContracts[key].methods.totalSupply().encodeABI()])\n\t\t\t\t\t\tcalls.push([swapContracts[key]._address, swapContracts[key].methods.get_virtual_price().encodeABI()])\n\t\t\t\t\t}\n\t\t\t\t\tlet susd_swap_token = new web3.eth.Contract(ERC20_abi, allabis.susd.token_address)\n\t\t\t\t\tlet susd_swap = new web3.eth.Contract(allabis.susd.swap_abi, allabis.susd.swap_address)\n\t\t\t\t\tlet ySUSD = new web3.eth.Contract(yERC20_abi, allabis.susd.coins[0])\n\t\t\t\t\tcalls.push(\n\t\t\t\t\t\t[ySUSD._address, ySUSD.methods.getPricePerFullShare().encodeABI()],\n\t\t\t\t\t\t[susd_swap._address, susd_swap.methods.balances(0).encodeABI()]\n\t\t\t\t\t)\n\t\t\t\t\tlet aggcalls = await multicall.methods.aggregate(calls).call()\n\t\t\t\t\tlet decoded = aggcalls[1].map(hex => web3.eth.abi.decodeParameter('uint256', hex))\n\t\t\t\t\tchunkArr(decoded, 2).map((v, i, arr) => {\n\t\t\t\t\t\tlet balance = BN(v[0]).times(BN(v[1])).div(1e36)\n\n\t\t\t\t\t\t//renBTC\n\t\t\t\t\t\tif([6,7].includes(i)) balance = balance.times(BN(priceStore.state.btcPrice))\n\t\t\t\t\t\ttotal = total.plus(balance)\n\t\t\t\t\t})\n\t\t\t\t\tthis.total = total.toFixed(0);\n\t\t\t\t} catch(e) {\n\t\t\t\t\tconsole.log('total balances issue');\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync dailyVolume() {\n\t\t\t\tvar pools = ['compound', 'usdt', 'swusd', 'busd', 'susd', 'pax', 'tbtc', 'ren', 'sbtc']\n\t\t\t\tawait volumeStore.getVolumes(pools);\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped>\n\tfieldset div {\n\t\tdisplay: block;\n\t}\n\tfieldset div:nth-of-type(2) {\n\t\tmargin-top: 1em;\n\t}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TotalBalances.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TotalBalances.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TotalBalances.vue?vue&type=template&id=0a8cd102&scoped=true&\"\nimport script from \"./TotalBalances.vue?vue&type=script&lang=js&\"\nexport * from \"./TotalBalances.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TotalBalances.vue?vue&type=style&index=0&id=0a8cd102&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a8cd102\",\n  null\n  \n)\n\nexport default component.exports","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flatMap');\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\n// `Promise.allSettled` method\n// https://github.com/tc39/proposal-promise-allSettled\n$({ target: 'Promise', stat: true }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (e) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: e };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tradeview window white\"},[_c('fieldset',{attrs:{\"id\":\"onesplit\"}},[_c('legend',{staticClass:\"text-center\"},[_vm._v(\"SWAP USING ALL SWERVE POOLS\")]),_c('div',{staticClass:\"aligncontainer\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.contactUs),expression:\"contactUs\"}],staticClass:\"info-message gentle-message pulseinfo\"},[_vm._v(\" We believe there was an issue with your swap. \")])]),_c('swap',{attrs:{\"hide-wrapped-token\":true}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class = 'tradeview window white'>\n\t\t<fieldset id='onesplit'>\n\t\t\t<legend class='text-center'>SWAP USING ALL SWERVE POOLS</legend>\n\t\t\t<div class='aligncontainer'>\n\t\t\t\t<div class='info-message gentle-message pulseinfo' v-show='contactUs'>\n\t\t\t\t\tWe believe there was an issue with your swap. \n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<swap :hide-wrapped-token=\"true\" />\n\t\t</fieldset>\n\t</div>\n</template>\n\n<script>\nimport Swap from '../swap/Swap.vue'\n\timport { contract, init, getters } from '../../contract'\n    import * as shiftState from '../ren/shiftState'\n\nconst SwapNative = () => ({\n        component: import('../ren/Gateway.vue'),\n\n        loading: Swap,\n\n        delay: 0,\n    })\n\n\texport default {\n\t\tdata: () => ({\n\t\t\tunwatch: null,\n\t\t\tloading: false,\n\t\t}),\n\t\tcomputed: {\n\t\t\tcurrentPool() {\n\t\t\t\treturn getters.currentPool()\n\t\t\t},\n\t\t\thasIncomplete() {\n\t\t\t\treturn shiftState.hasIncomplete()\n\t\t\t},\n\t\t\tpublicPath() {\n                return process.env.BASE_URL\n            },\n            default_account() {\n            \treturn getters.default_account()\n            },\n            contactUs() {\n            \treturn ['0x0f87dd03a74e6a48d56661d96f44880c79b9d795'].map(a => a.toLowerCase())\n            \t\t.includes(this.default_account.toLowerCase())\n            },\n\t\t},\n\t\tasync created() {\n\t\t\tthis.unwatch = this.$watch(()=>contract.initializedContracts, async (val) => {\n\t\t\t\t/* only care about swusd at this point\n\t\t\t\tPromise.all(['compound','usdt','swusd','busd','susdv2','pax','ren','sbtc'].map(p=>{\n\t\t\t\t\treturn init(contract.contracts[p])\n\t\t\t\t}))\n\t\t\t\t*/\n\t\t\t\tPromise.all(['swusd'].map(p=>{\n\t\t\t\t\treturn init(contract.contracts[p])\n\t\t\t\t}))\n\t\t\t\tthis.unwatch()\n\t\t\t})\n\t\t},\n\t\tmethods: {\n\t\t\tloaded() {\n\t\t\t\tif(this.swapComponent == 'SwapNative') this.loading = false;\n\t\t\t},\n\t\t},\n\t\tcomponents: {\n\t\t\tSwap,\n\t\t\tSwapNative,\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t#select_pool {\n\t\tmargin-bottom: 10px;\n\t}\n\t>>>.exchange {\n\t\twidth: 80%;\n\t}\n\t>>>.trade-buttons {\n\t\tmargin: 0;\n\t}\n\t.swapBTC-container {\n\t\tmargin-top: 1em;\n\t\tmargin-bottom: 1em;\n\t}\n\t.loading.line {\n\t\tmargin-left: 1em;\n\t}\n\t.aligncontainer {\n\t\tmargin: 0 auto;\n\t\twidth: 80%;\n\t}\n\t.swapBTC-container.info-message {\n\t\tmargin: 0;\n\t\tmargin-top: 1em;\n\t\tmargin-bottom: 1em;\n\t}\n\t.swapBTC-container a {\n\t\tcolor: white;\n\t}\n\t.swapBTC-wrapper {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: minmax(30px, 210px) minmax(30px, 210px);\n\t\tgrid-gap: 1em;\n\t}\n\t.swapBTC-container.info-message {\n\t\tpadding-top: 0.4em;\n\t\tpadding-bottom: 0.4em;\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicTrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasicTrade.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BasicTrade.vue?vue&type=template&id=b84d1122&scoped=true&\"\nimport script from \"./BasicTrade.vue?vue&type=script&lang=js&\"\nexport * from \"./BasicTrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BasicTrade.vue?vue&type=style&index=0&id=b84d1122&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b84d1122\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport abis from '../../allabis'\n\n\tlet initState = () => ({\n\t\tcompound: [],\n\t\tusdt: [],\n\t\ty: [],\n\t\tbusd: [],\n\t\tsusd: [],\n\t\tpax: [],\n\t\ttbtc: [],\n\t\tren: [],\n\t\tsbtc: [],\n\t})\n\nexport const state = Vue.observable({\n\tvolumes: {\n\t\t...Object.fromEntries(Object.entries(initState()).map(([key, el])=>[key, [-1, -1]]))\n\t},\n\tvolumeData: {\n\t\t5: {\n\t\t\t...initState()\n\t\t},\n\t\t30: {\n\t\t\t...initState()\n\t\t},\n\t\t1440: {\n\t\t\t...initState()\n\t\t}\n\t},\n\tallVolume: {\n\t\t...initState()\n\t}\n})\n\nexport function findClosestPrice(timestamp, data) {\n\tlet result = data.find(d=>Date.parse(d[0])/1000 - timestamp > 0);\n\tif(result === undefined) return data[data.length - 1][1]\n\treturn result.price\n}\n\n\nexport async function fetchVolumeData(pools, refresh = false, period = 5) {\n\tif(!Array.isArray(pools)) pools = [pools]\n\tpools = pools.map(p => p == 'swusd' ? 'y' : p == 'susdv2' ? 'susd' : p == 'ren2' ? 'ren' : p == 'rens' ? 'sbtc' : p)\n\tif(!refresh) pools = pools.filter(pool => !state.volumeData[period][pool].length)\n\t//pools = pools.filter(pool => !['tbtc'].includes(pool))\n\tlet requests = pools.map(p => {\n\t\tif(p == 'ren') p = 'ren2'\n\t\tif(p == 'sbtc') p = 'rens'\n\t\treturn fetch(`${window.domain}/raw-stats/${p}-${period}m.json`)\n\t})\n\t//will work for 17 days on 5 minutes chart\n\tif(pools.includes('tbtc') || pools.includes('ren') || pools.includes('sbtc'))\n\t\trequests.push(fetch(`\n\t\t\thttps://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&from=1589587198&to=${(Date.now() / 1000) | 0}`\n\t\t\t))\n\trequests = await Promise.all(requests)\n\tlet jsons = await Promise.all(requests.map(r => r.json()))\n\tlet btcPrices = jsons[jsons.length-1]\n\tif(pools.includes('tbtc') || pools.includes('ren')) jsons = jsons.slice(0, -1)\n\tfor(let [i, data] of jsons.entries()) {\n\t\tlet pool = pools[i]\n\t\tif(['tbtc', 'ren', 'sbtc'].includes(pool)) {\n\t\t\tdata = data.map(d => {\n\t\t\t\td.volume = Object.fromEntries(Object.entries(d.volume).map(([k, v]) => [k, v.map(vol => vol * findClosestPrice(d.timestamp, btcPrices.prices))]))\n\t\t\t\treturn d;\n\t\t\t})\n\t\t}\n\t\tstate.volumeData[period][pool] = data\n\t}\n}\n\nexport async function getVolumes(pools, refresh = false) {\n\tconst currentBlock = await web3.eth.getBlockNumber();\n\tconst blockOneDayAgo = currentBlock - (4 * 60 * 24);\n\n\tconst pastTotalVolumeRequest = await fetch(`https://api.thegraph.com/subgraphs/name/chaddeere/ypool24hvolume`, {\n\t\tmethod: 'POST',\n\t\theaders: {'Content-Type': 'application/json'},\n\t\tbody: JSON.stringify({\n\t\t\tquery:`{totalVolumes(block: { number: ${blockOneDayAgo} }) { volume }}`,\n\t\t\tvariables: null\n\t\t})\n\t});\n\tconst oneDayAgoResponse = await pastTotalVolumeRequest.json();\n\tlet volumeOneDayAgo = 0;\n\tif (oneDayAgoResponse[\"data\"][\"totalVolumes\"].length > 0) {\n\t\tvolumeOneDayAgo = oneDayAgoResponse[\"data\"][\"totalVolumes\"][0][\"volume\"];\n\t}\n\n\tconst currentTotalVolumeRequest = await fetch(`https://api.thegraph.com/subgraphs/name/chaddeere/ypool24hvolume`, {\n\t\tmethod: 'POST',\n\t\theaders: {'Content-Type': 'application/json'},\n\t\tbody: JSON.stringify({\n\t\t\tquery:`{totalVolumes { volume }}`,\n\t\t\tvariables: null\n\t\t})\n\t});\n\tconst totalCurrentVolume = (await currentTotalVolumeRequest.json())[\"data\"][\"totalVolumes\"][0][\"volume\"];\n\n\tconst lastDaysVolume = totalCurrentVolume - volumeOneDayAgo;\n\tconsole.log('fetching volume', lastDaysVolume);\n\tVue.set(state.volumes['y'], 0, lastDaysVolume)\n\t/*\n\tif(!Array.isArray(pools)) pools = [pools]\n\tpools = pools.map(p => p == 'swusd' ? 'y' : p == 'susdv2' ? 'susd' : p == 'ren' ? 'ren2' : p == 'sbtc' ? 'rens' : p)\n\tif(Object.values(state.volumes).filter(v=>v[0]!=-1).length == pools.length && !refresh) return;\n\tlet req = await Promise.all([fetch(`${window.domain}/raw-stats/apys.json`), fetch(`https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd`)])\n\tlet [stats, btcPrice] = await Promise.all(req.map(r => r.json()))\n    btcPrice = btcPrice.bitcoin.usd\n    for(let [pool, volume] of Object.entries(state.volumes)) {\n    \tif(volume[0] == -1) {\n    \t\tlet volume = pool == 'ren' ? stats.volume.ren2 : pool == 'sbtc' ? stats.volume.rens : stats.volume[pool]\n    \t\tif(['tbtc', 'ren', 'sbtc'].includes(pool)) volume *= btcPrice\n    \t\tVue.set(state.volumes[pool], 0, volume || 0)\n    \t\tVue.set(state.volumes[pool], 1, pool == 'ren' ? stats.volume.ren2 : pool == 'sbtc' ? stats.volume.rens : stats.volume[pool])\n    \t}\n\t}\n\t*/\n}\n\nexport async function getDailyVolume(pool, refresh = false, interval = 30) {\n\tpool = pool == 'swusd' ? 'y' : pool == 'susdv2' ? 'susd' : pool\n\n\tif(state.allVolume[pool].length && !refresh) return;\n\tawait fetchVolumeData(pool, refresh, interval)\n\tlet json = state.volumeData[interval][pool];\n\tstate.volumeData[pool] = json\n\tfor(let data of json) {\n\t\tstate.allVolume[pool].push([\n\t\t\tdata.timestamp * 1000,\n\t\t\tObject.entries(data.volume).map(([k, v]) => {\n    \t\t\tlet precisions = abis[pool == 'susd' ? 'susdv2' : pool].coin_precisions[k.split('-')[0]]\n    \t\t\treturn v[0] / precisions\n    \t\t}).reduce((a, b) => a + b, 0)\n\t\t])\n\t}\n}\n\n\nexport async function getLendingAPY(pool, refresh = false, interval = 30) {\n\tpool = pool == 'swusd' ? 'y' : pool == 'susdv2' ? 'susd' : pool\n\tif(!state.volumeData[interval][pool].length)\n\t\tawait fetchVolumeData(pool, refresh, interval)\n\n\tlet lendingrates = []\n\n\tfor(let j = 1; j < state.volumeData[interval][pool].length; j++) {\n\t\tlet json = state.volumeData[interval][pool]\n\t\tlet data = json[j]\n\t\tlet prevdata = json[j-1]\n\t\tlet balances = data.balances.map((b,bi)=>b /= abis[pool == 'susd' ? 'susdv2' : pool].coin_precisions[bi])\n\t\tlet apdrate = data.rates.map((rate, k) => {\n\t\t\treturn (rate / prevdata.rates[k]) - 1\n\t\t})\n\t\tlet balancesp = balances.map((b, bi) => b *= apdrate[bi])\n\t\tlet sump = balancesp.reduce((a,b) => a + b, 0)\n\t\tlet sumbalances = balances.reduce((a, b) => a + b, 0)\n\t\tlet apd = sump / sumbalances\n\t\tlet daylen = data.timestamp - prevdata.timestamp\n\t\tlet apdy = (1 + apd) ** (365 * 86400 / daylen)\n\t\tlendingrates.push([\n\t\t\tdata.timestamp * 1000,\n\t\t\t(apdy - 1) * 100\n\t\t])\n\t}\n\n\treturn lendingrates;\n\n}\n\nexport function totalVolume() {\n\treturn Object.values(state.volumes).reduce((a, b) => {\n\t\treturn b[0] > 0 ? a + b[0] : a;\n\t}, 0)\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TotalBalances.vue?vue&type=style&index=0&id=0a8cd102&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TotalBalances.vue?vue&type=style&index=0&id=0a8cd102&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=style&index=0&id=59ec4ccc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=style&index=0&id=59ec4ccc&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('basic-trade'),_c('div',{staticClass:\"window white\"},[_c('fieldset',{staticClass:\"poolsdialog\"},[_c('legend',{attrs:{\"STYLE\":\"color: #86fce7;font-weight:600;margin-bottom: .5rem; padding-top: .5rem;\"}},[_c('span',{staticClass:\"tooltip\"},[_vm._v(\" $ \"),_c('span',{staticClass:\"tooltiptext\"},[_vm._v(\" Your total balances: $\"+_vm._s(+_vm.sumBalances.toFixed(2))+\" \")])]),_vm._v(\" SWERVE POOLS \"),_c('span',{staticClass:\"tooltip\"},[_vm._v(\" $ \"),_c('span',{staticClass:\"tooltiptext\"},[_vm._v(\" Your total balances: $\"+_vm._s(+_vm.sumBalances.toFixed(2))+\" \")])])]),_c('div',{class:{selected: _vm.activePoolLink == 2}},[_c('router-link',{attrs:{\"to\":\"/swusd\"}},[_c('span',{staticClass:\"pools\",staticStyle:{\"font-size\":\"1rem\"}},[_vm._v(\" [DAI, USDC, USDT, TUSD]\")]),_c('span',{staticClass:\"apr\"},[_c('span',[_vm._v(\"Pool APY: +\")]),_c('span',{class:{'loading line': !_vm.daily_apy[0]}},[_vm._v(_vm._s(_vm.daily_apy[0]))]),_vm._v(\"% \")]),_c('span',[_vm._v(\"SWRV APY: \"+_vm._s(_vm._f(\"formatNumber\")(_vm.swerveApy * 0.4))+\"% to \"+_vm._s(_vm._f(\"formatNumber\")(_vm.swerveApy * 2.5))+\"%\")]),_c('span',[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.balances.y > 2),expression:\"balances.y > 2\"}]},[_vm._v(\"My Balance: $\"+_vm._s(_vm.balances.y && _vm.formatNumber(_vm.balances.y))+\" \")])]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.realBoostRate !== null && !isNaN(_vm.realBoostRate)),expression:\"realBoostRate !== null && !isNaN(realBoostRate)\"}],staticClass:\"apr\"},[_vm._v(\" My APY: \"+_vm._s(_vm._f(\"formatNumber\")(_vm.realBoostRate * _vm.swerveApy,2))+\"% \")])])],1)])]),_c('total-balances',{attrs:{\"total-volume\":_vm.totalVolume}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\n\t    <basic-trade />\n\n\t\t<div class=\"window white\">\n\t        <fieldset class='poolsdialog'>\n\t            <legend STYLE=\"color: #86fce7;font-weight:600;margin-bottom: .5rem; padding-top: .5rem;\">\n\t            \t <span class='tooltip'>\n\t            \t\t$\n\t            \t\t<span class='tooltiptext'>\n\t            \t\t\tYour total balances: ${{ +sumBalances.toFixed(2) }}\n\t            \t\t</span>\n\t            \t\t</span>\n\t            \tSWERVE POOLS\n\t            \t<span class='tooltip'>\n\t            \t\t$\n\t            \t\t<span class='tooltiptext'>\n\t            \t\t\tYour total balances: ${{ +sumBalances.toFixed(2) }}\n\t            \t\t</span>\n\t            \t</span>\n\t            </legend>\n\n\t            <div :class=\"{selected: activePoolLink == 2}\">\n\t                <router-link to = '/swusd'>\n\t                    <span class='pools' style=\"font-size:1rem;\"> [DAI, USDC, USDT, TUSD]</span>\n\t                    <span class='apr'>\n\t                    \t<span>Pool APY: +</span>\n\t                    \t<span :class=\"{'loading line': !daily_apy[0]}\">{{daily_apy[0]}}</span>%\n\t                    </span>\n\t\t\t\t\t\t<span>SWRV APY: {{swerveApy * 0.4 | formatNumber}}% to {{swerveApy * 2.5 | formatNumber}}%</span>\n\t\t\t\t\t\t<span>\n           \t \t\t\t\t<span v-show='balances.y > 2'>My Balance: ${{balances.y && formatNumber(balances.y)}} </span>\n               \t \t\t</span>\n\t\t\t\t\t\t<span class='apr' v-show='realBoostRate !== null && !isNaN(realBoostRate)'>\n\t\t\t\t\t\t\tMy APY: {{ realBoostRate * swerveApy | formatNumber(2) }}%\n\t\t\t\t\t\t</span>\n\t                </router-link>\n\t            </div>\n\t        </fieldset>\n\t    </div>\n\n\t    <total-balances :total-volume='totalVolume'/>\n\n\t</div>\n</template>\n\n<script>\n\timport Vue from 'vue'\n\timport TotalBalances from './TotalBalances.vue'\n\timport BasicTrade from '../graphs/BasicTrade.vue'\n\timport allabis, { balancer_ABI, balancer_address, APYOracle_abi, iearnAPYOracle_address } from '../../allabis'\n\timport * as volumeStore from '@/components/common/volumeStore'\n\n  import * as helpers from '../../utils/helpers'\n\n\timport { contract } from '../../contract'\n\timport { clean_and_multi_call, calculateSwrvApy, getUserBoostValue } from '../../utils/common'\n\n\texport default {\n\t\tcomponents: {\n\t\t\tTotalBalances,\n\t\t\tBasicTrade,\n\t\t},\n\t\tdata: () => ({\n\t\t\tactivePoolLink: -1,\n\t\t\tpools: ['compound','usdt','y','busd','susdv2','pax','ren', 'sbtc'],\n\t\t\tdaily_apy: [],\n\t\t\tweekly_apy: [],\n\t\t\tmonthly_apy: [],\n\t\t\tapy: [],\n\t\t\tstart: 0,\n\t\t\tend: 0,\n\t\t\tvolumes: {\n\t\t\t\tcompound: [-1, -1],\n\t\t\t\tusdt: [-1, -1],\n\t\t\t\ty: [-1, -1],\n\t\t\t\tbusd: [-1, -1],\n\t\t\t\tsusd: [-1, -1],\n\t\t\t\tpax: [-1, -1],\n\t\t\t\ttbtc: [-1, -1],\n\t\t\t\tren: [-1, -1],\n\t\t\t\tsbtc: [-1, -1],\n\t\t\t},\n\t\t\tbalances: {\n\t\t\t\tcompound: -1,\n\t\t\t\tusdt: -1,\n\t\t\t\ty: -1,\n\t\t\t\tbusd: -1,\n\t\t\t\tsusdv2: -1,\n\t\t\t\tpax: -1,\n\t\t\t\ttbtc: -1,\n\t\t\t\tren: -1,\n\t\t\t\tsbtc: -1,\n\t\t\t},\n\t\t\tsnxRewards: null,\n\t\t\tsbtcRewards: null,\n\t\t\tyfiRewards: null,\n\t\t\tbalRewards: null,\n\t\t\tbtcPrice: null,\n\t\t\tswrvApy: \"\",\n\t\t\tmyYbalance: null,\n\t\t\tCRVAPYs: {},\n\t\t\tswerveApyTopRange: null,\n\t\t\tswrvRealBoostRate: null,\n\n\t\t}),\n\t\tasync created() {\n\t\t\tvar start = new Date();\n\t\t\tstart.setHours(0,0,0,0);\n\t\t\tthis.start = start.getTime() / 1000\n\n\t\t\tvar end = new Date();\n\t\t\tend.setHours(23,59,59,999);\n\t\t\tthis.end = end.getTime() / 1000\n\n\t\t\tthis.$watch(() => contract.web3 && contract.multicall, val => {\n\t\t\t\tif(!val) return;\n\t\t\t\t//this.getCurveRewards()\n\t\t\t\tthis.getBalances()\n\t\t\t})\n\t\t},\n\t\tasync mounted() {\n\t\t\tthis.keydownListener = document.addEventListener('keydown', this.handle_pool_change)\n\t\t\t//contract.web3 && contract.multicall && this.getCurveRewards() && this.getBalances();\n\t\t\tthis.getAPY();\n\t\t\tif (contract.web3 && contract.multicall) {\n\t\t\t\tthis.getBalances();\n\t\t\t}\n\t\t\tthis.swrvApy = await calculateSwrvApy();\n\t\t\tconst boostRates = await getUserBoostValue();\n\t\t\tthis.swrvDisplayBoostRate = boostRates[0];\n\t\t\tthis.swrvRealBoostRate = boostRates[1];\n\t\t\tconsole.log(\"this.boost\", this.swrvRealBoostRate);\n\t\t\tconsole.log(\"this.displayBoostRate\", this.swrvDisplayBoostRate);\n\t\t\tconsole.log(\"this.realBoostRate\", this.swrvRealBoostRate);\n\t\t\tconsole.log('this.swrvApy', this.swrvApy);\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\tdocument.removeEventListener('keydown', this.handle_pool_change);\n\t\t},\n\t\tcomputed: {\n\t\t\ttotalVolume() {\n\t\t\t\treturn volumeStore.totalVolume()\n\t\t\t},\n\t\t\tpublicPath() {\n                return process.env.BASE_URL\n            },\n\t\t\tsumBalances() {\n\t\t\t\treturn Object.values(this.balances).filter(balance => balance > 0).reduce((a, b) => a + b, 0);\n\t\t\t},\n\t\t\tswerveApy() {\n\t\t\t\treturn this.swrvApy;\n\t\t\t},\n\t\t\trealBoostRate() {\n\t\t\t\treturn this.swrvRealBoostRate;\n\t\t\t},\n\t\t\tmyYBalanceValue() {\n\t\t\t\treturn this.myYbalance;\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t      formatNumber(number, dec = 2) {\n\t\t\t\treturn helpers.formatNumber(number, dec)\n\t\t\t},\n\t\t\tasync getCurveRewards() {\n\t\t\t\tthis.getCRVAPY()\n\t\t\t\tlet curveRewards = new contract.web3.eth.Contract(allabis.susdv2.sCurveRewards_abi, allabis.susdv2.sCurveRewards_address)\n\t\t\t\tlet sbtcRewards = new contract.web3.eth.Contract(allabis.sbtc.sCurveRewards_abi, allabis.sbtc.sCurveRewards_address)\n\t\t\t\tlet yfiRewards = new contract.web3.eth.Contract(allabis.swusd.sCurveRewards_abi, allabis.swusd.sCurveRewards_address)\n\n\t\t\t\tlet sCurve = new contract.web3.eth.Contract(allabis.susdv2.swap_abi, allabis.susdv2.swap_address)\n\t\t\t\tlet sbtcCurve = new contract.web3.eth.Contract(allabis.sbtc.swap_abi, allabis.sbtc.swap_address)\n\t\t\t\tlet yCurve = new contract.web3.eth.Contract(allabis.swusd.swap_abi, allabis.swusd.swap_address)\n\n\t\t\t\tlet balancerPool = new contract.web3.eth.Contract(balancer_ABI, balancer_address)\n\n\t\t\t\tlet calls = [\n\t\t\t\t\t[curveRewards._address, curveRewards.methods.totalSupply().encodeABI()],\n\t\t\t\t\t[sCurve._address, sCurve.methods.get_virtual_price().encodeABI()],\n\t\t\t\t\t[curveRewards._address, curveRewards.methods.DURATION().encodeABI()],\n\t\t\t\t\t[curveRewards._address, curveRewards.methods.rewardRate().encodeABI()],\n\n\t\t\t\t\t[sbtcRewards._address, sbtcRewards.methods.totalSupply().encodeABI()],\n\t\t\t\t\t[sbtcCurve._address, sbtcCurve.methods.get_virtual_price().encodeABI()],\n\n\t\t\t\t\t[\n\t\t\t\t\t\tbalancerPool._address,\n\t\t\t\t\t\tbalancerPool.methods.getBalance('0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f').encodeABI()\n\t\t\t\t\t],\n                    [\n                    \tbalancerPool._address,\n                    \tbalancerPool.methods.getBalance('0x408e41876cccdc0f92210600ef50372656052a38').encodeABI()\n                \t],\n\n\t\t\t\t\t[yfiRewards._address, yfiRewards.methods.totalSupply().encodeABI()],\n\t\t\t\t\t[yCurve._address, yCurve.methods.get_virtual_price().encodeABI()],\n                \t[yfiRewards._address, yfiRewards.methods.DURATION().encodeABI()],\n\t\t\t\t\t[yfiRewards._address, yfiRewards.methods.rewardRate().encodeABI()],\n\n\t\t\t\t\t[curveRewards._address, curveRewards.methods.periodFinish().encodeABI()],\n\t\t\t\t\t[sbtcRewards._address, sbtcRewards.methods.periodFinish().encodeABI()],\n\t\t\t\t\t[yfiRewards._address, yfiRewards.methods.periodFinish().encodeABI()],\n\t\t\t\t\t[sbtcCurve._address, sbtcCurve.methods.balances(0).encodeABI()], // renBtc\n\t\t\t\t\t[sbtcCurve._address, sbtcCurve.methods.balances(1).encodeABI()], // wBtc\n\t\t\t\t]\n\n\t\t\t\tlet aggcalls = await clean_and_multi_call(calls);\n\t\t\t\tlet decoded = aggcalls[1].map(hex => contract.web3.eth.abi.decodeParameter('uint256', hex));\n\t\t\t\tlet prices = await this.fetchPrices()\n\t\t\t\tlet [snxPrice, renPrice, btcPrice, balPrice, yfiPrice] = prices;\n\n\t\t\t\t//total factor 0.64\n\t\t\t\tlet balancerTVL = 1;\n\t\t\t\tif (decoded[15] && decoded[16]) {\n\t\t\t\t\tconst renBtc = decoded[15] / 100000000;\n\t\t\t\t\tconst wBtc = decoded[16] / 100000000;\n\t\t\t\t\tbalancerTVL = (renBtc * btcPrice) + (wBtc * btcPrice);\n\t\t\t\t}\n\t\t\t\tconst tvl =\n\t\t\t\tthis.balRewards = (decoded[6] / 1e18 * snxPrice + decoded[7] / 1e18 * renPrice) * 0.64 / balancerTVL * balPrice * 100\n\n\t\t\t\tthis.snxRewards = 365 * (decoded[2] * decoded[3] / 1e18)/7*snxPrice/((+decoded[0]) * (+decoded[1])/1e36) * 100\n\t\t\t\tlet now = Date.now() / 1000\n\t\t\t\tif(+decoded[12] + 30*60 < now)\n\t\t\t\t\tthis.snxRewards = 0\n\n\t\t\t\tthis.sbtcRewards = (10000 * snxPrice + 25000 * renPrice) / 7 * 365 / (btcPrice * decoded[4] * decoded[5] / 1e36) * 100\n\t\t\t\tif(+decoded[13] + 30*60 < now)\n\t\t\t\t\tthis.sbtcRewards = 0\n\n\t\t\t\tthis.yfiRewards = 365 * (decoded[10] * decoded[11] / 1e18)/7*yfiPrice/((+decoded[8] * (+decoded[9]) / 1e36)) * 100\n\t\t\t\tif(+decoded[14] + 30*60 < now)\n\t\t\t\t\tthis.yfiRewards = 0\n\n\t\t\t\tconsole.log(this.sbtcRewards, \"SBTC REWARDS\")\n\t\t\t},\n\t\t\tasync fetchPrices() {\n\t\t\t\tlet requests  = await Promise.allSettled([\n\t\t\t\t\tfetch('https://api.coingecko.com/api/v3/simple/price?ids=havven,republic-protocol,bitcoin,balancer,yearn-finance&vs_currencies=usd'),\n\t\t\t\t])\n\t\t\t\tlet prices = await Promise.all(requests.map((request, i) => {\n\t\t\t\t\treturn request.status == 'fulfilled' && request.value.json()\n\t\t\t\t}))\n\t\t\t\tlet snxPrice = prices[0] && prices[0].havven.usd\n\t\t\t\tlet renPrice = prices[0] && prices[0]['republic-protocol'].usd\n\t\t\t\tlet btcPrice = prices[0] && prices[0]['bitcoin'].usd\n\t\t\t\tlet balPrice = prices[0] && prices[0].balancer.usd;\n\t\t\t\tlet yfiPrice = prices[0] && prices[0]['yearn-finance'].usd\n\t\t\t\tif(requests[0].status == 'rejected') {\n\t\t\t\t\tlet requests = await Promise.allSettled([\n\t\t\t\t\t\tfetch('https://api.coinpaprika.com/v1/tickers/hav-havven'),\n\t\t\t\t\t\tfetch('https://api.coinpaprika.com/v1/tickers/ren-republic-protocol'),\n\t\t\t\t\t\tfetch('https://api.coinpaprika.com/v1/tickers/btc-bitcoin'),\n\t\t\t\t\t\tfetch('https://poloniex.com/public?command=returnTicker'),\n\t\t\t\t\t])\n\t\t\t\t\tlet prices = await Promise.all(requests.map(request => request.status == 'fulfilled' && request.value.json()))\n\t\t\t\t\tsnxPrice = prices[0] && prices[0].quotes.USD.price;\n\t\t\t\t\trenPrice = prices[1] && prices[1].quotes.USD.price;\n\t\t\t\t\tbtcPrice = prices[2] && prices[2].quotes.USD.price;\n\t\t\t\t\tbalPrice = prices[3] && prices[3]['USDT_BAL'].last\n\t\t\t\t\tyfiPrice = prices[4] && prices[4]['USDT_YFI'].last\n\t\t\t\t}\n\t\t\t\treturn [snxPrice, renPrice, btcPrice, balPrice, yfiPrice]\n\t\t\t},\n\t\t\tasync getBalances() {\n\t\t\t\ttry {\n\t\t\t\t\tif(!contract.default_account) return;\n\t\t\t\t\tcontract.contracts.compound = contract;\n\t\t\t\t\tlet calls = this.pools.flatMap(k => {\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t//balanceOf(address)\n\t\t\t\t\t\t\t[allabis[k].token_address, '0x70a08231000000000000000000000000' + contract.default_account.slice(2)],\n\t\t\t\t\t\t\t//get_virtual_price\n\t\t\t\t\t\t\t[allabis[k].swap_address, \"0xbb7b8b80\"]\n\t\t\t\t\t\t]})\n\t\t\t\t\tcalls.push([allabis.susdv2.sCurveRewards_address, '0x70a08231000000000000000000000000' + contract.default_account.slice(2)])\n\t\t\t\t\tcalls.push([allabis.sbtc.sCurveRewards_address, '0x70a08231000000000000000000000000' + contract.default_account.slice(2)])\n\t\t\t\t\tcalls.push([allabis.swusd.sCurveRewards_address, '0x70a08231000000000000000000000000' + contract.default_account.slice(2)])\n\t\t\t\t\tlet aggcalls = await clean_and_multi_call(calls);\n\t\t\t\t\tlet decoded = aggcalls[1].map(hex => web3.eth.abi.decodeParameter('uint256', hex))\n\t\t\t\t\tconsole.log(decoded, \"THE DECODED\")\n\t\t\t\t\t//this.balances = []\n\t\t\t\t\thelpers.chunkArr(decoded, 2).slice(0,this.pools.length).map((v, i) => {\n\t\t\t\t\t\tlet key = this.pools[i]\n\t\t\t\t\t\tVue.set(this.balances, key, +v[0] * (+v[1]) / 1e36);\n\t\t\t\t\t\tif(['tbtc', 'ren', 'sbtc'].includes(key)) Vue.set(this.balances, key, this.balances[key] * this.btcPrice)\n\t\t\t\t\t})\n\t\t\t\t\tlet len = decoded.length\n\t\t\t\t\tVue.set(this.balances, 'susdv2', this.balances.susdv2 + (+decoded[len-3] * decoded[9]) / 1e36)\n\t\t\t\t\tVue.set(this.balances, 'sbtc', this.balances.sbtc + ((+decoded[len-2] * decoded[15]) / 1e36) * this.btcPrice)\n\t\t\t\t\tVue.set(this.balances, 'y', this.balances.y + (+decoded[len-1] * decoded[5]) / 1e36)\n\t\t\t\t}catch(e) {\n\t\t\t\t\tconsole.log('issue in get balances');\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t},\n\t\t\thandle_pool_change(e) {\n\t\t\t\tif(document.querySelector('#from_currency') == document.activeElement\n\t\t\t\t\t|| document.querySelector('#custom_slippage_input') == document.activeElement\n\t\t\t\t\t|| document.querySelector('#custom_gas_input') == document.activeElement) return;\n\t\t\t\tif(this.activePoolLink == -1) return this.activePoolLink = 2\n\t            if(e.code == 'ArrowUp' && this.activePoolLink != 0) {\n\t                e.preventDefault();\n\t                this.activePoolLink--;\n\t            }\n\t            if(e.code == 'ArrowDown' && this.activePoolLink < 6) {\n\t                e.preventDefault();\n\t                this.activePoolLink++;\n\t            }\n\t            if(e.code.includes('Digit')) {\n\t                e.preventDefault();\n\t                var digit = e.code.slice(-1);\n\t                if(digit > 6) return;\n\t                this.activePoolLink = digit\n\t            }\n\t            if(e.code == 'Enter') {\n\t                e.preventDefault();\n\t                this.$router.push('/'+pools[this.activePoolLink])\n\t            }\n\t\t\t},\n\t\t\tasync getAPY() {\n\t\t\t\tconst ypoolAPIOracle = new contract.web3.eth.Contract(APYOracle_abi, iearnAPYOracle_address)\n\t\t\t\tthis.daily_apy[0] = ((await ypoolAPIOracle.methods.getAPY().call()) / 10**16).toFixed(2);\n\t\t\t\tthis.weekly_apy[0] = -1;\n\t\t\t\tthis.monthly_apy[0] = -1;\n\t\t\t\tthis.apy[0] = -1;\n\t\t\t\treturn;\n\t\t\t\ttry {\n\n\t\t\t\tlet pools = ['y']\n\t\t\t\tlet requests = await Promise.all([fetch(`${window.domain}/raw-stats/apys.json`), helpers.retry(fetch(`https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd`), 300)])\n\t\t\t\tlet res = await Promise.all(requests.map(request => request.json()))\n\t\t\t\t.then(res => {\n\t\t\t\t\tlet stats = res[0]\n\t\t\t\t\tthis.btcPrice = res[1]\n\t\t\t\t\tthis.btcPrice = this.btcPrice.bitcoin.usd\n\t\t\t\t\tfor(let [key, value] of Object.entries(volumeStore.state.volumes)) {\n\t\t\t\t\t\tif(volumeStore.state.volumes[key] && volumeStore.state.volumes[key][0] == -1) {\n\t\t\t\t\t\t\tlet volume = key == 'ren' ? stats.volume.ren2 : key == 'sbtc' ? stats.volume.rens : stats.volume[key]\n\t\t\t\t\t\t\tVue.set(volumeStore.state.volumes[key], 0, volume || 0)\n\t\t\t\t\t\t\tif(['tbtc', 'ren', 'sbtc'].includes(key)) {\n\t\t\t\t\t\t\t\tVue.set(volumeStore.state.volumes[key], 0, volume * this.btcPrice || 0)\n\t\t\t\t\t\t\t\tVue.set(volumeStore.state.volumes[key], 1, volume || 0)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.volumes = volumeStore.state.volumes;\n\t\t\t\t\tfor(let [i, pool] of pools.entries()) {\n\t\t\t\t\t\tvar daily_apy = stats.apy.day[pool];\n\t\t\t\t\t\tvar weekly_apy = stats.apy.week[pool];\n\t\t\t\t\t\tvar monthly_apy = stats.apy.month[pool];\n\t\t\t\t\t\tvar apy = stats.apy.total[pool];\n\t\t\t\t\t\tthis.daily_apy.push((daily_apy*100).toFixed(2))\n\t\t\t\t\t\tthis.weekly_apy.push((weekly_apy*100).toFixed(2))\n\t\t\t\t\t\tthis.monthly_apy.push((monthly_apy*100).toFixed(2))\n\t\t\t\t\t\tthis.apy.push((apy*100).toFixed(2))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tconsole.log('could not get apy values')\n\t\t\t\t})\n\n\n\t\t\t\t} catch(e) {\n\t\t\t\t\tconsole.log('apy error');\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tasync getCRVAPY() {\n\n\t\t\t\tconsole.log(\"GET SWRV APY\")\n\n\t\t\t\tlet poolInfo = {\n\t\t\t\t\tcompound: {\n\t\t\t\t\t\tswap: '0xA2B47E3D5c44877cca798226B7B8118F9BFb7A56',\n\t\t\t\t\t\tswap_token: '0x845838DF265Dcd2c412A1Dc9e959c7d08537f8a2',\n\t\t\t\t\t\tname: 'compound',\n\t\t\t\t\t\tgauge: '0x7ca5b0a2910B33e9759DC7dDB0413949071D7575',\n\t\t\t\t\t},\n\t\t\t\t\tusdt: {\n\t\t\t\t\t\tswap: '0x52EA46506B9CC5Ef470C5bf89f17Dc28bB35D85C',\n\t\t\t\t\t\tswap_token: '0x9fC689CCaDa600B6DF723D9E47D84d76664a1F23',\n\t\t\t\t\t\tname: 'usdt',\n\t\t\t\t\t\tgauge: '0xBC89cd85491d81C6AD2954E6d0362Ee29fCa8F53',\n\t\t\t\t\t},\n\t\t\t\t\ty: {\n\t\t\t\t\t\tswap: '0x329239599afB305DA0A2eC69c58F8a6697F9F88d',\n\t\t\t\t\t\tswap_token: '0xdF5e0e81Dff6FAF3A7e52BA697820c5e32D806A8',\n\t\t\t\t\t\tname: 'y',\n\t\t\t\t\t\tgauge: '0xFA712EE4788C042e2B7BB55E6cb8ec569C4530c1',\n\t\t\t\t\t},\n\t\t\t\t\tbusd: {\n\t\t\t\t\t\tswap: '0x79a8C46DeA5aDa233ABaFFD40F3A0A2B1e5A4F27',\n\t\t\t\t\t\tswap_token: '0x3B3Ac5386837Dc563660FB6a0937DFAa5924333B',\n\t\t\t\t\t\tname: 'busd',\n\t\t\t\t\t\tgauge: '0x69Fb7c45726cfE2baDeE8317005d3F94bE838840',\n\t\t\t\t\t},\n\t\t\t\t\tsusdv2: {\n\t\t\t\t\t\tswap: '0x329239599afB305DA0A2eC69c58F8a6697F9F88d',\n\t\t\t\t\t\tswap_token: '0x77C6E4a580c0dCE4E5c7a17d0bc077188a83A059',\n\t\t\t\t\t\tname: 'susdv2',\n\t\t\t\t\t\tgauge: '0xA90996896660DEcC6E997655E065b23788857849',\n\t\t\t\t\t},\n\t\t\t\t\tpax: {\n\t\t\t\t\t\tswap: '0x06364f10B501e868329afBc005b3492902d6C763',\n\t\t\t\t\t\tswap_token: '0xD905e2eaeBe188fc92179b6350807D8bd91Db0D8',\n\t\t\t\t\t\tname: 'pax',\n\t\t\t\t\t\tgauge: '0x64E3C23bfc40722d3B649844055F1D51c1ac041d',\n\t\t\t\t\t},\n\t\t\t\t\tren: {\n\t\t\t\t\t\tswap: '0x93054188d876f558f4a66B2EF1d97d16eDf0895B',\n\t\t\t\t\t\tswap_token: '0x49849C98ae39Fff122806C06791Fa73784FB3675',\n\t\t\t\t\t\tname: 'ren',\n\t\t\t\t\t\tgauge: '0xB1F2cdeC61db658F091671F5f199635aEF202CAC',\n\t\t\t\t\t},\n\t\t\t\t\tsbtc: {\n\t\t\t\t\t\tswap: '0x7fC77b5c7614E1533320Ea6DDc2Eb61fa00A9714',\n\t\t\t\t\t\tswap_token: '0x075b1bb99792c9E1041bA13afEf80C91a1e70fB3',\n\t\t\t\t\t\tname: 'sbtc',\n\t\t\t\t\t\tgauge: '0x705350c4BcD35c9441419DdD5d2f097d7a55410F',\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tlet decodedGauges = [\n\t\t\t\t  \"0x7ca5b0a2910B33e9759DC7dDB0413949071D7575\",\n\t\t\t\t  \"0xBC89cd85491d81C6AD2954E6d0362Ee29fCa8F53\",\n\t\t\t\t  \"0xFA712EE4788C042e2B7BB55E6cb8ec569C4530c1\",\n\t\t\t\t  \"0x69Fb7c45726cfE2baDeE8317005d3F94bE838840\",\n\t\t\t\t  \"0x64E3C23bfc40722d3B649844055F1D51c1ac041d\",\n\t\t\t\t  \"0xB1F2cdeC61db658F091671F5f199635aEF202CAC\",\n\t\t\t\t  \"0xA90996896660DEcC6E997655E065b23788857849\",\n\t\t\t\t  \"0x705350c4BcD35c9441419DdD5d2f097d7a55410F\"\n\t\t\t\t]\n\n\t\t\t\tlet gaugeController_address = '0x2F50D538606Fa9EDD2B11E2446BEb18C9D5846bB'\n\t\t\t\tlet gauge_relative_weight = '0x6207d866000000000000000000000000'\n\n\t\t\t\tlet pools = ['compound','usdt','swusd','busd','susdv2','pax','ren','sbtc']\n\n\t\t\t\tlet prices = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,curve-dao-token&vs_currencies=usd')\n\t\t\t\tprices = await prices.json()\n\t\t\t\tlet btcPrice = prices.bitcoin.usd\n\t\t\t\tlet CRVprice = prices['curve-dao-token'].usd\n\n\t\t\t\tlet weightCalls = decodedGauges.map(gauge => [gaugeController_address, gauge_relative_weight + gauge.slice(2)])\n\n\t\t\t\tlet aggCallsWeights = await clean_and_multi_call(weightCalls);\n\t\t\t\tlet decodedWeights = aggCallsWeights[1].map((hex, i) => [weightCalls[i][0], web3.eth.abi.decodeParameter('uint256', hex) / 1e18])\n\n\t\t\t\tlet ratesCalls = decodedGauges.map(gauge => [\n\t\t\t\t\t[gauge, \"0x180692d0\"],\n\t\t\t\t\t[gauge, \"0x17e28089\"],\n\t\t\t\t])\n\n\t\t\t\tlet aggRates = await clean_and_multi_call(ratesCalls.flat());\n\t\t\t\tlet decodedRate = aggRates[1].map(hex => web3.eth.abi.decodeParameter('uint256', hex))\n\t\t\t\tlet gaugeRates = decodedRate.filter((_, i) => i % 2 == 0).map(v => v / 1e18)\n\t\t\t\tlet workingSupplies = decodedRate.filter((_, i) => i % 2 == 1).map(v => v / 1e18)\n\n\t\t\t\tlet virtualPriceCalls = Object.values(poolInfo).map(v => [v.swap, \"0xbb7b8b80\"])\n\t\t\t\tlet aggVirtualPrices = await clean_and_multi_call(virtualPriceCalls);\n\t\t\t\tlet decodedVirtualPrices = aggVirtualPrices[1].map((hex, i) => [virtualPriceCalls[i][0], web3.eth.abi.decodeParameter('uint256', hex) / 1e18])\n\n\t\t\t\tlet weightData = decodedWeights.map((w, i) => {\n\t\t\t\t\tlet pool = Object.values(poolInfo).find(v => v.gauge.toLowerCase() == '0x' + weightCalls[i][1].slice(34).toLowerCase()).name\n\t\t\t\t\tlet swap_address = poolInfo[pool].swap\n\t\t\t\t\tlet virtual_price = decodedVirtualPrices.find(v => v[0].toLowerCase() == swap_address.toLowerCase())[1]\n\t\t\t\t\tlet _working_supply = workingSupplies[i]\n\t\t\t\t\tif(['ren', 'sbtc'].includes(pool))\n\t\t\t\t\t\t_working_supply *= btcPrice\n\t\t\t\t\tlet rate = (gaugeRates[i] * w[1] * 31536000 / _working_supply * 0.4) / virtual_price\n\t\t\t\t\tlet apy = rate * CRVprice * 100\n\t\t\t\t\tif(isNaN(apy))\n\t\t\t\t\t\tapy = 0\n\t\t\t\t\tObject.values(poolInfo).find(v => v.name == pool).gauge_relative_weight = w[1]\n\t\t\t\t\tconsole.log(pool, apy, \"POOL SWRV APY\")\n\t\t\t\t\tVue.set(this.CRVAPYs, pool, apy)\n\t\t\t\t})\n\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t@media only screen and (min-device-width : 320px) and (max-device-width : 730px) {\n\t\t#app .tradeview {\n \t \t\twidth: 90%;\n\t\t}\n\t\t.poolsdialog.poolsdialog > div a {\n\t\t\tdisplay: block;\n\t\t  text-align: center;\n\t\t}\n\t\t.poolsdialog .balance {\n\t\t\twidth: 100%;\n\t\t}\n\t\t.poolsdialog .balance .showmobile {\n\t\t\tdisplay: block;\n\t\t\ttext-align: center;\n\t\t}\n\t\t.poolsdialog .balance .tooltip {\n\t\t\tdisplay: none;\n\t\t}\n\t\t.poolsdialog.poolsdialog > div a > span {\n\t\t\tdisplay: block;\n\t\t\ttext-align: center;\n\t\t}\n\t\t.poolsdialog.poolsdialog > div span.pooltext, .poolsdialog.poolsdialog > div span.index {\n\t\t\tdisplay: inline;\n\t\t}\n\t\t.pools {\n\t\t  width: 100%;\n\t\t}\n\t\t.poolsdialog .incentive-apr {\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\t.poolsdialog > div a {\n\t\tdisplay: grid;\n\t}\n\t.poolsdialog > div > a:hover .tooltip {\n \t\tborder-bottom: 1px dotted white;\n\t}\n\t.poolsdialog > div > a:hover img {\n\t\tfilter: invert(1);\n\t}\n\t.poolsdialog > div a span {\n\t\ttext-align: center;\n\t}\n\t.index {\n\t\tflex: 0.1;\n\t}\n\t.pooltext {\n\t\tflex: 0.4;\n\t}\n\t.pools {\n\t\tflex: 1.6;\n\t}\n\t.apr {\n\t\tflex: 0.8;\n\t}\n\t.volume {\n\t\tflex: 0.8;\n\t}\n\t.balance {\n\t\twidth: 12px;\n\t}\n\t.pools .tooltip {\n\t\tvertical-align: bottom;\n\t\toverflow: hidden;\n\t}\n\t.tooltip {\n\t\tposition: relative;\n\t\tmargin-left: 0;\n\t}\n\t.tooltiptext.long {\n\t\tmax-width: 250px;\n\t\tposition: absolute;\n\t\tmargin-left: 0;\n\t\ttransform: translateX(-50%) translateX(6px);\n\t}\n\t.tooltiptext.long a {\n\t\tdisplay: inline-block;\n\t\tbackground: transparent;\n\t\ttext-decoration: underline;\n\t}\n\t.tooltiptext.long > div {\n\t\tpadding-left: 1em;\n\t\ttext-align: left;\n\t}\n\t.tooltiptext.long > div:hover {\n\t\tbackground: none;\n\t}\n\t.balance img {\n\t\theight: 12px;\n\t}\n\t.poolsdialog > div {\n\t\tmargin-top: 0.1em;\n\t}\n\t.apr, .pools, .volume{\n\t\tmargin: .5rem;\n\t}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Root.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Root.vue?vue&type=template&id=59ec4ccc&scoped=true&\"\nimport script from \"./Root.vue?vue&type=script&lang=js&\"\nexport * from \"./Root.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Root.vue?vue&type=style&index=0&id=59ec4ccc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59ec4ccc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
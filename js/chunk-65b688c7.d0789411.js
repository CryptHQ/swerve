(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65b688c7","chunk-5b703bc0"],{"07ac":function(e,t,a){var n=a("23e7"),s=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return s(e)}})},"0b7b":function(e,t,a){e.exports=a.p+"img/clock-regular.54749a5a.svg"},"0c33":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:e.showSlippage&&e.slippage<-.005,expression:"showSlippage && slippage < -0.005"}],staticClass:"simple-error",attrs:{id:"highslippage-warning"}},[a("span",{staticClass:"text"},[e._v(" Warning! High slippage(plus pricing): "),a("span",{staticClass:"percent"},[e._v(e._s((100*-e.slippage).toFixed(3)))]),e._v("% "),e._m(0)])]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showSlippage&&e.slippage<=0&&e.slippage>=-.005,expression:"showSlippage && slippage <= 0 && slippage >= -0.005"}],staticClass:"info-message",attrs:{id:"slippage-warning"}},[a("span",{staticClass:"text"},[e._v(" Slippage(plus pricing): ")]),a("span",{staticClass:"percent"},[e._v(e._s((100*-e.slippage).toFixed(3)))]),e._v("% "),e._m(1)]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.showSlippage&&e.slippage>0,expression:"showSlippage && slippage > 0"}],staticClass:"success",attrs:{id:"bonus-window"}},[e._v(" Bonus(plus pricing): "),a("span",[e._v(e._s((100*e.slippage).toFixed(3)))]),e._v("% "),a("span",{staticClass:"tooltip"},[e._v("[?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Bonus comes as an advantage from current coin prices which usually appears for coins which are "+e._s("Deposit"==e.$route.name?"low":"high")+" in balance ")])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.show_nobalance,expression:"show_nobalance"}],staticClass:"simple-error",attrs:{id:"nobalance-warning"}},[e._v(" Warning! Not enough balance for "+e._s(e.noBalanceText)+" token in the contract ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:"susdv2"==e.currentPool&&e.showSlippage&&e.slippage<-.01,expression:"currentPool == 'susdv2' && showSlippage && slippage < -0.01"}],staticClass:"info-message gentle-message",attrs:{id:"susd-warning"}},[e._v(" Please add coins in a balanced proportion ")])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"tooltip"},[e._v("[?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Slippage comes from depositing too many coins not in balance, and current coin prices are additionally accounted for ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"tooltip"},[e._v("[?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Slippage comes from depositing too many coins not in balance, and current coin prices are additionally accounted for ")])])}],r=(a("4fad"),a("5530")),i=a("51bf"),o={props:["show_nobalance","show_nobalance_i"],computed:Object(r["a"])(Object(r["a"])({},i["g"]),{},{noBalanceText:function(){if(!this.show_nobalance)return"";var e=Object.entries(this.currencies)[this.show_nobalance_i];return 2==this.show_nobalance_i&&"usdt"==this.currentPool||"susdv2"==this.currentPool?e[1]:e[1]+" (in "+e[0]+")"}})},c=o,u=a("2877"),l=Object(u["a"])(c,n,s,!1,null,"556a4168",null);t["a"]=l.exports},"239b":function(e,t,a){},"240b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"add-liquidity"},[a("fieldset",{staticClass:"currencies"},[a("legend",[e._v("Currencies:")]),a("ul",e._l(Object.keys(e.currencies),(function(t,n){var s;return a("li",[a("label",{attrs:{for:"currency_"+n}},[a("span",{staticClass:"currency_label"},[a("img",{class:(s={"token-icon":!0},s[t+"-icon"]=!0,s),attrs:{src:e.getTokenIcon(t)}}),a("span",[e._v(e._s(e._f("capitalize")(t))+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:["wbtc","sbtc"].includes(t),expression:"['wbtc', 'sbtc'].includes(currency)"}],staticClass:"maxBalanceCoin",on:{click:function(t){return e.setMaxBalanceCoin(n)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"sbtc"==e.currentPool&&2==n&&"0.00"!=e.maxBalanceCoin(n),expression:"currentPool == 'sbtc' && i == 2 && maxBalanceCoin(i) != '0.00'"}]},[e._v(" "+e._s(e.transferableBalanceText)+"/ ")]),a("span",[e._v("Max: "+e._s(e.maxBalanceCoin(n))+" ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:2==n&&e.susdWaitingPeriod,expression:"i == 2 && susdWaitingPeriod"}]},[e._m(0,!0)]),a("span",{directives:[{name:"show",rawName:"v-show",value:"sbtc"==e.currentPool&&2==n&&"0.00"!=e.maxBalanceCoin(n),expression:"currentPool == 'sbtc' && i == 2 && maxBalanceCoin(i) != '0.00'"}],staticClass:"tooltip"},[e._v(" [?] "),a("span",{staticClass:"tooltiptext long normalFont"},[e._v(" Max transferable balance is "+e._s(e.transferableBalanceText)+". You can free the remaining balance by settling. ")])])])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputs[n],expression:"inputs[i]"}],style:{backgroundColor:e.bgColors[n]},attrs:{type:"text",id:"currency_"+n,disabled:e.disabled,name:"from_cur"},domProps:{value:e.inputs[n]},on:{input:[function(t){t.target.composing||e.$set(e.inputs,n,t.target.value)},function(t){return e.change_currency(n,!0)}]}}),a("div",{directives:[{name:"show",rawName:"v-show",value:0==n&&e.amountAfterBTC>0,expression:"i == 0 && amountAfterBTC > 0"}]},[e._v(" Amount after renVM fees: "+e._s(e.amountAfterBTC)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==n&&e.amountAfterBTC<0,expression:"i == 0 && amountAfterBTC < 0"}]},[e._v(" Minimum deposit amount in BTC is "+e._s(e.minOrderSize)+" ")])])})),0)]),a("ul",[a("li",{attrs:{id:"inf_approval_wrapper"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inf_approval,expression:"inf_approval"}],attrs:{id:"inf-approval",type:"checkbox",name:"inf-approval",checked:""},domProps:{checked:Array.isArray(e.inf_approval)?e._i(e.inf_approval,null)>-1:e.inf_approval},on:{change:function(t){var a=e.inf_approval,n=t.target,s=!!n.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);n.checked?i<0&&(e.inf_approval=a.concat([r])):i>-1&&(e.inf_approval=a.slice(0,i).concat(a.slice(i+1)))}else e.inf_approval=s}}}),e._m(1)])]),a("gas-price"),a("p",{directives:[{name:"show",rawName:"v-show",value:"ren"==e.currentPool,expression:"currentPool == 'ren'"}],staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://bridge.renproject.io/"}},[e._v(" Mint/redeem renBTC ")])]),a("approve-chi"),a("p",{staticClass:"buttons",staticStyle:{"text-align":"center"}},[a("button",{attrs:{id:"add-liquidity",disabled:e.amountAfterBTC<0&&+e.inputs[0]>0},on:{click:function(t){return e.handle_add_liquidity()}}},[e._v(" Deposit "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.loadingAction,expression:"loadingAction == 1"}],staticClass:"loading line"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:["sbtc"].includes(e.currentPool),expression:"['sbtc'].includes(currentPool)"}],attrs:{id:"add-liquidity-stake",disabled:e.amountAfterBTC<0&&+e.inputs[0]>0},on:{click:function(t){return e.handle_add_liquidity(!0)}}},[e._v(" Deposit and stake "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.loadingAction,expression:"loadingAction == 2"}],staticClass:"loading line"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.totalShare>0&&["sbtc"].includes(e.currentPool),expression:"totalShare > 0 && ['sbtc'].includes(currentPool)"}],attrs:{id:"stakeunstaked"},on:{click:function(t){return e.stakeTokens()}}},[e._v(" Stake unstaked "),a("span",{directives:[{name:"show",rawName:"v-show",value:3==e.loadingAction,expression:"loadingAction == 3"}],staticClass:"loading line"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.show_loading,expression:"show_loading"}],staticClass:"info-message gentle-message"},[e._v(" "+e._s(e.waitingMessage)+" "),a("span",{staticClass:"loading line"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.estimateGas,expression:"estimateGas"}],staticClass:"info-message gentle-message"},[e._v(" Estimated tx cost: "+e._s((e.estimateGas*e.gasPrice/1e9*e.ethPrice).toFixed(2))+"$ ")]),a("Slippage"),a("p"),a("tx-table")],1)])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"tooltip"},[n("img",{staticClass:"icon small",attrs:{src:a("0b7b")}}),n("span",{staticClass:"tooltiptext normalFont"},[e._v(" Cannot transfer during waiting period ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"inf-approval"}},[e._v("Infinite approval - trust this contract forever "),a("span",{staticClass:"tooltip"},[e._v("[?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Preapprove the contract to to be able to spend any amount of your coins. You will not need to approve again. ")])])])}],r=(a("99af"),a("cb29"),a("4de4"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("45fc"),a("0d03"),a("b680"),a("b64b"),a("d3b7"),a("07ac"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("4795"),a("3835")),i=a("b85c"),o=a("2909"),c=a("5530"),u=(a("96cf"),a("1da1")),l=a("2b0e"),d=a("d99e"),p=a("cf45"),f=a("51bf"),g=a("5245"),m=a("2fa3"),h=a("901e"),v=a.n(h),b=a("0c33"),w=a("1079"),_=a("757b"),x=a("2bd5"),P=a("0a37"),C=a("e7e9"),k=a("0c7c"),y=a("cbc1"),O=(g["g"].compound,{components:{Slippage:b["a"],"tx-table":w["a"],"approve-chi":y["a"],GasPrice:C["a"]},data:function(){return{disabled:!1,disabledButtons:!0,sync_balances:!1,max_balances:!1,inf_approval:!0,wallet_balances:[],transferableBalance:null,susdWaitingPeriod:null,balances:[],inputs:[],amounts:[],bgColors:[],depositc:!1,coins:[],rates:[],swap_address:f["e"].swap_address,show_loading:!1,waitingMessage:"",estimateGas:0,customGasDisabled:!0,customGasInput:null,ethPrice:0,justDeposit:!1,loadingAction:!1,errorStaking:!1,slippagePromise:m["l"](Promise.resolve())}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$watch((function(){return f["e"].default_account}),(function(t,a){t&&a&&t.toLowerCase()!=a.toLowerCase()&&e.mounted()})),e.$watch((function(){return f["e"].initializedContracts}),(function(t){t&&e.mounted()})),e.$watch((function(){return f["e"].currentContract}),(function(t,a){e.setInputStyles(!1,t,a),f["e"].initializedContracts&&e.mounted()}));case 3:case"end":return t.stop()}}),t)})))()},watch:{},computed:Object(c["a"])(Object(c["a"])({},f["g"]),{},{currencies:function(){return"ren"==f["e"].currentContract?{btc:"BTC",wbtc:"WBTC"}:"sbtc"==f["e"].currentContract?{btc:"BTC",wbtc:"wBTC",sbtc:"sBTC"}:void 0},minAmount:function(){return["tbtc","ren","sbtc"].includes(f["e"].currentContract)?1e-8:.01},calcFee:function(){var e=g["g"][f["e"].currentContract].N_COINS;return this.fee/100*e/(4*(e-1))},amountAfterBTC:function(){return v()(this.inputs[0]).times(1e8).times(1-x["b"].mintFee/1e4).minus(x["b"].minersLockFee).div(1e8).toFixed(8)},minOrderSize:function(){return((x["b"].minersLockFee+x["b"].mintFee/1e4+1100)/1e8).toFixed(8)},fromPrecisions:function(){return g["g"][f["e"].currentContract].coin_precisions[this.from_currency]},toPrecisions:function(){return g["g"][f["e"].currentContract].coin_precisions[this.to_currency]},transferableBalanceText:function(){return this.toFixed(this.transferableBalance/1e18)},gasPrice:function(){return P["a"].gasPrice},gasPriceWei:function(){return P["a"].gasPriceWei}}),mounted:function(){this.$emit("loaded"),this.setInputStyles(!0),f["e"].initializedContracts&&this.mounted()},methods:{mounted:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.coins=f["e"].coins,t.rates=f["e"].c_rates,t.swap_address=f["e"].swap_address,f["e"].showSlippage=!1,f["e"].slippage=0,e.next=7,t.handle_sync_balances();case 7:return e.next=9,t.calcSlippage();case 9:return a=Object(o["a"])(Array(f["e"].N_COINS).keys()).map((function(e){return[t.coins[e]._address,t.coins[e].methods.allowance(f["e"].default_account||"0x0000000000000000000000000000000000000000",t.swap_address).encodeABI()]})),e.next=12,f["e"].multicall.methods.aggregate(a).call();case 12:n=e.sent,s=n[1].map((function(e){return f["e"].web3.eth.abi.decodeParameter("uint256",e)})),s.some((function(e){return v()(e).lte(f["e"].max_allowance.div(v()(2)))>0}))&&(t.inf_approval=!1),t.disabledButtons=!1,t.highlightInputs(0);case 17:case"end":return e.stop()}}),e)})))()},getTokenIcon:function(e){return m["h"](e,this.depositc,this.currentPool)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0==+e&&["ren","sbtc"].includes(f["e"].currentContract))return"0.00";2==t&&["tbtc","ren","sbtc"].includes(f["e"].currentContract)&&(t=8);var a=e.toFixed(t);return isNaN(a)?"0.00":a},useFirestore:function(){_["q"]()},maxBalanceCoin:function(e){return this.toFixed(this.wallet_balances[e]*this.rates[e])},setMaxBalanceCoin:function(e){if(l["a"].set(this.inputs,e,this.maxBalanceCoin(e)),"sbtc"==this.currentPool&&2==e){var t=this.susdWaitingPeriod?0:v()(this.transferableBalance).times(this.rates[e]).toString();l["a"].set(this.inputs,e,t)}},inputsFormat:function(e){return this.inputs[e]?this.toFixed(+this.inputs[e]):"0.00"},setInputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(a){for(var n=0;n<g["g"][t].N_COINS-g["g"][a].N_COINS;n++)this.inputs.push("0.00");g["g"][a].N_COINS-g["g"][t].N_COINS>0&&(this.inputs=this.inputs.filter((function(e,a){return a<g["g"][t].N_COINS})))}else e&&(this.inputs=new Array(Object.keys(this.currencies).length).fill("0.00"));this.bgColors=Array(f["e"].N_COINS).fill({backgroundColor:"#707070",color:"#d0d0d0"})},calcSlippage:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(o["a"])(e.inputs),a[0]=e.amountAfterBTC>0?e.amountAfterBTC:0,e.slippagePromise.cancel(),e.slippagePromise=m["l"](p["calc_slippage"](a,!0)),t.next=7,e.slippagePromise;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handle_sync_balances:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,c,u,d,g,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["update_fee_info"]();case 2:a=[],n=Object(i["a"])(e.coins.slice(1).entries());try{for(n.s();!(s=n.n()).done;)o=Object(r["a"])(s.value,2),c=o[0],u=o[1],a.push([u._address,u.methods.balanceOf(f["e"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]),a.push([f["e"].swap._address,f["e"].swap.methods.balances(c).encodeABI()])}catch(v){n.e(v)}finally{n.f()}return"sbtc"==e.currentPool&&(a.push([e.coins[2]._address,e.coins[2].methods.transferableSynths(f["e"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]),a.push([f["e"].snxExchanger._address,f["e"].snxExchanger.methods.maxSecsLeftInWaitingPeriod(f["e"].default_account,"0x7355534400000000000000000000000000000000000000000000000000000000").encodeABI()])),t.next=8,p["clean_and_multi_call"](a);case 8:d=t.sent,g=d[1].map((function(e){return f["e"].web3.eth.abi.decodeParameter("uint256",e)})),h=0,"sbtc"==e.currentPool&&(e.transferableBalance=g[g.length-2],e.susdWaitingPeriod=+(0!=g[g.length-1]),h=2),m["b"](g.slice(0,g.length-h),2).map((function(t,a){l["a"].set(e.wallet_balances,a+1,t[0]),f["e"].default_account||l["a"].set(e.wallet_balances,a+1,0),l["a"].set(e.balances,a+1,+t[1])}));case 13:case"end":return t.stop()}}),t)})))()},handle_sync_balances_proportion:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handle_sync_balances();case 2:case"end":return t.stop()}}),t)})))()},deposit_stake:function(){this.show_loading=!0,this.handle_add_liquidity(!0)},setLoadingAction:function(e){var t=this;this.loadingAction=e,setTimeout((function(){return t.loadingAction=!1}),500)},stakeTokens:function(e){var t=arguments,a=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var s,r,i,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.length>1&&void 0!==t[1]&&t[1],3!=a.loadingAction){n.next=3;break}return n.abrupt("return");case 3:if(a.setLoadingAction(3),e){n.next=10;break}return n.t0=v.a,n.next=8,f["e"].swap_token.methods.balanceOf(f["e"].default_account).call();case 8:n.t1=n.sent,e=(0,n.t0)(n.t1);case 10:return a.waitingMessage="Please approve staking ".concat(a.toFixed(e.div(v()(1e18)))," of your sCurve tokens"),r=new contract.web3.eth.Contract(g["g"].sbtc.sCurveRewards_abi,g["g"].sbtc.sCurveRewards_address),i=Object(d["d"])(a.waitingMessage),o=i.dismiss,n.next=15,p["ensure_stake_allowance"](e,r,a.inf_approval);case 15:return o(),a.waitingMessage="Please confirm stake transaction ".concat(s?"(2/2)":""),c=Object(d["d"])(a.waitingMessage),o=c.dismiss,n.next=20,Promise.all([m["g"]()]);case 20:return u=n.sent,a.ethPrice=u[0],a.estimateGas=2e5,n.prev=23,n.next=26,r.methods.stake(e.toFixed(0,1)).send({from:f["e"].default_account,gasPrice:a.gasPriceWei,gas:4e5}).once("transactionHash",(function(e){a.waitingMessage="Waiting for stake transaction to confirm\n                            ".concat(s?"(2/2)":"",": no further action needed"),o(),Object(d["c"])(e)}));case 26:f["e"].totalShare-=e,p["update_fee_info"](),n.next=35;break;case 30:n.prev=30,n.t2=n["catch"](23),console.error(n.t2),o(),k["a"](n.t2);case 35:a.waitingMessage="",a.show_loading=!1;case 37:case"end":return n.stop()}}),n,null,[[23,30]])})))()},handle_add_liquidity:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var n,s,r,i,o,c,u,h,b,w,x,P,C,y,O,I,S,j,A;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],s=0==n?1:2,t.loadingAction!=s){a.next=4;break}return a.abrupt("return");case 4:return t.setLoadingAction(s),a.next=7,Promise.all([m["g"]()]);case 7:return r=a.sent,t.ethPrice=r[0],i=t.coins.slice(1).map((function(e,a){return"sbtc"==t.currentPool&&1==a?[e._address,e.methods.transferableSynths(f["e"].default_account).encodeABI()]:[e._address,e.methods.balanceOf(f["e"].default_account).encodeABI()]})),i.push([f["e"].swap_token._address,f["e"].swap_token.methods.totalSupply().encodeABI()]),o=1,"sbtc"==t.currentPool&&(i.push([f["e"].snxExchanger._address,f["e"].snxExchanger.methods.maxSecsLeftInWaitingPeriod(f["e"].default_account,"0x7355534400000000000000000000000000000000000000000000000000000000").encodeABI()]),o=2),"ren"==f["e"].currentContract&&(t.amounts=t.amounts.slice(0,2)),a.next=16,f["e"].multicall.methods.aggregate(i).call();case 16:if(c=a.sent,u=c[1].map((function(e){return f["e"].web3.eth.abi.decodeParameter("uint256",e)})),u.slice(0,u.length-o).forEach((function(e,a){e=v()(e),"sbtc"==t.currentPool&&a+1==2&&0!=u[u.length-1]&&(bal=v()(0));var n=g["g"][f["e"].currentContract].coin_precisions[a+1],s=v()(e).div(n).minus(t.inputs[a+1]);e.gt(0)&&s.lt(0)&&v()(s).lt(v()(t.minAmount))?l["a"].set(t.amounts,a+1,v()(e).toFixed(0,1)):l["a"].set(t.amounts,a+1,v()(t.inputs[a+1]).times(n).toFixed(0,1))})),l["a"].set(t.amounts,0,v()(t.amountAfterBTC).times(1e8).toFixed(0,1)),0==+t.inputs[0]&&l["a"].set(t.amounts,0,0),h=+u[u.length-o],b=0,!(h>0)){a.next=30;break}return w=t.amounts,a.next=27,f["e"].swap.methods.calc_token_amount(w,!0).call();case 27:b=a.sent,b=v()(b).times(v()(1).minus(v()(t.calcFee))),b=v()(b).times(.99).toFixed(0,1);case 30:if(t.estimateGas=f["f"].deposit[t.currentPool]/2,!(+t.inputs[0]>0)){a.next=41;break}x=1;case 33:if(!(x<f["e"].N_COINS)){a.next=39;break}return a.next=36,p["approveAmount"](t.coins[x],v()(t.amounts[x]),f["e"].default_account,g["g"][f["e"].currentContract].adapterBiconomyAddress,t.inf_approval);case 36:x++,a.next=33;break;case 39:a.next=48;break;case 41:if(!t.inf_approval){a.next=46;break}return a.next=44,p["ensure_allowance"](t.amounts,!1,void 0,void 0,!0);case 44:a.next=48;break;case 46:return a.next=48,p["ensure_allowance"](t.amounts,!1);case 48:if(C=0,0!=+t.inputs[0]){a.next=99;break}return t.waitingMessage="Please confirm deposit transaction",y=Object(d["d"])(t.waitingMessage),O=y.dismiss,a.next=54,m["p"](100);case 54:return I=f["e"].swap.methods.add_liquidity(t.amounts,b).send({from:f["e"].default_account,gasPrice:t.gasPriceWei,gas:f["f"].deposit[t.currentPool]}).once("transactionHash",(function(e){O(),Object(d["c"])(e),t.waitingMessage="Waiting for deposit\n                            <a href='http://etherscan.io/tx/".concat(e,"'>transaction</a>\n                            to confirm ").concat(n?"before staking":"no further action required")})),a.prev=55,a.next=58,I;case 58:P=a.sent,a.next=72;break;case 61:if(a.prev=61,a.t0=a["catch"](55),console.error(a.t0),O(),k["a"](a.t0),-32603!=a.t0.code){a.next=72;break}return a.next=69,p["setTimeout"](300);case 69:return a.next=71,I;case 71:P=a.sent;case 72:if(t.waitingMessage="",n||(t.show_loading=!1),!n){a.next=97;break}return a.prev=75,C=v()(Object.values(P.events).filter((function(e){return e.address.toLowerCase()==g["g"].sbtc.token_address.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e.raw.topics[1]&&e.raw.topics[2].toLowerCase()=="0x000000000000000000000000"+f["e"].default_account.slice(2).toLowerCase()}))[0].raw.data),a.next=79,m["p"](100);case 79:return a.next=81,t.stakeTokens(C,!0);case 81:a.next=97;break;case 83:return a.prev=83,a.t1=a["catch"](75),a.prev=85,C=v()(Object.values(P.logs).filter((function(e){return e.address.toLowerCase()==g["g"].sbtc.token_address.toLowerCase()&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e.topics[1]&&e.topics[2].toLowerCase()=="0x000000000000000000000000"+f["e"].default_account.slice(2).toLowerCase()}))[0].data),a.next=89,m["p"](100);case 89:return a.next=91,t.stakeTokens(C,!0);case 91:a.next=97;break;case 93:a.prev=93,a.t2=a["catch"](85),console.error(a.t2),t.errorStaking=!0;case 97:a.next=115;break;case 99:return S=_["b"]({btcAmount:t.inputs[0],amounts:t.amounts,min_amount:b,gasPrice:t.gasPriceWei,stake:n}),null!==document.querySelector(".showdesktoptransactions").offsetParent?(j=document.querySelector("tbody tr td:first-child"),!m["k"](j)&&j.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})):(A=document.querySelector(".transactionmobile"),!m["k"](A)&&A.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})),a.prev=101,a.next=104,S;case 104:P=a.sent,a.next=115;break;case 107:if(a.prev=107,a.t3=a["catch"](101),-32603!=a.t3.code){a.next=115;break}return a.next=112,p["setTimeout"](300);case 112:return a.next=114,S;case 114:P=a.sent;case 115:return t.waitingMessage="",t.estimateGas=0,t.gasPrice=0,t.justDeposit=!1,a.next=121,t.handle_sync_balances();case 121:p["update_fee_info"]();case 122:case"end":return a.stop()}}),a,null,[[55,61],[75,83],[85,93],[101,107]])})))()},highlightInputs:function(e){if(0!=e){var t=this.inputs[e],a=this.wallet_balances[e];"sbtc"==this.currentPool&&2==e&&(a=this.transferableBalance),t>a*this.rates[e]?l["a"].set(this.bgColors,e,"red"):l["a"].set(this.bgColors,e,"blue")}else this.amountAfterBTC<0?l["a"].set(this.bgColors,e,"red"):l["a"].set(this.bgColors,e,"blue")},change_currency:function(e){var t=arguments,a=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return!(t.length>1&&void 0!==t[1])||t[1],s=t.length>2?t[2]:void 0,s&&(a.inputs[e]=s.target.value),n.next=5,a.calcSlippage();case 5:a.inputs[e],a.highlightInputs(e);case 7:case"end":return n.stop()}}),n)})))()}}}),I=O,S=(a("b4c0"),a("2877")),j=Object(S["a"])(I,n,s,!1,null,null,null);t["default"]=j.exports},"2bd5":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));a("caad"),a("4fad"),a("2ca0");var n,s=a("3835"),r=a("ade3"),i=a("2b0e"),o=i["a"].observable((n={address:null,sdk:null,transactions:[]},Object(r["a"])(n,"address",null),Object(r["a"])(n,"default_account",null),Object(r["a"])(n,"minersFee",17e3),Object(r["a"])(n,"minersLockFee",0),Object(r["a"])(n,"minersReleaseFee",0),Object(r["a"])(n,"mintFee",0),Object(r["a"])(n,"burnFee",0),Object(r["a"])(n,"confirmations",6),Object(r["a"])(n,"space",null),Object(r["a"])(n,"box",null),Object(r["a"])(n,"showModal",!1),Object(r["a"])(n,"showModal1",!1),Object(r["a"])(n,"showModalRecover",!1),Object(r["a"])(n,"msg_signature",null),Object(r["a"])(n,"password",null),Object(r["a"])(n,"aes_key",null),Object(r["a"])(n,"fireUser",null),Object(r["a"])(n,"loaded",!1),Object(r["a"])(n,"adapterContract",null),Object(r["a"])(n,"recover",!1),n));function c(){for(var e=0,t=0,a=Object.entries(localStorage);t<a.length;t++){var n=Object(s["a"])(a[t],2),r=n[0],i=n[1];r.startsWith("swervebtc_")&&(i=JSON.parse(i),i.removed||([0,3].includes(i.type)&&![14,15,17].includes(i.state)&&e++,1==i.type&&65!=i.state&&e++))}return e}},"2ca0":function(e,t,a){"use strict";var n=a("23e7"),s=a("06cf").f,r=a("50c4"),i=a("5a34"),o=a("1d80"),c=a("ab13"),u=a("c430"),l="".startsWith,d=Math.min,p=c("startsWith"),f=!u&&!p&&!!function(){var e=s(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=String(o(this));i(e);var a=r(d(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return l?l.call(t,n,a):t.slice(a,a+n.length)===n}})},"3bdc":function(e,t,a){function n(e,t,a,n,s,r,i){try{var o=e[r](i),c=o.value}catch(u){return void a(u)}o.done?t(c):Promise.resolve(c).then(n,s)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function o(e){n(i,s,r,o,c,"next",e)}function c(e){n(i,s,r,o,c,"throw",e)}o(void 0)}))}}a("d3b7"),e.exports=s},"45fc":function(e,t,a){"use strict";var n=a("23e7"),s=a("b727").some,r=a("a640"),i=a("ae40"),o=r("some"),c=i("some");n({target:"Array",proto:!0,forced:!o||!c},{some:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},5199:function(e,t,a){"use strict";var n=a("64ea"),s=a.n(n);s.a},"64ea":function(e,t,a){},b4c0:function(e,t,a){"use strict";var n=a("239b"),s=a.n(n);s.a},e7e9:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],staticClass:"simple-error pulse"},[e._v(" "+e._s(e.errorMessage)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gasPriceMedium,expression:"gasPriceMedium"}],staticClass:"do-center",attrs:{id:"gas_price"}},[a("span",{staticStyle:{color:"#86fce7"}},[e._v("Gas price:")]),a("input",{attrs:{id:"gasstandard",type:"radio",name:"gas"},domProps:{value:e.gasPriceMedium},on:{click:function(t){e.customGasDisabled=!0,e.gasPrice=e.gasPriceMedium}}}),a("label",{attrs:{for:"gasstandard"}},[e._v(e._s(Math.round(e.gasPriceMedium))+" Standard")]),a("input",{attrs:{id:"gasfast",type:"radio",name:"gas",checked:""},domProps:{value:e.gasPriceFast},on:{click:function(t){e.customGasDisabled=!0,e.gasPrice=e.gasPriceFast}}}),a("label",{attrs:{for:"gasfast"}},[e._v(e._s(Math.round(e.gasPriceFast))+" Fast")]),a("input",{attrs:{id:"gasinstant",type:"radio",name:"gas"},domProps:{value:e.gasPriceFastest},on:{click:function(t){e.customGasDisabled=!0,e.gasPrice=e.gasPriceFastest}}}),a("label",{attrs:{for:"gasinstant"}},[e._v(e._s(Math.round(e.gasPriceFastest))+" Instant")]),a("input",{attrs:{id:"custom_gas",type:"radio",name:"gas",value:"-"},on:{click:function(t){e.customGasDisabled=!1,e.gasPrice=e.gasPriceSlow}}}),a("label",{attrs:{for:"custom_gas"},on:{click:function(t){e.customGasDisabled=!1,e.gasPrice=e.gasPriceSlow}}},[a("input",{attrs:{type:"text",id:"custom_gas_input",disabled:e.customGasDisabled,name:"custom_gas_input"},domProps:{value:e.customGasPriceInput},on:{input:function(t){return e.setCustomGas(t)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.customGasPriceInput==e.gasPriceSlow,expression:"customGasPriceInput == gasPriceSlow"}]}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.customGasPriceInput&&e.customGasPriceInput<e.gasPriceSlow,expression:"customGasPriceInput && customGasPriceInput < gasPriceSlow"}],staticClass:"gastoolow"},[e._m(0)])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"tooltip"},[e._v(" Low "),a("span",{staticClass:"tooltiptext"},[e._v(" Too low gas price. Your transaction may be dropped. ")])])}],r=(a("b680"),a("d3b7"),a("4795"),a("96cf"),a("1da1")),i=a("0a37"),o=a("0c7c"),c=a("2fa3"),u=a("fe5c"),l=a("901e"),d=a.n(l),p={data:function(){return{customGasDisabled:!0}},computed:{gasPriceSlow:function(){return i["a"].gasPriceInfo&&i["a"].gasPriceInfo.low||15},gasPriceMedium:function(){return i["a"].gasPriceInfo&&i["a"].gasPriceInfo.standard||20},gasPriceFast:function(){return i["a"].gasPriceInfo&&i["a"].gasPriceInfo.fast||25},gasPriceFastest:function(){return i["a"].gasPriceInfo&&i["a"].gasPriceInfo.instant||30},gasPrice:{get:function(){return i["a"].gasPrice},set:function(e){i["a"].gasPrice=e}},customGasPriceInput:function(){return this.customGasDisabled?this.gasPriceSlow:this.gasPrice},errorMessage:function(){return setTimeout((function(){return o["b"].txError=null}),2200),o["b"].txError}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:!i["a"].fetched&&e.getGasPrice(),i["a"].gasPriceInterval&&Object(u["clearIntervalAsync"])(i["a"].gasPriceInterval),i["a"].gasPriceInterval&&!i["a"].gasPriceInterval.stopped||(i["a"].gasPriceInterval=Object(u["setIntervalAsync"])((function(){return e.getGasPrice()}),3e3)),e.$watch((function(){return i["a"].gasPrice}),(function(e){i["a"].gasPriceWei=d()(e).times(1e9).toFixed(0,1)}),{immediate:!0});case 4:case"end":return t.stop()}}),t)})))()},methods:{getGasPrice:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["o"])(fetch("https://gasprice.poa.network/"));case 3:return t=e.sent,e.next=6,t.json();case 6:if(t=e.sent,i["a"].gasPriceInfo=t,i["a"].gasPriceInfo.low=i["a"].gasPriceInfo.slow,!(i["a"].gasPriceInfo.fast>1e3)){e.next=11;break}throw new Error("too high!");case 11:e.next=21;break;case 13:return e.prev=13,e.t0=e["catch"](0),console.error(e.t0),e.next=18,web3.eth.getGasPrice();case 18:e.t1=e.sent,a=e.t1/1e9,i["a"].gasPriceInfo={low:a-2,standard:a,fast:a+2,instant:a+4};case 21:i["a"].fetched||(i["a"].gasPrice=i["a"].gasPriceInfo.fast,i["a"].fetched=!0);case 22:case"end":return e.stop()}}),e,null,[[0,13]])})))()},setCustomGas:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.target.value,e.target.value>2*t.gasPriceFastest&&(n=2*t.gasPriceFastest),t.gasPrice=n;case 3:case"end":return a.stop()}}),a)})))()}}},f=p,g=(a("5199"),a("2877")),m=Object(g["a"])(f,n,s,!1,null,"11f75e20",null);t["a"]=m.exports},fe5c:function(e,t,a){"use strict";a.r(t),a.d(t,"SetIntervalAsyncError",(function(){return o})),a.d(t,"clearIntervalAsync",(function(){return r})),a.d(t,"setIntervalAsync",(function(){return p}));var n=a("3bdc");const s=Math.pow(2,31)-1;function r(e){return i.apply(this,arguments)}function i(){return i=n((function*(e){e.stopped=!0;for(var t=0,a=Object.values(e.timeouts);t<a.length;t++){const e=a[t];clearTimeout(e)}const n=()=>{},r=Object.values(e.promises).map(e=>{e.catch(n)}),i=setInterval(n,s);yield Promise.all(r),clearInterval(i)})),i.apply(this,arguments)}class o extends Error{}Object.defineProperty(o.prototype,"name",{value:"SetIntervalAsyncError"});const c=10;function u(e){if("function"!==typeof e)throw new o('Invalid argument: "handler". Expected a function.')}function l(e){if(!("number"===typeof e&&c<=e))throw new o(`Invalid argument: "interval". Expected a number greater than or equal to ${c}.`)}class d{constructor(){this.stopped=!1,this.id=0,this.timeouts={},this.promises={}}}function p(e,t,...a){u(e),l(t);const n=new d,s=n.id;return n.timeouts[s]=setTimeout(f,t,n,e,t,...a),n}function f(e,t,a,...s){const r=e.id;e.promises[r]=n((function*(){const n=new Date;try{yield t(...s)}catch(o){console.error(o)}const i=new Date;if(!e.stopped){const o=i-n,c=a>o?a-o:0;e.timeouts[r+1]=setTimeout(f,c,e,t,a,...s)}delete e.timeouts[r],delete e.promises[r]}))(),e.id=r+1}}}]);
//# sourceMappingURL=chunk-65b688c7.d0789411.js.map
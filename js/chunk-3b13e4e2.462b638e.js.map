{"version":3,"sources":["webpack:///./node_modules/bs58check/base.js","webpack:///./node_modules/bs58/index.js","webpack:///./node_modules/hdkey/node_modules/secp256k1/lib/index.js","webpack:///./node_modules/bnc-onboard/dist/esm/hd-wallet-642b97e3.js","webpack:///./node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/errors.js","webpack:///./node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/index.js","webpack:///./node_modules/fast-safe-stringify/index.js","webpack:///./node_modules/web3-provider-engine/subproviders/rpc.js","webpack:///./node_modules/bnc-onboard/dist/esm/providerEngine-81ff17e9.js","webpack:///./node_modules/bs58check/index.js","webpack:///./node_modules/bnc-onboard/dist/esm/trezor-058b9998.js","webpack:///./node_modules/hdkey/node_modules/secp256k1/elliptic.js","webpack:///./node_modules/hdkey/lib/hdkey.js","webpack:///./node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/utils.js","webpack:///./node_modules/web3-provider-engine/node_modules/eth-json-rpc-errors/src/classes.js","webpack:///./node_modules/hdkey/node_modules/secp256k1/lib/elliptic.js"],"names":["base58","Buffer","module","exports","checksumFn","encode","payload","checksum","concat","length","decodeRaw","buffer","slice","newChecksum","decodeUnsafe","string","decode","Error","basex","ALPHABET","errors","IMPOSSIBLE_CASE","TWEAK_ADD","TWEAK_MUL","CONTEXT_RANDOMIZE_UNKNOW","SECKEY_INVALID","PUBKEY_PARSE","PUBKEY_SERIALIZE","PUBKEY_COMBINE","SIG_PARSE","SIGN","RECOVER","ECDH","assert","cond","msg","isUint8Array","name","value","Uint8Array","undefined","Array","isArray","numbers","join","includes","isCompressed","toTypeString","getAssertedOutput","output","len","Object","prototype","toString","call","secp256k1","seed","contextRandomize","seckey","privateKeyVerify","privateKeyNegate","tweak","privateKeyTweakAdd","privateKeyTweakMul","pubkey","publicKeyVerify","compressed","publicKeyCreate","publicKeyConvert","publicKeyNegate","pubkeys","publicKeyCombine","publicKeyTweakAdd","publicKeyTweakMul","sig","signatureNormalize","obj","outputlen","signatureExport","signatureImport","msg32","options","data","noncefn","signature","recid","ecdsaSign","ecdsaVerify","ecdsaRecover","hashfn","xbuf","ybuf","ecdh","publicToAddress","toChecksumAddress","numberToGet","generateAddresses","account","offset","publicKey","chainCode","path","hdk","addresses","i","dkey","deriveChild","address","push","dPath","isValidPath","parts","split","accountFieldDigit","Number","isNaN","changeFieldDigit","addressFieldDigit","EthereumRpcError","EthereumProviderError","getMessageFromCode","ERROR_CODES","getEthJsonRpcError","code","opts","message","validateOpts","getEthProviderError","rpc","parse","invalidRequest","invalidParams","methodNotFound","internal","server","isInteger","invalidInput","resourceNotFound","resourceUnavailable","transactionRejected","methodNotSupported","provider","userRejectedRequest","unauthorized","unsupportedMethod","custom","serializeError","ethErrors","stringify","default","stable","deterministicStringify","stableStringify","arr","replacerStack","replacer","spacer","res","decirc","JSON","replaceGetterValues","part","pop","defineProperty","val","k","stack","parent","propertyDescriptor","getOwnPropertyDescriptor","get","configurable","keys","key","compareFunction","a","b","tmp","deterministicDecirc","toJSON","sort","v","splice","this","inherits","createPayload","Subprovider","RpcSource","self","rpcUrl","sanitizePayload","id","jsonrpc","method","params","handleRequest","next","end","targetUrl","sanitizedPayload","newPayload","xhr","uri","headers","body","rejectUnauthorized","timeout","err","statusCode","console","error","result","createProvider","config","getAccounts","signTransaction","processMessage","processPersonalMessage","signMessage","signPersonalMessage","idMgmt","rpcSubProvider","addProvider","start","createHash","bs58checkBase","sha256x2","update","digest","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","Symbol","iterator","_arr","_n","_d","_e","_s","_i","done","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","constructor","from","test","iter","arr2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","Promise","then","_asyncToGenerator","fn","args","arguments","apply","trezorIcon","TREZOR_DEFAULT_PATH","trezor","networkId","email","appUrl","preferred","label","iconSrc","svg","wallet","_wallet","regeneratorRuntime","mark","_callee4","helpers","BigNumber","networkName","resetWalletState","wrap","_context4","prev","trezorProvider","sent","abrupt","connect","enable","disconnect","_get","_callee","_context","getPrimaryAddress","stop","network","_get2","_callee2","_context2","balance","_get3","_callee3","_context3","getBalance","_x","type","desktop","mobile","osExclusions","_x2","_trezorProvider","_callee13","TrezorConnectLibrary","EthereumTx","ethUtil","TrezorConnect","DEVICE_EVENT","DEVICE","addressToPath","enabled","customPath","setPath","_setPath","isCustomPath","getAddress","_getAddress","setPrimaryAccount","getPublicKey","_getPublicKey","getMoreAccounts","_getMoreAccounts","_getAccounts","_getAccounts2","getBalances","trezorSignTransaction","_signTransaction","_signTransaction2","_signMessage","_signMessage2","_context13","_callee12","_","_context12","size","entries","ethereumSignMessage","stripHexPrefix","hex","response","success","_x9","_callee11","transactionData","transaction","trezorResult","_context11","values","Transaction","chain","r","s","serialize","_x8","nonce","gasPrice","gas","to","ethereumSignTransaction","gasLimit","chainId","sendAsync","e","all","map","_ref3","_callee5","_context5","_x7","_callee10","getMore","addressInfo","_context10","t0","forEach","_ref4","set","_x6","_callee9","accounts","_context9","_callee8","_context8","coin","serializedPath","accountIndex","findIndex","_ref","_ref2","accountAddress","unshift","Map","_callee7","errorMsg","_context7","ethereumGetAddress","showOnTrezor","_x5","_callee6","_context6","_x3","_x4","manifest","callback","messageData","on","event","DISCONNECT","disconnected","walletName","send","crypto","bs58check","MASTER_SECRET","HARDENED_OFFSET","LEN","BITCOIN_VERSIONS","private","public","HDKey","versions","depth","index","_privateKey","_publicKey","_fingerprint","parentFingerprint","hdkey","version","allocUnsafe","writeUInt32BE","writeUInt8","fingerprint","copy","hash160","buf","sha","_identifier","identifier","equal","readUInt32BE","alloc","privateKey","derive","c","hardened","childIndex","parseInt","isHardened","indexBuffer","pk","zb","I","createHmac","IL","IR","hd","sign","hash","verify","wipePrivateData","randomBytes","xpriv","privateExtendedKey","xpub","publicExtendedKey","fromMasterSeed","seedBuffer","fromExtendedKey","base58key","keyBuffer","readUInt8","fromJSON","errorValues","FALLBACK_ERROR_CODE","JSON_RPC_SERVER_ERROR_MESSAGE","FALLBACK_MESSAGE","FALLBACK_ERROR","fallbackMessage","codeString","isJsonRpcServerError","isValidCode","fallbackError","serialized","hasOwnProperty","originalError","assignOriginalError","assign","safeStringify","super","stringifyReplacer","isValidEthProviderCode","EC","ec","ecparams","curve","BN","loadCompressedPublicKey","first","x","cmp","p","toRed","red","y","redSqr","redIMul","redIAdd","redSqrt","isOdd","redNeg","keyPair","pub","loadUncompressedPublicKey","x3","redISub","isZero","loadPublicKey","subarray","savePublicKey","point","bn","negate","sub","umod","toArrayLike","iadd","isub","tweaked","imul","pair","keyFromPrivate","getPublic","pairs","add","isInfinity","g","mul","nh","sigR","sigS","lenR","posR","lenS","posS","_noncefn","counter","isValid","d","canonical","pers","recoveryParam","sigObj","sigr","sigs","recoverPubKey","scalar","sha256","getX","toArray","getY"],"mappings":"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","file":"js/chunk-3b13e4e2.462b638e.js","sourcesContent":["'use strict'\n\nvar base58 = require('bs58')\nvar Buffer = require('safe-buffer').Buffer\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var checksum = checksumFn(payload)\n\n    return base58.encode(Buffer.concat([\n      payload,\n      checksum\n    ], payload.length + 4))\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","const errors = {\n  IMPOSSIBLE_CASE: 'Impossible case. Please create issue.',\n  TWEAK_ADD:\n    'The tweak was out of range or the resulted private key is invalid',\n  TWEAK_MUL: 'The tweak was out of range or equal to zero',\n  CONTEXT_RANDOMIZE_UNKNOW: 'Unknow error on context randomization',\n  SECKEY_INVALID: 'Private Key is invalid',\n  PUBKEY_PARSE: 'Public Key could not be parsed',\n  PUBKEY_SERIALIZE: 'Public Key serialization error',\n  PUBKEY_COMBINE: 'The sum of the public keys is not valid',\n  SIG_PARSE: 'Signature could not be parsed',\n  SIGN: 'The nonce generation function failed, or the private key was invalid',\n  RECOVER: 'Public key could not be recover',\n  ECDH: 'Scalar was invalid (zero or overflow)'\n}\n\nfunction assert (cond, msg) {\n  if (!cond) throw new Error(msg)\n}\n\nfunction isUint8Array (name, value, length) {\n  assert(value instanceof Uint8Array, `Expected ${name} to be an Uint8Array`)\n\n  if (length !== undefined) {\n    if (Array.isArray(length)) {\n      const numbers = length.join(', ')\n      const msg = `Expected ${name} to be an Uint8Array with length [${numbers}]`\n      assert(length.includes(value.length), msg)\n    } else {\n      const msg = `Expected ${name} to be an Uint8Array with length ${length}`\n      assert(value.length === length, msg)\n    }\n  }\n}\n\nfunction isCompressed (value) {\n  assert(toTypeString(value) === 'Boolean', 'Expected compressed to be a Boolean')\n}\n\nfunction getAssertedOutput (output = (len) => new Uint8Array(len), length) {\n  if (typeof output === 'function') output = output(length)\n  isUint8Array('output', output, length)\n  return output\n}\n\nfunction toTypeString (value) {\n  return Object.prototype.toString.call(value).slice(8, -1)\n}\n\nmodule.exports = (secp256k1) => {\n  return {\n    contextRandomize (seed) {\n      assert(\n        seed === null || seed instanceof Uint8Array,\n        'Expected seed to be an Uint8Array or null'\n      )\n      if (seed !== null) isUint8Array('seed', seed, 32)\n\n      switch (secp256k1.contextRandomize(seed)) {\n        case 1:\n          throw new Error(errors.CONTEXT_RANDOMIZE_UNKNOW)\n      }\n    },\n\n    privateKeyVerify (seckey) {\n      isUint8Array('private key', seckey, 32)\n\n      return secp256k1.privateKeyVerify(seckey) === 0\n    },\n\n    privateKeyNegate (seckey) {\n      isUint8Array('private key', seckey, 32)\n\n      switch (secp256k1.privateKeyNegate(seckey)) {\n        case 0:\n          return seckey\n        case 1:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n      }\n    },\n\n    privateKeyTweakAdd (seckey, tweak) {\n      isUint8Array('private key', seckey, 32)\n      isUint8Array('tweak', tweak, 32)\n\n      switch (secp256k1.privateKeyTweakAdd(seckey, tweak)) {\n        case 0:\n          return seckey\n        case 1:\n          throw new Error(errors.TWEAK_ADD)\n      }\n    },\n\n    privateKeyTweakMul (seckey, tweak) {\n      isUint8Array('private key', seckey, 32)\n      isUint8Array('tweak', tweak, 32)\n\n      switch (secp256k1.privateKeyTweakMul(seckey, tweak)) {\n        case 0:\n          return seckey\n        case 1:\n          throw new Error(errors.TWEAK_MUL)\n      }\n    },\n\n    publicKeyVerify (pubkey) {\n      isUint8Array('public key', pubkey, [33, 65])\n\n      return secp256k1.publicKeyVerify(pubkey) === 0\n    },\n\n    publicKeyCreate (seckey, compressed = true, output) {\n      isUint8Array('private key', seckey, 32)\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyCreate(output, seckey)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.SECKEY_INVALID)\n        case 2:\n          throw new Error(errors.PUBKEY_SERIALIZE)\n      }\n    },\n\n    publicKeyConvert (pubkey, compressed = true, output) {\n      isUint8Array('public key', pubkey, [33, 65])\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyConvert(output, pubkey)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.PUBKEY_SERIALIZE)\n      }\n    },\n\n    publicKeyNegate (pubkey, compressed = true, output) {\n      isUint8Array('public key', pubkey, [33, 65])\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyNegate(output, pubkey)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n        case 3:\n          throw new Error(errors.PUBKEY_SERIALIZE)\n      }\n    },\n\n    publicKeyCombine (pubkeys, compressed = true, output) {\n      assert(Array.isArray(pubkeys), 'Expected public keys to be an Array')\n      assert(pubkeys.length > 0, 'Expected public keys array will have more than zero items')\n      for (const pubkey of pubkeys) {\n        isUint8Array('public key', pubkey, [33, 65])\n      }\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyCombine(output, pubkeys)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.PUBKEY_COMBINE)\n        case 3:\n          throw new Error(errors.PUBKEY_SERIALIZE)\n      }\n    },\n\n    publicKeyTweakAdd (pubkey, tweak, compressed = true, output) {\n      isUint8Array('public key', pubkey, [33, 65])\n      isUint8Array('tweak', tweak, 32)\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyTweakAdd(output, pubkey, tweak)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.TWEAK_ADD)\n      }\n    },\n\n    publicKeyTweakMul (pubkey, tweak, compressed = true, output) {\n      isUint8Array('public key', pubkey, [33, 65])\n      isUint8Array('tweak', tweak, 32)\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.publicKeyTweakMul(output, pubkey, tweak)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.TWEAK_MUL)\n      }\n    },\n\n    signatureNormalize (sig) {\n      isUint8Array('signature', sig, 64)\n\n      switch (secp256k1.signatureNormalize(sig)) {\n        case 0:\n          return sig\n        case 1:\n          throw new Error(errors.SIG_PARSE)\n      }\n    },\n\n    signatureExport (sig, output) {\n      isUint8Array('signature', sig, 64)\n      output = getAssertedOutput(output, 72)\n\n      const obj = { output, outputlen: 72 }\n      switch (secp256k1.signatureExport(obj, sig)) {\n        case 0:\n          return output.slice(0, obj.outputlen)\n        case 1:\n          throw new Error(errors.SIG_PARSE)\n        case 2:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n      }\n    },\n\n    signatureImport (sig, output) {\n      isUint8Array('signature', sig)\n      output = getAssertedOutput(output, 64)\n\n      switch (secp256k1.signatureImport(output, sig)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.SIG_PARSE)\n        case 2:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n      }\n    },\n\n    ecdsaSign (msg32, seckey, options = {}, output) {\n      isUint8Array('message', msg32, 32)\n      isUint8Array('private key', seckey, 32)\n      assert(toTypeString(options) === 'Object', 'Expected options to be an Object')\n      if (options.data !== undefined) isUint8Array('options.data', options.data)\n      if (options.noncefn !== undefined) assert(toTypeString(options.noncefn) === 'Function', 'Expected options.noncefn to be a Function')\n      output = getAssertedOutput(output, 64)\n\n      const obj = { signature: output, recid: null }\n      switch (secp256k1.ecdsaSign(obj, msg32, seckey, options.data, options.noncefn)) {\n        case 0:\n          return obj\n        case 1:\n          throw new Error(errors.SIGN)\n        case 2:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n      }\n    },\n\n    ecdsaVerify (sig, msg32, pubkey) {\n      isUint8Array('signature', sig, 64)\n      isUint8Array('message', msg32, 32)\n      isUint8Array('public key', pubkey, [33, 65])\n\n      switch (secp256k1.ecdsaVerify(sig, msg32, pubkey)) {\n        case 0:\n          return true\n        case 3:\n          return false\n        case 1:\n          throw new Error(errors.SIG_PARSE)\n        case 2:\n          throw new Error(errors.PUBKEY_PARSE)\n      }\n    },\n\n    ecdsaRecover (sig, recid, msg32, compressed = true, output) {\n      isUint8Array('signature', sig, 64)\n      assert(\n        toTypeString(recid) === 'Number' &&\n          recid >= 0 &&\n          recid <= 3,\n        'Expected recovery id to be a Number within interval [0, 3]'\n      )\n      isUint8Array('message', msg32, 32)\n      isCompressed(compressed)\n      output = getAssertedOutput(output, compressed ? 33 : 65)\n\n      switch (secp256k1.ecdsaRecover(output, sig, recid, msg32)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.SIG_PARSE)\n        case 2:\n          throw new Error(errors.RECOVER)\n        case 3:\n          throw new Error(errors.IMPOSSIBLE_CASE)\n      }\n    },\n\n    ecdh (pubkey, seckey, options = {}, output) {\n      isUint8Array('public key', pubkey, [33, 65])\n      isUint8Array('private key', seckey, 32)\n      assert(toTypeString(options) === 'Object', 'Expected options to be an Object')\n      if (options.data !== undefined) isUint8Array('options.data', options.data)\n      if (options.hashfn !== undefined) {\n        assert(toTypeString(options.hashfn) === 'Function', 'Expected options.hashfn to be a Function')\n        if (options.xbuf !== undefined) isUint8Array('options.xbuf', options.xbuf, 32)\n        if (options.ybuf !== undefined) isUint8Array('options.ybuf', options.ybuf, 32)\n        isUint8Array('output', output)\n      } else {\n        output = getAssertedOutput(output, 32)\n      }\n\n      switch (secp256k1.ecdh(output, pubkey, seckey, options.data, options.hashfn, options.xbuf, options.ybuf)) {\n        case 0:\n          return output\n        case 1:\n          throw new Error(errors.PUBKEY_PARSE)\n        case 2:\n          throw new Error(errors.ECDH)\n      }\n    }\n  }\n}\n","import HDKey from 'hdkey';\nimport * as ethUtil from 'ethereumjs-util';\nimport { Buffer } from 'buffer';\nvar publicToAddress = ethUtil.publicToAddress,\n    toChecksumAddress = ethUtil.toChecksumAddress;\nvar numberToGet = 5;\n\nfunction generateAddresses(account, offset) {\n  var publicKey = account.publicKey,\n      chainCode = account.chainCode,\n      path = account.path;\n  var hdk = new HDKey();\n  hdk.publicKey = new Buffer(publicKey, 'hex');\n  hdk.chainCode = new Buffer(chainCode, 'hex');\n  var addresses = [];\n\n  for (var i = offset; i < numberToGet + offset; i++) {\n    var dkey = hdk.deriveChild(i);\n    var address = publicToAddress(dkey.publicKey, true).toString('hex');\n    addresses.push({\n      dPath: \"\".concat(path, \"/\").concat(i),\n      address: toChecksumAddress(\"0x\".concat(address))\n    });\n  }\n\n  return addresses;\n}\n\nfunction isValidPath(path) {\n  var parts = path.split('/');\n\n  if (parts[0] !== 'm') {\n    return false;\n  }\n\n  if (parts[1] !== \"44'\") {\n    return false;\n  }\n\n  if (parts[2] !== \"60'\" && parts[2] !== \"1'\") {\n    return false;\n  }\n\n  if (parts[3] === undefined) {\n    return true;\n  }\n\n  var accountFieldDigit = Number(parts[3][0]);\n\n  if (isNaN(accountFieldDigit) || accountFieldDigit < 0 || parts[3][1] !== \"'\") {\n    return false;\n  }\n\n  if (parts[4] === undefined) {\n    return true;\n  }\n\n  var changeFieldDigit = Number(parts[4][0]);\n\n  if (isNaN(changeFieldDigit) || changeFieldDigit < 0) {\n    return false;\n  }\n\n  if (parts[5] === undefined) {\n    return true;\n  }\n\n  var addressFieldDigit = Number(parts[5][0]);\n\n  if (isNaN(addressFieldDigit) || addressFieldDigit < 0) {\n    return false;\n  }\n\n  return true;\n}\n\nexport { generateAddresses, isValidPath };","\nconst { EthereumRpcError, EthereumProviderError } = require('./classes')\nconst { getMessageFromCode } = require('./utils')\nconst ERROR_CODES = require('./errorCodes.json')\n\nmodule.exports = {\n  rpc: {\n    /**\n     * Get a JSON RPC 2.0 Parse (-32700) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    parse: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.parse, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Invalid Request (-32600) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidRequest: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidRequest, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Invalid Params (-32602) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidParams: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidParams, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Method Not Found (-32601) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    methodNotFound: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.methodNotFound, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Internal (-32603) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    internal: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.internal, opts\n    ),\n\n    /**\n     * Get a JSON RPC 2.0 Server error.\n     * Permits integer error codes in the [ -32099 <= -32005 ] range.\n     * Codes -32000 through -32004 are reserved by EIP 1474.\n     * \n     * @param {Object|string} opts - Options object\n     * @param {number} opts.code - The error code\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    server: (opts) => {\n      if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum RPC Server errors must provide single object argument.')\n      }\n      const { code } = opts\n      if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n        throw new Error(\n          '\"code\" must be an integer such that: -32099 <= code <= -32005'\n        )\n      }\n      return getEthJsonRpcError(code, opts)\n    },\n\n    /**\n     * Get an Ethereum JSON RPC Invalid Input (-32000) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    invalidInput: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.invalidInput, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Resource Not Found (-32001) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    resourceNotFound: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.resourceNotFound, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Resource Unavailable (-32002) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    resourceUnavailable: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.resourceUnavailable, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Transaction Rejected (-32003) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    transactionRejected: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.transactionRejected, opts\n    ),\n\n    /**\n     * Get an Ethereum JSON RPC Method Not Supported (-32004) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumRpcError} The error\n     */\n    methodNotSupported: (opts) => getEthJsonRpcError(\n      ERROR_CODES.rpc.methodNotSupported, opts\n    ),\n  },\n\n  provider: {\n    /**\n     * Get an Ethereum Provider User Rejected Request (4001) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    userRejectedRequest: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.userRejectedRequest, opts\n      )\n    },\n\n    /**\n     * Get an Ethereum Provider Unauthorized (4100) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    unauthorized: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.unauthorized, opts\n      )\n    },\n\n    /**\n     * Get an Ethereum Provider Unsupported Method (4200) error.\n     * \n     * @param {Object|string} [opts] - Options object or error message string\n     * @param {string} [opts.message] - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    unsupportedMethod: (opts) => {\n      return getEthProviderError(\n        ERROR_CODES.provider.unsupportedMethod, opts\n      )\n    },\n\n    /**\n     * Get a custom Ethereum Provider error.\n     * \n     * @param {Object|string} opts - Options object\n     * @param {number} opts.code - The error code\n     * @param {string} opts.message - The error message\n     * @param {any} [opts.data] - Error data\n     * @returns {EthereumProviderError} The error\n     */\n    custom: (opts) => {\n      if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n        throw new Error('Ethereum Provider custom errors must provide single object argument.')\n      }\n      const { code, message, data } = opts\n      if (!message || typeof message !== 'string') throw new Error(\n        '\"message\" must be a nonempty string'\n      )\n      return new EthereumProviderError(code, message, data)\n    },\n  },\n}\n\n// Internal\n\nfunction getEthJsonRpcError(code, opts) {\n  const [ message, data ] = validateOpts(opts)\n  return new EthereumRpcError(\n    code,\n    message || getMessageFromCode(code),\n    data\n  )\n}\n\nfunction getEthProviderError(code, opts) {\n  const [ message, data ] = validateOpts(opts)\n  return new EthereumProviderError(\n    code,\n    message || getMessageFromCode(code),\n    data\n  )\n}\n\nfunction validateOpts (opts) {\n  let message, data\n  if (opts) {\n    if (typeof opts === 'string') {\n      message = opts\n    } else if (typeof opts === 'object' && !Array.isArray(opts)) {\n      message = opts.message\n      data = opts.data\n    }\n  }\n  return [ message, data ]\n}\n","\nconst { EthereumRpcError, EthereumProviderError } = require('./src/classes')\nconst {\n  serializeError, getMessageFromCode,\n} = require('./src/utils')\nconst ethErrors = require('./src/errors')\nconst ERROR_CODES = require('./src/errorCodes.json')\n\nmodule.exports = {\n  ethErrors,\n  EthereumRpcError,\n  EthereumProviderError,\n  serializeError,\n  getMessageFromCode,\n  /** @type ErrorCodes */\n  ERROR_CODES,\n}\n\n// Types\n\n/**\n * @typedef {Object} EthereumProviderErrorCodes\n * @property {number} userRejectedRequest\n * @property {number} unauthorized\n * @property {number} unsupportedMethod\n */\n\n/**\n * @typedef {Object} EthereumRpcErrorCodes\n * @property {number} parse\n * @property {number} invalidRequest\n * @property {number} invalidParams\n * @property {number} methodNotFound\n * @property {number} internal\n * @property {number} invalidInput\n * @property {number} resourceNotFound\n * @property {number} resourceUnavailable\n * @property {number} transactionRejected\n * @property {number} methodNotSupported\n */\n\n/**\n * @typedef ErrorCodes\n * @property {EthereumRpcErrorCodes} rpc\n * @property {EthereumProviderErrorCodes} provider\n */\n","module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar arr = []\nvar replacerStack = []\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer) {\n  decirc(obj, '', [], undefined)\n  var res\n  if (replacerStack.length === 0) {\n    res = JSON.stringify(obj, replacer, spacer)\n  } else {\n    res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n  }\n  while (arr.length !== 0) {\n    var part = arr.pop()\n    if (part.length === 4) {\n      Object.defineProperty(part[0], part[1], part[3])\n    } else {\n      part[0][part[1]] = part[2]\n    }\n  }\n  return res\n}\nfunction decirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, stack, val)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, stack, val)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer) {\n  var tmp = deterministicDecirc(obj, '', [], undefined) || obj\n  var res\n  if (replacerStack.length === 0) {\n    res = JSON.stringify(tmp, replacer, spacer)\n  } else {\n    res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n  }\n  while (arr.length !== 0) {\n    var part = arr.pop()\n    if (part.length === 4) {\n      Object.defineProperty(part[0], part[1], part[3])\n    } else {\n      part[0][part[1]] = part[2]\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    if (typeof val.toJSON === 'function') {\n      return\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, stack, val)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, stack, val)\n        tmp[key] = val[key]\n      }\n      if (parent !== undefined) {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as [Circular]\nfunction replaceGetterValues (replacer) {\n  replacer = replacer !== undefined ? replacer : function (k, v) { return v }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = '[Circular]'\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n","const xhr = process.browser ? require('xhr') : require('request')\nconst inherits = require('util').inherits\nconst createPayload = require('../util/create-payload.js')\nconst Subprovider = require('./subprovider.js')\nconst { ethErrors, serializeError } = require('eth-json-rpc-errors')\n\n\nmodule.exports = RpcSource\n\ninherits(RpcSource, Subprovider)\n\nfunction RpcSource(opts) {\n  const self = this\n  self.rpcUrl = opts.rpcUrl\n}\n\nRpcSource.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  const targetUrl = self.rpcUrl\n\n  // overwrite id to conflict with other concurrent users\n  const sanitizedPayload = sanitizePayload(payload)\n  const newPayload = createPayload(sanitizedPayload)\n\n  xhr({\n    uri: targetUrl,\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(newPayload),\n    rejectUnauthorized: false,\n    timeout: 20000,\n  }, function(err, res, body) {\n    if (err) return end(serializeError(err))\n\n    // check for error code\n    switch (res.statusCode) {\n      case 405:\n        return end(ethErrors.rpc.methodNotFound())\n      case 504: // Gateway timeout\n        return (function(){\n          let msg = `Gateway timeout. The request took too long to process. `\n          msg += `This can happen when querying logs over too wide a block range.`\n          const err = new Error(msg)\n          return end(serializeError(err))\n        })()\n      case 429: // Too many requests (rate limiting)\n        return (function(){\n          const err = new Error(`Too Many Requests`)\n          return end(serializeError(err))\n        })()\n      default:\n        if (res.statusCode != 200) {\n          const msg = 'Unknown Error: ' + res.body\n          const err = new Error(msg)\n          return end(serializeError(err))\n        }\n    }\n\n    // parse response\n    let data\n    try {\n      data = JSON.parse(body)\n    } catch (err) {\n      console.error(err.stack)\n      return end(serializeError(err))\n    }\n    if (data.error) return end(data.error)\n\n    end(null, data.result)\n  })\n}\n\n// drops any non-standard params\nfunction sanitizePayload (payload) {\n  return {\n    id: payload.id,\n    jsonrpc: payload.jsonrpc,\n    method: payload.method,\n    params: payload.params,\n  }\n}","import Web3ProviderEngine from 'web3-provider-engine';\nimport RpcSource from 'web3-provider-engine/subproviders/rpc';\nimport HookedWalletSubprovider from 'web3-provider-engine/subproviders/hooked-wallet';\nimport SubscriptionSubprovider from 'web3-provider-engine/subproviders/subscriptions';\nimport FilterSubprovider from 'web3-provider-engine/subproviders/filters';\n\nfunction createProvider(config) {\n  var getAccounts = config.getAccounts,\n      signTransaction = config.signTransaction,\n      rpcUrl = config.rpcUrl,\n      processMessage = config.processMessage,\n      processPersonalMessage = config.processPersonalMessage,\n      signMessage = config.signMessage,\n      signPersonalMessage = config.signPersonalMessage;\n  var idMgmt = getAccounts && new HookedWalletSubprovider({\n    getAccounts: getAccounts,\n    signTransaction: signTransaction,\n    processMessage: processMessage,\n    processPersonalMessage: processPersonalMessage,\n    signMessage: signMessage,\n    signPersonalMessage: signPersonalMessage\n  });\n  var rpcSubProvider = new RpcSource({\n    rpcUrl: rpcUrl.includes('http') ? rpcUrl : \"https://\".concat(rpcUrl)\n  });\n  var provider = new Web3ProviderEngine();\n  provider.addProvider(new SubscriptionSubprovider());\n  provider.addProvider(new FilterSubprovider());\n  idMgmt && provider.addProvider(idMgmt);\n  provider.addProvider(rpcSubProvider);\n  provider.start();\n  return provider;\n}\n\nexport default createProvider;","'use strict'\n\nvar createHash = require('create-hash')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  var tmp = createHash('sha256').update(buffer).digest()\n  return createHash('sha256').update(tmp).digest()\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport 'web3-provider-engine';\nimport 'web3-provider-engine/subproviders/rpc';\nimport 'web3-provider-engine/subproviders/hooked-wallet';\nimport 'web3-provider-engine/subproviders/subscriptions';\nimport 'web3-provider-engine/subproviders/filters';\nimport createProvider from './providerEngine-81ff17e9.js';\nimport 'hdkey';\nimport 'ethereumjs-util';\nimport 'buffer';\nimport { isValidPath, generateAddresses } from './hd-wallet-642b97e3.js';\nvar trezorIcon = \"\\n\\t<svg width=\\\"40px\\\" height=\\\"40px\\\" viewBox=\\\"0 0 114 166\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n\\t\\t<g id=\\\"Styles\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n\\t\\t\\t<path d=\\\"M17,51.453125 L17,40 C17,17.90861 34.90861,-1.0658141e-14 57,-1.0658141e-14 C79.09139,-1.0658141e-14 97,17.90861 97,40 L97,51.453125 L113.736328,51.453125 L113.736328,139.193359 L57.5,166 L0,139.193359 L0,51.453125 L17,51.453125 Z M37,51.453125 L77,51.453125 L77,40 L76.9678398,40 C76.3750564,29.406335 67.6617997,21 57,21 C46.3382003,21 37.6249436,29.406335 37.0321602,40 L37,40 L37,51.453125 Z M23,72 L23,125 L56.8681641,140.966797 L91,125 L91,72 L23,72 Z\\\" id=\\\"Trezor-logo\\\" fill=\\\"currentColor\\\"></path>\\n\\t\\t</g>\\n\\t</svg>\\n\";\nvar TREZOR_DEFAULT_PATH = \"m/44'/60'/0'/0\";\n\nfunction trezor(options) {\n  var rpcUrl = options.rpcUrl,\n      networkId = options.networkId,\n      email = options.email,\n      appUrl = options.appUrl,\n      preferred = options.preferred,\n      label = options.label,\n      iconSrc = options.iconSrc,\n      svg = options.svg;\n  return {\n    name: label || 'Trezor',\n    svg: svg || trezorIcon,\n    iconSrc: iconSrc,\n    wallet: function () {\n      var _wallet = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(helpers) {\n        var BigNumber, networkName, resetWalletState, provider;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                BigNumber = helpers.BigNumber, networkName = helpers.networkName, resetWalletState = helpers.resetWalletState;\n                _context4.next = 3;\n                return trezorProvider({\n                  rpcUrl: rpcUrl,\n                  networkId: networkId,\n                  email: email,\n                  appUrl: appUrl,\n                  BigNumber: BigNumber,\n                  networkName: networkName,\n                  resetWalletState: resetWalletState\n                });\n\n              case 3:\n                provider = _context4.sent;\n                return _context4.abrupt(\"return\", {\n                  provider: provider,\n                  \"interface\": {\n                    name: 'Trezor',\n                    connect: provider.enable,\n                    disconnect: provider.disconnect,\n                    address: {\n                      get: function () {\n                        var _get = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                          return regeneratorRuntime.wrap(function _callee$(_context) {\n                            while (1) {\n                              switch (_context.prev = _context.next) {\n                                case 0:\n                                  return _context.abrupt(\"return\", provider.getPrimaryAddress());\n\n                                case 1:\n                                case \"end\":\n                                  return _context.stop();\n                              }\n                            }\n                          }, _callee);\n                        }));\n\n                        function get() {\n                          return _get.apply(this, arguments);\n                        }\n\n                        return get;\n                      }()\n                    },\n                    network: {\n                      get: function () {\n                        var _get2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                            while (1) {\n                              switch (_context2.prev = _context2.next) {\n                                case 0:\n                                  return _context2.abrupt(\"return\", networkId);\n\n                                case 1:\n                                case \"end\":\n                                  return _context2.stop();\n                              }\n                            }\n                          }, _callee2);\n                        }));\n\n                        function get() {\n                          return _get2.apply(this, arguments);\n                        }\n\n                        return get;\n                      }()\n                    },\n                    balance: {\n                      get: function () {\n                        var _get3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n                          var address;\n                          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                            while (1) {\n                              switch (_context3.prev = _context3.next) {\n                                case 0:\n                                  address = provider.getPrimaryAddress();\n                                  return _context3.abrupt(\"return\", address && provider.getBalance(address));\n\n                                case 2:\n                                case \"end\":\n                                  return _context3.stop();\n                              }\n                            }\n                          }, _callee3);\n                        }));\n\n                        function get() {\n                          return _get3.apply(this, arguments);\n                        }\n\n                        return get;\n                      }()\n                    }\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function wallet(_x) {\n        return _wallet.apply(this, arguments);\n      }\n\n      return wallet;\n    }(),\n    type: 'hardware',\n    desktop: true,\n    mobile: true,\n    osExclusions: ['iOS'],\n    preferred: preferred\n  };\n}\n\nfunction trezorProvider(_x2) {\n  return _trezorProvider.apply(this, arguments);\n}\n\nfunction _trezorProvider() {\n  _trezorProvider = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(options) {\n    var TrezorConnectLibrary, EthereumTx, ethUtil, TrezorConnect, DEVICE_EVENT, DEVICE, networkId, email, appUrl, rpcUrl, BigNumber, networkName, resetWalletState, dPath, addressToPath, enabled, customPath, account, provider, disconnect, setPath, _setPath, isCustomPath, enable, getAddress, _getAddress, addresses, setPrimaryAccount, getPublicKey, _getPublicKey, getPrimaryAddress, getMoreAccounts, _getMoreAccounts, _getAccounts, _getAccounts2, getBalances, getBalance, trezorSignTransaction, _signTransaction, _signTransaction2, _signMessage, _signMessage2;\n\n    return regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _signMessage2 = function _signMessage4() {\n              _signMessage2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(message) {\n                var _, address, path;\n\n                return regeneratorRuntime.wrap(function _callee12$(_context12) {\n                  while (1) {\n                    switch (_context12.prev = _context12.next) {\n                      case 0:\n                        if (!(addressToPath.size === 0)) {\n                          _context12.next = 3;\n                          break;\n                        }\n\n                        _context12.next = 3;\n                        return enable();\n\n                      case 3:\n                        _ = _slicedToArray(_toConsumableArray(addressToPath.entries())[0], 2), address = _[0], path = _[1];\n                        return _context12.abrupt(\"return\", new Promise(function (resolve, reject) {\n                          TrezorConnect.ethereumSignMessage({\n                            path: path,\n                            message: ethUtil.stripHexPrefix(message.data),\n                            hex: true\n                          }).then(function (response) {\n                            if (response.success) {\n                              if (response.payload.address !== ethUtil.toChecksumAddress(address)) {\n                                reject(new Error('signature doesnt match the right address'));\n                              }\n\n                              var signature = \"0x\".concat(response.payload.signature);\n                              resolve(signature);\n                            } else {\n                              reject(new Error(response.payload && response.payload.error || 'There was an error signing a message'));\n                            }\n                          });\n                        }));\n\n                      case 5:\n                      case \"end\":\n                        return _context12.stop();\n                    }\n                  }\n                }, _callee12);\n              }));\n              return _signMessage2.apply(this, arguments);\n            };\n\n            _signMessage = function _signMessage3(_x9) {\n              return _signMessage2.apply(this, arguments);\n            };\n\n            _signTransaction2 = function _signTransaction4() {\n              _signTransaction2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(transactionData) {\n                var path, transaction, trezorResult, signature;\n                return regeneratorRuntime.wrap(function _callee11$(_context11) {\n                  while (1) {\n                    switch (_context11.prev = _context11.next) {\n                      case 0:\n                        if (!(addressToPath.size === 0)) {\n                          _context11.next = 3;\n                          break;\n                        }\n\n                        _context11.next = 3;\n                        return enable();\n\n                      case 3:\n                        path = _toConsumableArray(addressToPath.values())[0];\n                        transaction = new EthereumTx.Transaction(transactionData, {\n                          chain: networkName(networkId)\n                        });\n                        _context11.next = 7;\n                        return trezorSignTransaction(path, transactionData);\n\n                      case 7:\n                        trezorResult = _context11.sent;\n\n                        if (trezorResult.success) {\n                          _context11.next = 10;\n                          break;\n                        }\n\n                        throw new Error(trezorResult.payload.error);\n\n                      case 10:\n                        signature = trezorResult.payload;\n                        transaction.v = signature.v;\n                        transaction.r = signature.r;\n                        transaction.s = signature.s;\n                        return _context11.abrupt(\"return\", \"0x\".concat(transaction.serialize().toString('hex')));\n\n                      case 15:\n                      case \"end\":\n                        return _context11.stop();\n                    }\n                  }\n                }, _callee11);\n              }));\n              return _signTransaction2.apply(this, arguments);\n            };\n\n            _signTransaction = function _signTransaction3(_x8) {\n              return _signTransaction2.apply(this, arguments);\n            };\n\n            trezorSignTransaction = function _trezorSignTransactio(path, transactionData) {\n              var nonce = transactionData.nonce,\n                  gasPrice = transactionData.gasPrice,\n                  gas = transactionData.gas,\n                  to = transactionData.to,\n                  value = transactionData.value,\n                  data = transactionData.data;\n              return TrezorConnect.ethereumSignTransaction({\n                path: path,\n                transaction: {\n                  nonce: nonce,\n                  gasPrice: gasPrice,\n                  gasLimit: gas,\n                  to: to,\n                  value: value || '',\n                  data: data || '',\n                  chainId: networkId\n                }\n              });\n            };\n\n            getBalance = function _getBalance(address) {\n              return new Promise(function (resolve, reject) {\n                provider.sendAsync({\n                  jsonrpc: '2.0',\n                  method: 'eth_getBalance',\n                  params: [address, 'latest'],\n                  id: 42\n                }, function (e, res) {\n                  e && reject(e);\n                  var result = res && res.result;\n\n                  if (result != null) {\n                    resolve(new BigNumber(result).toString(10));\n                  } else {\n                    resolve(null);\n                  }\n                });\n              });\n            };\n\n            getBalances = function _getBalances(addresses) {\n              return Promise.all(addresses.map(function (address) {\n                return new Promise( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(resolve) {\n                    var balance;\n                    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.next = 2;\n                            return getBalance(address);\n\n                          case 2:\n                            balance = _context5.sent;\n                            resolve({\n                              address: address,\n                              balance: balance\n                            });\n\n                          case 4:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n\n                  return function (_x7) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n              }));\n            };\n\n            _getAccounts2 = function _getAccounts4() {\n              _getAccounts2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(getMore) {\n                var addressInfo;\n                return regeneratorRuntime.wrap(function _callee10$(_context10) {\n                  while (1) {\n                    switch (_context10.prev = _context10.next) {\n                      case 0:\n                        if (enabled) {\n                          _context10.next = 2;\n                          break;\n                        }\n\n                        return _context10.abrupt(\"return\", [undefined]);\n\n                      case 2:\n                        if (!(addressToPath.size > 0 && !getMore)) {\n                          _context10.next = 4;\n                          break;\n                        }\n\n                        return _context10.abrupt(\"return\", addresses());\n\n                      case 4:\n                        if (dPath === '') {\n                          dPath = TREZOR_DEFAULT_PATH;\n                        }\n\n                        if (account) {\n                          _context10.next = 15;\n                          break;\n                        }\n\n                        _context10.prev = 6;\n                        _context10.next = 9;\n                        return getPublicKey();\n\n                      case 9:\n                        account = _context10.sent;\n                        _context10.next = 15;\n                        break;\n\n                      case 12:\n                        _context10.prev = 12;\n                        _context10.t0 = _context10[\"catch\"](6);\n                        throw _context10.t0;\n\n                      case 15:\n                        addressInfo = generateAddresses(account, addressToPath.size);\n                        addressInfo.forEach(function (_ref4) {\n                          var dPath = _ref4.dPath,\n                              address = _ref4.address;\n                          addressToPath.set(address, dPath);\n                        });\n                        return _context10.abrupt(\"return\", addresses());\n\n                      case 18:\n                      case \"end\":\n                        return _context10.stop();\n                    }\n                  }\n                }, _callee10, null, [[6, 12]]);\n              }));\n              return _getAccounts2.apply(this, arguments);\n            };\n\n            _getAccounts = function _getAccounts3(_x6) {\n              return _getAccounts2.apply(this, arguments);\n            };\n\n            _getMoreAccounts = function _getMoreAccounts3() {\n              _getMoreAccounts = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n                var accounts;\n                return regeneratorRuntime.wrap(function _callee9$(_context9) {\n                  while (1) {\n                    switch (_context9.prev = _context9.next) {\n                      case 0:\n                        _context9.next = 2;\n                        return _getAccounts(true);\n\n                      case 2:\n                        accounts = _context9.sent;\n                        return _context9.abrupt(\"return\", getBalances(accounts));\n\n                      case 4:\n                      case \"end\":\n                        return _context9.stop();\n                    }\n                  }\n                }, _callee9);\n              }));\n              return _getMoreAccounts.apply(this, arguments);\n            };\n\n            getMoreAccounts = function _getMoreAccounts2() {\n              return _getMoreAccounts.apply(this, arguments);\n            };\n\n            getPrimaryAddress = function _getPrimaryAddress() {\n              return enabled ? addresses()[0] : undefined;\n            };\n\n            _getPublicKey = function _getPublicKey3() {\n              _getPublicKey = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n                var result;\n                return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                  while (1) {\n                    switch (_context8.prev = _context8.next) {\n                      case 0:\n                        if (dPath) {\n                          _context8.next = 2;\n                          break;\n                        }\n\n                        throw new Error('a derivation path is needed to get the public key');\n\n                      case 2:\n                        _context8.prev = 2;\n                        _context8.next = 5;\n                        return TrezorConnect.getPublicKey({\n                          path: dPath,\n                          coin: 'eth'\n                        });\n\n                      case 5:\n                        result = _context8.sent;\n\n                        if (result.success) {\n                          _context8.next = 8;\n                          break;\n                        }\n\n                        throw new Error(result.payload.error);\n\n                      case 8:\n                        account = {\n                          publicKey: result.payload.publicKey,\n                          chainCode: result.payload.chainCode,\n                          path: result.payload.serializedPath\n                        };\n                        return _context8.abrupt(\"return\", account);\n\n                      case 12:\n                        _context8.prev = 12;\n                        _context8.t0 = _context8[\"catch\"](2);\n                        throw new Error('There was an error accessing your Trezor accounts.');\n\n                      case 15:\n                      case \"end\":\n                        return _context8.stop();\n                    }\n                  }\n                }, _callee8, null, [[2, 12]]);\n              }));\n              return _getPublicKey.apply(this, arguments);\n            };\n\n            getPublicKey = function _getPublicKey2() {\n              return _getPublicKey.apply(this, arguments);\n            };\n\n            setPrimaryAccount = function _setPrimaryAccount(address) {\n              // make a copy and put in an array\n              var accounts = _toConsumableArray(addressToPath.entries());\n\n              var accountIndex = accounts.findIndex(function (_ref) {\n                var _ref2 = _slicedToArray(_ref, 1),\n                    accountAddress = _ref2[0];\n\n                return accountAddress === address;\n              }); // pull the item at the account index out of the array and place at the front\n\n              accounts.unshift(accounts.splice(accountIndex, 1)[0]); // reassign addressToPath to new ordered accounts\n\n              addressToPath = new Map(accounts);\n            };\n\n            addresses = function _addresses() {\n              return Array.from(addressToPath.keys());\n            };\n\n            _getAddress = function _getAddress3() {\n              _getAddress = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(path) {\n                var errorMsg, result;\n                return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                  while (1) {\n                    switch (_context7.prev = _context7.next) {\n                      case 0:\n                        errorMsg = \"Unable to derive address from path \".concat(path);\n                        _context7.prev = 1;\n                        _context7.next = 4;\n                        return TrezorConnect.ethereumGetAddress({\n                          path: path,\n                          showOnTrezor: false\n                        });\n\n                      case 4:\n                        result = _context7.sent;\n\n                        if (result.success) {\n                          _context7.next = 7;\n                          break;\n                        }\n\n                        throw new Error(errorMsg);\n\n                      case 7:\n                        return _context7.abrupt(\"return\", result.payload.address);\n\n                      case 10:\n                        _context7.prev = 10;\n                        _context7.t0 = _context7[\"catch\"](1);\n                        throw new Error(errorMsg);\n\n                      case 13:\n                      case \"end\":\n                        return _context7.stop();\n                    }\n                  }\n                }, _callee7, null, [[1, 10]]);\n              }));\n              return _getAddress.apply(this, arguments);\n            };\n\n            getAddress = function _getAddress2(_x5) {\n              return _getAddress.apply(this, arguments);\n            };\n\n            enable = function _enable() {\n              enabled = true;\n              return _getAccounts();\n            };\n\n            isCustomPath = function _isCustomPath() {\n              return customPath;\n            };\n\n            _setPath = function _setPath3() {\n              _setPath = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(path, custom) {\n                var address;\n                return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        if (isValidPath(path)) {\n                          _context6.next = 2;\n                          break;\n                        }\n\n                        return _context6.abrupt(\"return\", false);\n\n                      case 2:\n                        if (path !== dPath) {\n                          // clear any exsting addresses if different path\n                          addressToPath = new Map();\n                        }\n\n                        if (!custom) {\n                          _context6.next = 17;\n                          break;\n                        }\n\n                        _context6.prev = 4;\n                        _context6.next = 7;\n                        return getAddress(path);\n\n                      case 7:\n                        address = _context6.sent;\n                        addressToPath.set(address, path);\n                        dPath = path;\n                        customPath = true;\n                        return _context6.abrupt(\"return\", true);\n\n                      case 14:\n                        _context6.prev = 14;\n                        _context6.t0 = _context6[\"catch\"](4);\n                        throw new Error(\"There was a problem deriving an address from path \".concat(path));\n\n                      case 17:\n                        customPath = false;\n                        dPath = path;\n                        return _context6.abrupt(\"return\", true);\n\n                      case 20:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6, null, [[4, 14]]);\n              }));\n              return _setPath.apply(this, arguments);\n            };\n\n            setPath = function _setPath2(_x3, _x4) {\n              return _setPath.apply(this, arguments);\n            };\n\n            disconnect = function _disconnect() {\n              dPath = '';\n              addressToPath = new Map();\n              enabled = false;\n              provider.stop();\n            };\n\n            _context13.next = 25;\n            return import('trezor-connect');\n\n          case 25:\n            TrezorConnectLibrary = _context13.sent;\n            _context13.next = 28;\n            return import('ethereumjs-tx');\n\n          case 28:\n            EthereumTx = _context13.sent;\n            _context13.next = 31;\n            return import('ethereumjs-util');\n\n          case 31:\n            ethUtil = _context13.sent;\n            TrezorConnect = TrezorConnectLibrary[\"default\"], DEVICE_EVENT = TrezorConnectLibrary.DEVICE_EVENT, DEVICE = TrezorConnectLibrary.DEVICE;\n            networkId = options.networkId, email = options.email, appUrl = options.appUrl, rpcUrl = options.rpcUrl, BigNumber = options.BigNumber, networkName = options.networkName, resetWalletState = options.resetWalletState;\n            dPath = '';\n            addressToPath = new Map();\n            enabled = false;\n            customPath = false;\n            TrezorConnect.manifest({\n              email: email,\n              appUrl: appUrl\n            });\n            provider = createProvider({\n              getAccounts: function getAccounts(callback) {\n                _getAccounts().then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              signTransaction: function signTransaction(transactionData, callback) {\n                _signTransaction(transactionData).then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              processMessage: function processMessage(messageData, callback) {\n                _signMessage(messageData).then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              processPersonalMessage: function processPersonalMessage(messageData, callback) {\n                _signMessage(messageData).then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              signMessage: function signMessage(messageData, callback) {\n                _signMessage(messageData).then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              signPersonalMessage: function signPersonalMessage(messageData, callback) {\n                _signMessage(messageData).then(function (res) {\n                  return callback(null, res);\n                })[\"catch\"](function (err) {\n                  return callback(err, null);\n                });\n              },\n              rpcUrl: rpcUrl\n            });\n            TrezorConnect.on(DEVICE_EVENT, function (event) {\n              if (event.type === DEVICE.DISCONNECT) {\n                provider.stop();\n                resetWalletState({\n                  disconnected: true,\n                  walletName: 'Trezor'\n                });\n              }\n            });\n            provider.setPath = setPath;\n            provider.dPath = dPath;\n            provider.enable = enable;\n            provider.setPrimaryAccount = setPrimaryAccount;\n            provider.getPrimaryAddress = getPrimaryAddress;\n            provider.getAccounts = _getAccounts;\n            provider.getMoreAccounts = getMoreAccounts;\n            provider.getBalance = getBalance;\n            provider.getBalances = getBalances;\n            provider.send = provider.sendAsync;\n            provider.disconnect = disconnect;\n            provider.isCustomPath = isCustomPath;\n            return _context13.abrupt(\"return\", provider);\n\n          case 54:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _trezorProvider.apply(this, arguments);\n}\n\nexport default trezor;","module.exports = require('./lib')(require('./lib/elliptic'))\n","var assert = require('assert')\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = require('crypto')\nvar bs58check = require('bs58check')\nvar secp256k1 = require('secp256k1')\n\nvar MASTER_SECRET = Buffer.from('Bitcoin seed', 'utf8')\nvar HARDENED_OFFSET = 0x80000000\nvar LEN = 78\n\n// Bitcoin hardcoded by default, can use package `coininfo` for others\nvar BITCOIN_VERSIONS = {private: 0x0488ADE4, public: 0x0488B21E}\n\nfunction HDKey (versions) {\n  this.versions = versions || BITCOIN_VERSIONS\n  this.depth = 0\n  this.index = 0\n  this._privateKey = null\n  this._publicKey = null\n  this.chainCode = null\n  this._fingerprint = 0\n  this.parentFingerprint = 0\n}\n\nObject.defineProperty(HDKey.prototype, 'fingerprint', { get: function () { return this._fingerprint } })\nObject.defineProperty(HDKey.prototype, 'identifier', { get: function () { return this._identifier } })\nObject.defineProperty(HDKey.prototype, 'pubKeyHash', { get: function () { return this.identifier } })\n\nObject.defineProperty(HDKey.prototype, 'privateKey', {\n  get: function () {\n    return this._privateKey\n  },\n  set: function (value) {\n    assert.equal(value.length, 32, 'Private key must be 32 bytes.')\n    assert(secp256k1.privateKeyVerify(value) === true, 'Invalid private key')\n\n    this._privateKey = value\n    this._publicKey = Buffer.from(secp256k1.publicKeyCreate(value, true))\n    this._identifier = hash160(this.publicKey)\n    this._fingerprint = this._identifier.slice(0, 4).readUInt32BE(0)\n  }\n})\n\nObject.defineProperty(HDKey.prototype, 'publicKey', {\n  get: function () {\n    return this._publicKey\n  },\n  set: function (value) {\n    assert(value.length === 33 || value.length === 65, 'Public key must be 33 or 65 bytes.')\n    assert(secp256k1.publicKeyVerify(value) === true, 'Invalid public key')\n\n    this._publicKey = Buffer.from(secp256k1.publicKeyConvert(value, true)) // force compressed point\n    this._identifier = hash160(this.publicKey)\n    this._fingerprint = this._identifier.slice(0, 4).readUInt32BE(0)\n    this._privateKey = null\n  }\n})\n\nObject.defineProperty(HDKey.prototype, 'privateExtendedKey', {\n  get: function () {\n    if (this._privateKey) return bs58check.encode(serialize(this, this.versions.private, Buffer.concat([Buffer.alloc(1, 0), this.privateKey])))\n    else return null\n  }\n})\n\nObject.defineProperty(HDKey.prototype, 'publicExtendedKey', {\n  get: function () {\n    return bs58check.encode(serialize(this, this.versions.public, this.publicKey))\n  }\n})\n\nHDKey.prototype.derive = function (path) {\n  if (path === 'm' || path === 'M' || path === \"m'\" || path === \"M'\") {\n    return this\n  }\n\n  var entries = path.split('/')\n  var hdkey = this\n  entries.forEach(function (c, i) {\n    if (i === 0) {\n      assert(/^[mM]{1}/.test(c), 'Path must start with \"m\" or \"M\"')\n      return\n    }\n\n    var hardened = (c.length > 1) && (c[c.length - 1] === \"'\")\n    var childIndex = parseInt(c, 10) // & (HARDENED_OFFSET - 1)\n    assert(childIndex < HARDENED_OFFSET, 'Invalid index')\n    if (hardened) childIndex += HARDENED_OFFSET\n\n    hdkey = hdkey.deriveChild(childIndex)\n  })\n\n  return hdkey\n}\n\nHDKey.prototype.deriveChild = function (index) {\n  var isHardened = index >= HARDENED_OFFSET\n  var indexBuffer = Buffer.allocUnsafe(4)\n  indexBuffer.writeUInt32BE(index, 0)\n\n  var data\n\n  if (isHardened) { // Hardened child\n    assert(this.privateKey, 'Could not derive hardened child key')\n\n    var pk = this.privateKey\n    var zb = Buffer.alloc(1, 0)\n    pk = Buffer.concat([zb, pk])\n\n    // data = 0x00 || ser256(kpar) || ser32(index)\n    data = Buffer.concat([pk, indexBuffer])\n  } else { // Normal child\n    // data = serP(point(kpar)) || ser32(index)\n    //      = serP(Kpar) || ser32(index)\n    data = Buffer.concat([this.publicKey, indexBuffer])\n  }\n\n  var I = crypto.createHmac('sha512', this.chainCode).update(data).digest()\n  var IL = I.slice(0, 32)\n  var IR = I.slice(32)\n\n  var hd = new HDKey(this.versions)\n\n  // Private parent key -> private child key\n  if (this.privateKey) {\n    // ki = parse256(IL) + kpar (mod n)\n    try {\n      hd.privateKey = Buffer.from(secp256k1.privateKeyTweakAdd(Buffer.from(this.privateKey), IL))\n      // throw if IL >= n || (privateKey + IL) === 0\n    } catch (err) {\n      // In case parse256(IL) >= n or ki == 0, one should proceed with the next value for i\n      return this.deriveChild(index + 1)\n    }\n  // Public parent key -> public child key\n  } else {\n    // Ki = point(parse256(IL)) + Kpar\n    //    = G*IL + Kpar\n    try {\n      hd.publicKey = Buffer.from(secp256k1.publicKeyTweakAdd(Buffer.from(this.publicKey), IL, true))\n      // throw if IL >= n || (g**IL + publicKey) is infinity\n    } catch (err) {\n      // In case parse256(IL) >= n or Ki is the point at infinity, one should proceed with the next value for i\n      return this.deriveChild(index + 1)\n    }\n  }\n\n  hd.chainCode = IR\n  hd.depth = this.depth + 1\n  hd.parentFingerprint = this.fingerprint// .readUInt32BE(0)\n  hd.index = index\n\n  return hd\n}\n\nHDKey.prototype.sign = function (hash) {\n  return Buffer.from(secp256k1.ecdsaSign(hash, this.privateKey).signature)\n}\n\nHDKey.prototype.verify = function (hash, signature) {\n  return secp256k1.ecdsaVerify(\n    Uint8Array.from(signature),\n    Uint8Array.from(hash),\n    Uint8Array.from(this.publicKey)\n  )\n}\n\nHDKey.prototype.wipePrivateData = function () {\n  if (this._privateKey) crypto.randomBytes(this._privateKey.length).copy(this._privateKey)\n  this._privateKey = null\n  return this\n}\n\nHDKey.prototype.toJSON = function () {\n  return {\n    xpriv: this.privateExtendedKey,\n    xpub: this.publicExtendedKey\n  }\n}\n\nHDKey.fromMasterSeed = function (seedBuffer, versions) {\n  var I = crypto.createHmac('sha512', MASTER_SECRET).update(seedBuffer).digest()\n  var IL = I.slice(0, 32)\n  var IR = I.slice(32)\n\n  var hdkey = new HDKey(versions)\n  hdkey.chainCode = IR\n  hdkey.privateKey = IL\n\n  return hdkey\n}\n\nHDKey.fromExtendedKey = function (base58key, versions) {\n  // => version(4) || depth(1) || fingerprint(4) || index(4) || chain(32) || key(33)\n  versions = versions || BITCOIN_VERSIONS\n  var hdkey = new HDKey(versions)\n\n  var keyBuffer = bs58check.decode(base58key)\n\n  var version = keyBuffer.readUInt32BE(0)\n  assert(version === versions.private || version === versions.public, 'Version mismatch: does not match private or public')\n\n  hdkey.depth = keyBuffer.readUInt8(4)\n  hdkey.parentFingerprint = keyBuffer.readUInt32BE(5)\n  hdkey.index = keyBuffer.readUInt32BE(9)\n  hdkey.chainCode = keyBuffer.slice(13, 45)\n\n  var key = keyBuffer.slice(45)\n  if (key.readUInt8(0) === 0) { // private\n    assert(version === versions.private, 'Version mismatch: version does not match private')\n    hdkey.privateKey = key.slice(1) // cut off first 0x0 byte\n  } else {\n    assert(version === versions.public, 'Version mismatch: version does not match public')\n    hdkey.publicKey = key\n  }\n\n  return hdkey\n}\n\nHDKey.fromJSON = function (obj) {\n  return HDKey.fromExtendedKey(obj.xpriv)\n}\n\nfunction serialize (hdkey, version, key) {\n  // => version(4) || depth(1) || fingerprint(4) || index(4) || chain(32) || key(33)\n  var buffer = Buffer.allocUnsafe(LEN)\n\n  buffer.writeUInt32BE(version, 0)\n  buffer.writeUInt8(hdkey.depth, 4)\n\n  var fingerprint = hdkey.depth ? hdkey.parentFingerprint : 0x00000000\n  buffer.writeUInt32BE(fingerprint, 5)\n  buffer.writeUInt32BE(hdkey.index, 9)\n\n  hdkey.chainCode.copy(buffer, 13)\n  key.copy(buffer, 45)\n\n  return buffer\n}\n\nfunction hash160 (buf) {\n  var sha = crypto.createHash('sha256').update(buf).digest()\n  return crypto.createHash('ripemd160').update(sha).digest()\n}\n\nHDKey.HARDENED_OFFSET = HARDENED_OFFSET\nmodule.exports = HDKey\n","\nconst errorValues = require('./errorValues.json')\nconst FALLBACK_ERROR_CODE = require('./errorCodes.json').rpc.internal\nconst { EthereumRpcError } = require('./classes')\n\nconst JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.'\n\nconst FALLBACK_MESSAGE = 'Unspecified error message. This is a bug, please report it.'\n\nconst FALLBACK_ERROR = {\n  code: FALLBACK_ERROR_CODE,\n  message: getMessageFromCode(FALLBACK_ERROR_CODE)\n}\n\n/**\n * Gets the message for a given code, or a fallback message if the code has\n * no corresponding message.\n * \n * @param {number} code - The integer error code\n * @param {string} fallbackMessage - The fallback message\n * @return {string} The corresponding message or the fallback message\n */\nfunction getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n\n  if (Number.isInteger(code)) {\n\n    const codeString = code.toString()\n    if (errorValues[codeString]) return errorValues[codeString].message\n\n    if (isJsonRpcServerError(code)) return JSON_RPC_SERVER_ERROR_MESSAGE\n\n    // TODO: allow valid codes and messages to be extended\n    // // EIP 1193 Status Codes\n    // if (code >= 4000 && code <= 4999) return Something?\n  }\n  return fallbackMessage\n}\n\n/**\n * Returns whether the given code is valid.\n * A code is only valid if it has a message.\n * \n * @param {number} code - The code to check\n * @return {boolean} true if the code is valid, false otherwise.\n */\nfunction isValidCode(code) {\n\n  if (!Number.isInteger(code)) return false\n\n  const codeString = code.toString()\n  if (errorValues[codeString]) return true\n\n  if (isJsonRpcServerError(code)) return true\n\n  // TODO: allow valid codes and messages to be extended\n  // // EIP 1193 Status Codes\n  // if (code >= 4000 && code <= 4999) return true\n\n  return false\n}\n\n/**\n * Serializes the given error to an Ethereum JSON RPC-compatible error object.\n * Merely copies the given error's values if it is already compatible.\n * If the given error is not fully compatible, it will be preserved on the\n * returned object's data.originalError property.\n * Adds a 'stack' property if it exists on the given error.\n *\n * @param {any} error - The error to serialize.\n * @param {object} fallbackError - The custom fallback error values if the\n * given error is invalid.\n * @return {object} A standardized error object.\n */\nfunction serializeError (error, fallbackError = FALLBACK_ERROR) {\n\n  if (\n    !fallbackError || \n    !Number.isInteger(fallbackError.code) ||\n    typeof fallbackError.message !== 'string'\n  ) {\n    throw new Error(\n      'fallbackError must contain integer number code and string message.'\n    )\n  }\n\n  if (error instanceof EthereumRpcError) {\n    return error.serialize()\n  }\n\n  const serialized = {}\n\n  if (error && isValidCode(error.code)) {\n\n    serialized.code = error.code\n\n    if (error.message && typeof error.message === 'string') {\n      serialized.message = error.message\n      if (error.hasOwnProperty('data')) serialized.data = error.data\n    } else {\n      serialized.message = getMessageFromCode(serialized.code)\n      serialized.data = { originalError: assignOriginalError(error) }\n    }\n\n  } else {\n    serialized.code = fallbackError.code\n    serialized.message = (\n      error && error.message\n        ? error.message\n        : fallbackError.message\n    )\n    serialized.data = { originalError: assignOriginalError(error) }\n  }\n\n  if (error && error.stack) serialized.stack = error.stack\n  return serialized\n}\n\n// Internal\n\nfunction isJsonRpcServerError (code) {\n  return code >= -32099 && code <= -32000\n}\n\nfunction assignOriginalError (error) {\n  if (error && typeof error === 'object' && !Array.isArray(error)) {\n    return Object.assign({}, error)\n  }\n  return error\n}\n\n// Exports\n\nmodule.exports = {\n  getMessageFromCode,\n  isValidCode,\n  serializeError,\n  JSON_RPC_SERVER_ERROR_MESSAGE,\n}\n","\nconst safeStringify = require('fast-safe-stringify')\n\n/**\n * @class JsonRpcError\n * Error subclass implementing JSON RPC 2.0 errors and Ethereum RPC errors\n * per EIP 1474.\n * Permits any integer error code.\n */\nclass EthereumRpcError extends Error {\n\n  /**\n   * Create an Ethereum JSON RPC error.\n   * \n   * @param {number} code - The integer error code.\n   * @param {string} message - The string message.\n   * @param {any} [data] - The error data.\n   */\n  constructor (code, message, data) {\n\n    if (!Number.isInteger(code)) throw new Error(\n      '\"code\" must be an integer.'\n    )\n    if (!message || typeof message !== 'string') throw new Error(\n      '\"message\" must be a nonempty string.'\n    )\n\n    super(message)\n    this.code = code\n    if (data !== undefined) this.data = data\n  }\n\n  /**\n   * Returns a plain object with all public class properties.\n   * \n   * @returns {object} The serialized error. \n   */\n  serialize() {\n    const serialized = {\n      code: this.code,\n      message: this.message,\n    }\n    if (this.data !== undefined) serialized.data = this.data\n    if (this.stack) serialized.stack = this.stack\n    return serialized\n  }\n\n  /**\n   * Return a string representation of the serialized error, omitting\n   * any circular references.\n   * \n   * @returns {string} The serialized error as a string.\n   */\n  toString() {\n    return safeStringify(\n      this.serialize(),\n      stringifyReplacer,\n      2\n    )\n  }\n}\n\n/**\n * @class EthereumRpcError\n * Error subclass implementing Ethereum Provider errors per EIP 1193.\n * Permits integer error codes in the [ 1000 <= 4999 ] range.\n */\nclass EthereumProviderError extends EthereumRpcError {\n\n  /**\n   * Create an Ethereum JSON RPC error.\n   * \n   * @param {number} code - The integer error code, in the [ 1000 <= 4999 ] range.\n   * @param {string} message - The string message.\n   * @param {any} [data] - The error data.\n   */\n  constructor(code, message, data) {\n\n    if (!isValidEthProviderCode(code)) {\n      throw new Error(\n        '\"code\" must be an integer such that: 1000 <= code <= 4999'\n      )\n    }\n\n    super(code, message, data)\n  }\n}\n\n// Internal\n\nfunction isValidEthProviderCode(code) {\n  return Number.isInteger(code) && code >= 1000 && code <= 4999\n}\n\nfunction stringifyReplacer(_, value) {\n  if (value === '[Circular]') {\n    return\n  }\n  return value\n}\n\n// Exports\n\nmodule.exports =  {\n  EthereumRpcError,\n  EthereumProviderError\n}\n","const EC = require('elliptic').ec\n\nconst ec = new EC('secp256k1')\nconst ecparams = ec.curve\n\n// Hack, we can not use bn.js@5, while elliptic uses bn.js@4\n// See https://github.com/indutny/elliptic/issues/191#issuecomment-569888758\nconst BN = ecparams.n.constructor\n\nfunction loadCompressedPublicKey (first, xbuf) {\n  let x = new BN(xbuf)\n\n  // overflow\n  if (x.cmp(ecparams.p) >= 0) return null\n  x = x.toRed(ecparams.red)\n\n  // compute corresponding Y\n  let y = x.redSqr().redIMul(x).redIAdd(ecparams.b).redSqrt()\n  if ((first === 0x03) !== y.isOdd()) y = y.redNeg()\n\n  return ec.keyPair({ pub: { x: x, y: y } })\n}\n\nfunction loadUncompressedPublicKey (first, xbuf, ybuf) {\n  let x = new BN(xbuf)\n  let y = new BN(ybuf)\n\n  // overflow\n  if (x.cmp(ecparams.p) >= 0 || y.cmp(ecparams.p) >= 0) return null\n\n  x = x.toRed(ecparams.red)\n  y = y.toRed(ecparams.red)\n\n  // is odd flag\n  if ((first === 0x06 || first === 0x07) && y.isOdd() !== (first === 0x07)) return null\n\n  // x*x*x + b = y*y\n  const x3 = x.redSqr().redIMul(x)\n  if (!y.redSqr().redISub(x3.redIAdd(ecparams.b)).isZero()) return null\n\n  return ec.keyPair({ pub: { x: x, y: y } })\n}\n\nfunction loadPublicKey (pubkey) {\n  // length should be validated in interface\n  const first = pubkey[0]\n  switch (first) {\n    case 0x02:\n    case 0x03:\n      if (pubkey.length !== 33) return null\n      return loadCompressedPublicKey(first, pubkey.subarray(1, 33))\n    case 0x04:\n    case 0x06:\n    case 0x07:\n      if (pubkey.length !== 65) return null\n      return loadUncompressedPublicKey(first, pubkey.subarray(1, 33), pubkey.subarray(33, 65))\n    default:\n      return null\n  }\n}\n\nfunction savePublicKey (output, point) {\n  const pubkey = point.encode(null, output.length === 33)\n  // Loop should be faster because we do not need create extra Uint8Array\n  // output.set(new Uint8Array(pubkey))\n  for (let i = 0; i < output.length; ++i) output[i] = pubkey[i]\n}\n\nmodule.exports = {\n  contextRandomize () {\n    return 0\n  },\n\n  privateKeyVerify (seckey) {\n    const bn = new BN(seckey)\n    return bn.cmp(ecparams.n) < 0 && !bn.isZero() ? 0 : 1\n  },\n\n  privateKeyNegate (seckey) {\n    const bn = new BN(seckey)\n    const negate = ecparams.n.sub(bn).umod(ecparams.n).toArrayLike(Uint8Array, 'be', 32)\n    seckey.set(negate)\n    return 0\n  },\n\n  privateKeyTweakAdd (seckey, tweak) {\n    const bn = new BN(tweak)\n    if (bn.cmp(ecparams.n) >= 0) return 1\n\n    bn.iadd(new BN(seckey))\n    if (bn.cmp(ecparams.n) >= 0) bn.isub(ecparams.n)\n    if (bn.isZero()) return 1\n\n    const tweaked = bn.toArrayLike(Uint8Array, 'be', 32)\n    seckey.set(tweaked)\n\n    return 0\n  },\n\n  privateKeyTweakMul (seckey, tweak) {\n    let bn = new BN(tweak)\n    if (bn.cmp(ecparams.n) >= 0 || bn.isZero()) return 1\n\n    bn.imul(new BN(seckey))\n    if (bn.cmp(ecparams.n) >= 0) bn = bn.umod(ecparams.n)\n\n    const tweaked = bn.toArrayLike(Uint8Array, 'be', 32)\n    seckey.set(tweaked)\n\n    return 0\n  },\n\n  publicKeyVerify (pubkey) {\n    const pair = loadPublicKey(pubkey)\n    return pair === null ? 1 : 0\n  },\n\n  publicKeyCreate (output, seckey) {\n    const bn = new BN(seckey)\n    if (bn.cmp(ecparams.n) >= 0 || bn.isZero()) return 1\n\n    const point = ec.keyFromPrivate(seckey).getPublic()\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  publicKeyConvert (output, pubkey) {\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 1\n\n    const point = pair.getPublic()\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  publicKeyNegate (output, pubkey) {\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 1\n\n    const point = pair.getPublic()\n    point.y = point.y.redNeg()\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  publicKeyCombine (output, pubkeys) {\n    const pairs = new Array(pubkeys.length)\n    for (let i = 0; i < pubkeys.length; ++i) {\n      pairs[i] = loadPublicKey(pubkeys[i])\n      if (pairs[i] === null) return 1\n    }\n\n    let point = pairs[0].getPublic()\n    for (let i = 1; i < pairs.length; ++i) point = point.add(pairs[i].pub)\n    if (point.isInfinity()) return 2\n\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  publicKeyTweakAdd (output, pubkey, tweak) {\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 1\n\n    tweak = new BN(tweak)\n    if (tweak.cmp(ecparams.n) >= 0) return 2\n\n    const point = pair.getPublic().add(ecparams.g.mul(tweak))\n    if (point.isInfinity()) return 2\n\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  publicKeyTweakMul (output, pubkey, tweak) {\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 1\n\n    tweak = new BN(tweak)\n    if (tweak.cmp(ecparams.n) >= 0 || tweak.isZero()) return 2\n\n    const point = pair.getPublic().mul(tweak)\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  signatureNormalize (sig) {\n    const r = new BN(sig.subarray(0, 32))\n    const s = new BN(sig.subarray(32, 64))\n    if (r.cmp(ecparams.n) >= 0 || s.cmp(ecparams.n) >= 0) return 1\n\n    if (s.cmp(ec.nh) === 1) {\n      sig.set(ecparams.n.sub(s).toArrayLike(Uint8Array, 'be', 32), 32)\n    }\n\n    return 0\n  },\n\n  // Copied 1-to-1 from https://github.com/bitcoinjs/bip66/blob/master/index.js\n  // Adapted for Uint8Array instead Buffer\n  signatureExport (obj, sig) {\n    const sigR = sig.subarray(0, 32)\n    const sigS = sig.subarray(32, 64)\n    if (new BN(sigR).cmp(ecparams.n) >= 0) return 1\n    if (new BN(sigS).cmp(ecparams.n) >= 0) return 1\n\n    const { output } = obj\n\n    // Prepare R\n    let r = output.subarray(4, 4 + 33)\n    r[0] = 0x00\n    r.set(sigR, 1)\n\n    let lenR = 33\n    let posR = 0\n    for (; lenR > 1 && r[posR] === 0x00 && !(r[posR + 1] & 0x80); --lenR, ++posR);\n\n    r = r.subarray(posR)\n    if (r[0] & 0x80) return 1\n    if (lenR > 1 && (r[0] === 0x00) && !(r[1] & 0x80)) return 1\n\n    // Prepare S\n    let s = output.subarray(6 + 33, 6 + 33 + 33)\n    s[0] = 0x00\n    s.set(sigS, 1)\n\n    let lenS = 33\n    let posS = 0\n    for (; lenS > 1 && s[posS] === 0x00 && !(s[posS + 1] & 0x80); --lenS, ++posS);\n\n    s = s.subarray(posS)\n    if (s[0] & 0x80) return 1\n    if (lenS > 1 && (s[0] === 0x00) && !(s[1] & 0x80)) return 1\n\n    // Set output length for return\n    obj.outputlen = 6 + lenR + lenS\n\n    // Output in specified format\n    // 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n    output[0] = 0x30\n    output[1] = obj.outputlen - 2\n    output[2] = 0x02\n    output[3] = r.length\n    output.set(r, 4)\n    output[4 + lenR] = 0x02\n    output[5 + lenR] = s.length\n    output.set(s, 6 + lenR)\n\n    return 0\n  },\n\n  // Copied 1-to-1 from https://github.com/bitcoinjs/bip66/blob/master/index.js\n  // Adapted for Uint8Array instead Buffer\n  signatureImport (output, sig) {\n    if (sig.length < 8) return 1\n    if (sig.length > 72) return 1\n    if (sig[0] !== 0x30) return 1\n    if (sig[1] !== sig.length - 2) return 1\n    if (sig[2] !== 0x02) return 1\n\n    const lenR = sig[3]\n    if (lenR === 0) return 1\n    if (5 + lenR >= sig.length) return 1\n    if (sig[4 + lenR] !== 0x02) return 1\n\n    const lenS = sig[5 + lenR]\n    if (lenS === 0) return 1\n    if ((6 + lenR + lenS) !== sig.length) return 1\n\n    if (sig[4] & 0x80) return 1\n    if (lenR > 1 && (sig[4] === 0x00) && !(sig[5] & 0x80)) return 1\n\n    if (sig[lenR + 6] & 0x80) return 1\n    if (lenS > 1 && (sig[lenR + 6] === 0x00) && !(sig[lenR + 7] & 0x80)) return 1\n\n    let sigR = sig.subarray(4, 4 + lenR)\n    if (sigR.length === 33 && sigR[0] === 0x00) sigR = sigR.subarray(1)\n    if (sigR.length > 32) return 1\n\n    let sigS = sig.subarray(6 + lenR)\n    if (sigS.length === 33 && sigS[0] === 0x00) sigS = sigS.slice(1)\n    if (sigS.length > 32) throw new Error('S length is too long')\n\n    let r = new BN(sigR)\n    if (r.cmp(ecparams.n) >= 0) r = new BN(0)\n\n    let s = new BN(sig.subarray(6 + lenR))\n    if (s.cmp(ecparams.n) >= 0) s = new BN(0)\n\n    output.set(r.toArrayLike(Uint8Array, 'be', 32), 0)\n    output.set(s.toArrayLike(Uint8Array, 'be', 32), 32)\n\n    return 0\n  },\n\n  ecdsaSign (obj, message, seckey, data, noncefn) {\n    if (noncefn) {\n      const _noncefn = noncefn\n      noncefn = (counter) => {\n        const nonce = _noncefn(message, seckey, null, data, counter)\n\n        const isValid = nonce instanceof Uint8Array && nonce.length === 32\n        if (!isValid) throw new Error('This is the way')\n\n        return new BN(nonce)\n      }\n    }\n\n    const d = new BN(seckey)\n    if (d.cmp(ecparams.n) >= 0 || d.isZero()) return 1\n\n    let sig\n    try {\n      sig = ec.sign(message, seckey, { canonical: true, k: noncefn, pers: data })\n    } catch (err) {\n      return 1\n    }\n\n    obj.signature.set(sig.r.toArrayLike(Uint8Array, 'be', 32), 0)\n    obj.signature.set(sig.s.toArrayLike(Uint8Array, 'be', 32), 32)\n    obj.recid = sig.recoveryParam\n\n    return 0\n  },\n\n  ecdsaVerify (sig, msg32, pubkey) {\n    const sigObj = { r: sig.subarray(0, 32), s: sig.subarray(32, 64) }\n\n    const sigr = new BN(sigObj.r)\n    const sigs = new BN(sigObj.s)\n    if (sigr.cmp(ecparams.n) >= 0 || sigs.cmp(ecparams.n) >= 0) return 1\n    if (sigs.cmp(ec.nh) === 1 || sigr.isZero() || sigs.isZero()) return 3\n\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 2\n\n    const point = pair.getPublic()\n    const isValid = ec.verify(msg32, sigObj, point)\n    return isValid ? 0 : 3\n  },\n\n  ecdsaRecover (output, sig, recid, msg32) {\n    const sigObj = { r: sig.slice(0, 32), s: sig.slice(32, 64) }\n\n    const sigr = new BN(sigObj.r)\n    const sigs = new BN(sigObj.s)\n    if (sigr.cmp(ecparams.n) >= 0 || sigs.cmp(ecparams.n) >= 0) return 1\n\n    if (sigr.isZero() || sigs.isZero()) return 2\n\n    // Can throw `throw new Error('Unable to find sencond key candinate');`\n    let point\n    try {\n      point = ec.recoverPubKey(msg32, sigObj, recid)\n    } catch (err) {\n      return 2\n    }\n\n    savePublicKey(output, point)\n\n    return 0\n  },\n\n  ecdh (output, pubkey, seckey, data, hashfn, xbuf, ybuf) {\n    const pair = loadPublicKey(pubkey)\n    if (pair === null) return 1\n\n    const scalar = new BN(seckey)\n    if (scalar.cmp(ecparams.n) >= 0 || scalar.isZero()) return 2\n\n    const point = pair.getPublic().mul(scalar)\n\n    if (hashfn === undefined) {\n      const data = point.encode(null, true)\n      const sha256 = ec.hash().update(data).digest()\n      for (let i = 0; i < 32; ++i) output[i] = sha256[i]\n    } else {\n      if (!xbuf) xbuf = new Uint8Array(32)\n      const x = point.getX().toArray('be', 32)\n      for (let i = 0; i < 32; ++i) xbuf[i] = x[i]\n\n      if (!ybuf) ybuf = new Uint8Array(32)\n      const y = point.getY().toArray('be', 32)\n      for (let i = 0; i < 32; ++i) ybuf[i] = y[i]\n\n      const hash = hashfn(xbuf, ybuf, data)\n\n      const isValid = hash instanceof Uint8Array && hash.length === output.length\n      if (!isValid) return 2\n\n      output.set(hash)\n    }\n\n    return 0\n  }\n}\n"],"sourceRoot":""}
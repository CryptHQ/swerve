(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70b898db"],{"05f0c":function(t,e,n){},"4e82":function(t,e,n){"use strict";var a=n("23e7"),r=n("1c0b"),c=n("7b0b"),o=n("d039"),s=n("a640"),i=[],l=i.sort,u=o((function(){i.sort(void 0)})),d=o((function(){i.sort(null)})),h=s("sort"),p=u||!d||!h;a({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?l.call(c(this)):l.call(c(this),r(t))}})},"5db7":function(t,e,n){"use strict";var a=n("23e7"),r=n("a2bf"),c=n("7b0b"),o=n("50c4"),s=n("1c0b"),i=n("65f0");a({target:"Array",proto:!0},{flatMap:function(t){var e,n=c(this),a=o(n.length);return s(t),e=i(n,0),e.length=r(e,n,n,a,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},"5e35":function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o}));n("d3b7"),n("96cf");var a=n("1da1"),r=n("2fa3"),c={btcPrice:null};function o(){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["o"](fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd"),300);case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,c.btcPrice=n.bitcoin.usd,t.abrupt("return",n.bitcoin.usd);case 8:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}},6866:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"window white"},[n("div",{staticClass:"chartoptions"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.showbars,expression:"showbars"}],attrs:{id:"showbars",type:"checkbox"},domProps:{checked:Array.isArray(t.showbars)?t._i(t.showbars,null)>-1:t.showbars},on:{change:function(e){var n=t.showbars,a=e.target,r=!!a.checked;if(Array.isArray(n)){var c=null,o=t._i(n,c);a.checked?o<0&&(t.showbars=n.concat([c])):o>-1&&(t.showbars=n.slice(0,o).concat(n.slice(o+1)))}else t.showbars=r}}}),n("label",{attrs:{for:"showbars"}},[t._v("Show bars")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.showline,expression:"showline"}],attrs:{id:"showline",type:"checkbox"},domProps:{checked:Array.isArray(t.showline)?t._i(t.showline,null)>-1:t.showline},on:{change:function(e){var n=t.showline,a=e.target,r=!!a.checked;if(Array.isArray(n)){var c=null,o=t._i(n,c);a.checked?o<0&&(t.showline=n.concat([c])):o>-1&&(t.showline=n.slice(0,o).concat(n.slice(o+1)))}else t.showline=r}}}),n("label",{attrs:{for:"showline"}},[t._v("Show line")])]),n("highcharts",{ref:"highcharts",attrs:{"constructor-type":"stockChart",options:t.chartdata}})],1),n("div",{staticClass:"window white"},[n("highcharts",{ref:"coincharts",attrs:{"constructor-type":"stockChart",options:t.coinchartdata}})],1),n("div",{staticClass:"window white"},[n("highcharts",{ref:"piecharts",attrs:{options:t.piechartdata}})],1),n("div",{staticClass:"window white"},[n("highcharts",{ref:"piecoinscharts",attrs:{options:t.piechartdatacoins}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.totalDeposits>0,expression:"totalDeposits > 0"}],staticClass:"window white"},[n("highcharts",{ref:"mypiecharts",attrs:{options:t.mypiechartdata}})],1)])},r=[],c=(n("99af"),n("cb29"),n("4de4"),n("7db0"),n("5db7"),n("caad"),n("c975"),n("d81d"),n("13d5"),n("fb6a"),n("4e82"),n("73d9"),n("6eba"),n("0d03"),n("b0c0"),n("b680"),n("4fad"),n("c1f9"),n("b64b"),n("d3b7"),n("07ac"),n("ddb0"),n("b85c")),o=n("3835"),s=n("ade3"),i=n("2909"),l=n("5530"),u=(n("96cf"),n("1da1")),d=n("2b0e"),h=n("ea7f"),p=n.n(h),b=n("0319"),f=n.n(b),m=n("d68a"),y=n.n(m),w=n("4452"),v=n("37d8"),g=n.n(v),x=n("a4e2"),O=n("5245"),k=n("2fa3"),j=n("51bf"),S=n("5e35");f()(p.a),y()(p.a),g()(p.a),p.a.setOptions({lang:{loading:""}});var C={components:{highcharts:w["Chart"]},data:function(){return{chartdata:{chart:{panning:!0,zoomType:"x",panKey:"ctrl",type:"column",height:600},title:{text:"Total USD Deposits"},rangeSelector:{selected:1},plotOptions:{series:{dataGrouping:{forced:!0,units:[["day",[1]]]},point:{events:{click:function(t){return function(){var t=this.dataGroup?this.dataGroup.start:this.index;console.log(this,t,"INDEX")}}()}}},column:{stacking:"normal",dataLabels:{enabled:!1}}},exporting:{buttons:{contextButton:{menuItems:["printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","openInCloud"]}}},yAxis:{opposite:!1,title:{text:"Total deposits",style:{color:"black"}},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:p.a.defaultOptions.title.style&&p.a.defaultOptions.title.style.color||"gray"}},tickPixelInterval:10},xAxis:{labels:{style:{color:"black"}}},series:[],tooltip:{valueDecimals:5,pointFormatter:function(){return'<span style="color:'.concat(this.color,'">●</span> ').concat(this.series.name,": <b>").concat(this.y.toFixed(2),"</b><br/>")}},legend:{enabled:!0}},piechartdata:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Pool USD % holdings"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(t){return function(e){return"<b>".concat(this.key,"</b>: \n\t\t\t                \t\t").concat(k["e"](t.allPools[this.key],0),"$\n\t\t\t                \t\t(").concat(this.percentage.toFixed(2),"%)")}}(this)}}},series:[]},piechartdatacoins:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Pool coin % holdings"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(t){return function(e){return"<b>".concat(this.key,"</b>: \n\t\t\t                \t\t").concat(k["e"](t.allCoins[this.key],0),"$\n\t\t\t                \t\t(").concat(this.percentage.toFixed(2),"%)")}}(this)}}},series:[]},mypiechartdata:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"My USD % holdings"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:function(t){return function(e){return"<b>".concat(this.key,"</b>: \n\t\t\t                \t\t").concat(k["e"](t.balances["susd"==this.key?"susdv2":this.key],0),"$\n\t\t\t                \t\t(").concat(this.percentage.toFixed(2),"%)")}}(this),filter:{property:"percentage",operator:">",value:0}}}},series:[]},coinchartdata:{chart:{panning:!0,zoomType:"x",panKey:"ctrl",type:"column",height:600},title:{text:"Coin USD Deposits"},rangeSelector:{selected:1},plotOptions:{series:{dataGrouping:{forced:!0,units:[["day",[1]]]},point:{events:{click:function(t){return function(){var t=this.dataGroup?this.dataGroup.start:this.index;console.log(this,t,"INDEX")}}()}}},column:{stacking:"normal",dataLabels:{enabled:!1}}},exporting:{buttons:{contextButton:{menuItems:["printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS","openInCloud"]}}},yAxis:{opposite:!1,title:{text:"Total coin deposits",style:{color:"black"}},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:p.a.defaultOptions.title.style&&p.a.defaultOptions.title.style.color||"gray"}},tickPixelInterval:10},xAxis:{labels:{style:{color:"black"}}},series:[],tooltip:{valueDecimals:5,pointFormatter:function(){return'<span style="color:'.concat(this.color,'">●</span> ').concat(this.series.name,": <b>").concat(this.y.toFixed(2),"</b><br/>")}},legend:{enabled:!0}},chart:null,piechart:null,piecoinschart:null,mypiechart:null,coinchart:null,showbars:!0,showline:!0,allPools:null,allCoins:null,balances:{compound:-1,usdt:-1,y:-1,busd:-1,susdv2:-1,pax:-1,tbtc:-1,ren:-1,sbtc:-1},totalDeposits:0}},watch:{showbars:function(t){if(0!=t||this.showline){var e="show";t||(e="hide");for(var n=0;n<this.chart.series.length-2;n++)this.chart.series[n][e]()}},showline:function(t){if(0!=t||this.showbars){var e="show";t||(e="hide"),this.chart.series[this.chart.series.length-2][e]()}}},created:function(){var t=this;this.$watch((function(){return j["e"].multicall&&j["e"].default_account}),(function(e,n){e&&e.toLowerCase()==n&&n.toLowerCase()||e&&t.showBalances()}),{immediate:!0})},mounted:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,a,r,u,d,h,p,b,f,m,y,w,v,g,j,S,C,D,_,P,L,A,M,T,B,F,G,E,U,$,I,R,N,W,X;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.chart=t.$refs.highcharts.chart,t.piechart=t.$refs.piecharts.chart,t.piecoinschart=t.$refs.piecoinscharts.chart,t.mypiechart=t.$refs.mypiecharts.chart,t.coinchart=t.$refs.coincharts.chart,t.chart.showLoading(),t.piechart.showLoading(),t.mypiechart.showLoading(),t.coinchart.showLoading(),n=Object.keys(O["g"]).filter((function(t){return"susd"!=t&&"y"!=t&&"tbtc"!=t})),e.next=13,x["a"](n,!0,1440);case 13:return a=x["f"].volumeData[1440],e.next=16,k["o"](fetch("https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&from=1589587198&to=".concat(Date.now()/1e3|0)));case 16:return r=e.sent,e.next=19,r.json();case 19:for(r=e.sent,u=0,d=["ren","sbtc"];u<d.length;u++)h=d[u],a[h]=a[h].map((function(t){return t.balances=t.balances.map((function(e){return e*x["b"](t.timestamp,r.prices)})),t}));for(a=Object.keys(a).reduce((function(t,e){return Object(l["a"])(Object(l["a"])({},t),{},Object(s["a"])({},e,new Array(Math.max.apply(Math,Object(i["a"])(Object.values(a).map((function(t){return t.length}))))-a[e].length).fill({}).concat(a[e])))}),{}),console.log(a,"THE DATA"),p={},b=function(){var t=Object(o["a"])(m[f],2),e=t[0],n=t[1];p[e]=[];var a,r=Object(c["a"])(n);try{var s=function(){var t=a.value;if(!t.timestamp)return"continue";var n=t.balances.map((function(n,a){return n*t.rates[a]/1e18/O["g"]["susd"==e?"susdv2":e].coin_precisions[a]}));p[e].push([1e3*t.timestamp,n.reduce((function(t,e){return t+e}),0)])};for(r.s();!(a=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}},f=0,m=Object.entries(a);f<m.length;f++)b();y=0,w=Object.entries(p);case 27:if(!(y<w.length)){e.next=35;break}if(v=Object(o["a"])(w[y],2),g=v[0],j=v[1],"tbtc"!=g){e.next=31;break}return e.abrupt("continue",32);case 31:t.chart.addSeries({type:"column",name:g,data:j},!1,!1);case 32:y++,e.next=27;break;case 35:S=["DAI","USDC","USDT","TUSD","BUSD","SUSD","PAX","renBTC","WBTC","sBTC"],C=S.reduce((function(t,e){return t[e]=[],t}),{}),D=function(){var t=Object(o["a"])(P[_],2),e=t[0],n=t[1];if("tbtc"==e)return"continue";var a,r=Object(c["a"])(n);try{var s=function(){var t=a.value;if(!t.timestamp)return"continue";var n,r=t.balances.map((function(n,a){return n*t.rates[a]/1e18/O["g"]["susd"==e?"susdv2":e].coin_precisions[a]})),s=Object(c["a"])(r.entries());try{for(s.s();!(n=s.n()).done;){var i=Object(o["a"])(n.value,2),l=i[0],u=i[1];"busd"==e&&3==l&&(l=4),"susd"==e&&3==l&&(l=5),"pax"==e&&3==l&&(l=6),["ren","sbtc"].includes(e)&&(l+=7);var d=C[S[l]].find((function(e){return e[0]==1e3*t.timestamp}));void 0!==d?d[1]+=u:C[S[l]].push([1e3*t.timestamp,u])}}catch(h){s.e(h)}finally{s.f()}};for(r.s();!(a=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}},_=0,P=Object.entries(a);case 39:if(!(_<P.length)){e.next=46;break}if(L=D(),"continue"!==L){e.next=43;break}return e.abrupt("continue",43);case 43:_++,e.next=39;break;case 46:for(A=0,M=Object.entries(C);A<M.length;A++)T=Object(o["a"])(M[A],2),B=T[0],F=T[1],F.sort((function(t,e){return t[0]-e[0]})),t.coinchart.addSeries({type:"column",name:B,data:F},!1,!1);t.chart.hideLoading(),t.chart.redraw(),t.coinchart.hideLoading(),t.coinchart.redraw(),G=Object.keys(p).reduce((function(t,e){return Object(l["a"])(Object(l["a"])({},t),{},Object(s["a"])({},e,new Array(Math.max.apply(Math,Object(i["a"])(Object.values(p).map((function(t){return t.length}))))-p[e].length).fill({}).concat(p[e])))}),{}),E=[],U=Object(c["a"])(G.compound.entries());try{for(I=function(){var t=Object(o["a"])($.value,2),e=t[0],n=(t[1],Object.values(G).map((function(t){return t[e]})).filter((function(t){return t[0]})));E.push([n[0][0],n.map((function(t){return t[1]})).reduce((function(t,e){return t+e}),0)])},U.s();!($=U.n()).done;)I()}catch(J){U.e(J)}finally{U.f()}t.chart.addSeries({type:"line",name:"Total USD Deposits",data:E}),t.allPools=Object.fromEntries(Object.entries(p).filter((function(t){var e=Object(o["a"])(t,2),n=e[0];e[1];return"tbtc"!=n})).map((function(t){var e=Object(o["a"])(t,2),n=e[0];e[1];return[n,p[n][p[n].length-1][1]]}))),R=Object.keys(p).filter((function(t){return"tbtc"!=t})).map((function(t){return p[t][p[t].length-1][1]})),N=R.reduce((function(t,e){return t+e}),0),W=R.map((function(t){return t/N*100})),W=W.map((function(t,e){return{name:Object.keys(p).filter((function(t){return"tbtc"!=t}))[e],y:W[e]}})),X=W.map((function(t){return t.y})).indexOf(Math.max.apply(Math,Object(i["a"])(W.map((function(t){return t.y}))))),W[X].sliced=!0,W[X].selected=!0,t.piechart.addSeries({name:"Pool %",data:W},!0,!1),t.piechart.hideLoading(),t.allCoins=Object.fromEntries(Object.entries(C).filter((function(t){var e=Object(o["a"])(t,2),n=e[0];e[1];return"tbtc"!=n})).map((function(t){var e=Object(o["a"])(t,2),n=e[0];e[1];return[n,C[n][C[n].length-1][1]]}))),R=Object.keys(C).filter((function(t){return!["tbtc","hbtc"].includes(t.toLowerCase())})).map((function(t){return C[t][C[t].length-1][1]})),N=R.reduce((function(t,e){return t+e}),0),W=R.map((function(t){return t/N*100})),W=W.map((function(t,e){return{name:Object.keys(C).filter((function(t){return!["hbtc","tbtc"].includes(t)}))[e],y:W[e]}})),X=W.map((function(t){return t.y})).indexOf(Math.max.apply(Math,Object(i["a"])(W.map((function(t){return t.y}))))),W[X].sliced=!0,W[X].selected=!0,t.piecoinschart.addSeries({name:"Coin %",data:W},!0,!1),t.piecoinschart.hideLoading(),t.chart.update({title:{text:"Total USD Deposits ".concat(k["e"](E[E.length-1][1],0),"$")}});case 77:case"end":return e.stop()}}),e)})))()},methods:{showBalances:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,a,r,c,s,l,u,h,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=["compound","usdt","y","busd","susdv2","pax","ren","sbtc"],j["e"].default_account){e.next=3;break}return e.abrupt("return");case 3:return j["e"].contracts.compound=j["e"],a=n.flatMap((function(t){return[[O["g"][t].token_address,"0x70a08231000000000000000000000000"+j["e"].default_account.slice(2)],[O["g"][t].swap_address,"0xbb7b8b80"]]})),a.push([O["g"].susdv2.sCurveRewards_address,"0x70a08231000000000000000000000000"+j["e"].default_account.slice(2)]),a.push([O["g"].sbtc.sCurveRewards_address,"0x70a08231000000000000000000000000"+j["e"].default_account.slice(2)]),a.push([O["g"].swusd.sCurveRewards_address,"0x70a08231000000000000000000000000"+j["e"].default_account.slice(2)]),e.next=10,j["e"].multicall.methods.aggregate(a).call();case 10:return r=e.sent,c=r[1].map((function(t){return web3.eth.abi.decodeParameter("uint256",t)})),e.next=14,k["o"](S["a"]());case 14:s=e.sent,k["b"](c,2).slice(0,n.length).map((function(e,a){var r=n[a];d["a"].set(t.balances,r,+e[0]*+e[1]/1e36),["tbtc","ren","sbtc"].includes(r)&&d["a"].set(t.balances,r,t.balances[r]*s)})),l=c.length,d["a"].set(t.balances,"susdv2",t.balances.susdv2+ +c[l-3]*c[9]/1e36),d["a"].set(t.balances,"sbtc",t.balances.sbtc+ +c[l-2]*c[15]/1e36*s),d["a"].set(t.balances,"y",t.balances.y+ +c[l-1]*c[5]/1e36),u=Object.fromEntries(Object.entries(t.balances).map((function(t){var e=Object(o["a"])(t,2),n=e[0],a=e[1];return[n,a>0?a:0]}))),t.totalDeposits=Object.values(u).reduce((function(t,e){return t+e}),0),t.totalDeposits>0&&(h=Object.keys(u).map((function(e,n){return{name:"susdv2"==e?"susd":e,y:u[e]/t.totalDeposits}})),p=h.map((function(t){return t.y})).indexOf(Math.max.apply(Math,Object(i["a"])(h.map((function(t){return t.y}))))),h[p].sliced=!0,h[p].selected=!0,t.mypiechart.addSeries({name:"My pool %",data:h},!0,!1)),t.mypiechart.hideLoading();case 24:case"end":return e.stop()}}),e)})))()}}},D=C,_=(n("9032"),n("2877")),P=Object(_["a"])(D,a,r,!1,null,"6ad8861a",null);e["default"]=P.exports},"73d9":function(t,e,n){var a=n("44d2");a("flatMap")},9032:function(t,e,n){"use strict";var a=n("05f0c"),r=n.n(a);r.a},a2bf:function(t,e,n){"use strict";var a=n("e8b5"),r=n("50c4"),c=n("0366"),o=function(t,e,n,s,i,l,u,d){var h,p=i,b=0,f=!!u&&c(u,d,3);while(b<s){if(b in n){if(h=f?f(n[b],b,e):n[b],l>0&&a(h))p=o(t,e,h,r(h.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=h}p++}b++}return p};t.exports=o}}]);
//# sourceMappingURL=chunk-70b898db.ac4e5127.js.map